{"file_contents":{"src/main/java/com/educationerp/user_management/controller/UserController.java":{"content":"package com.educationerp.user_management.controller;\n\nimport com.educationerp.core.dto.ApiResponse;\nimport com.educationerp.security.enums.Role;\nimport com.educationerp.user_management.dto.CreateUserRequest;\nimport com.educationerp.user_management.dto.UpdateUserRequest;\nimport com.educationerp.user_management.dto.UserResponse;\nimport com.educationerp.user_management.service.UserService;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n/**\n * REST controller for User management operations\n * Provides CRUD operations for users with role-based access control\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@RestController\n@RequestMapping(\"/api/users\")\n@Tag(name = \"User Management\", description = \"User management operations\")\npublic class UserController {\n\n    private static final Logger logger = LoggerFactory.getLogger(UserController.class);\n\n    @Autowired\n    private UserService userService;\n\n    /**\n     * Create a new user\n     */\n    @PostMapping\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Create user\", description = \"Create a new user in the system\")\n    public ResponseEntity<ApiResponse<UserResponse>> createUser(@Valid @RequestBody CreateUserRequest request) {\n        logger.info(\"Creating new user with username: {}\", request.getUsername());\n        \n        UserResponse userResponse = userService.createUser(request);\n        ApiResponse<UserResponse> response = ApiResponse.success(\"User created successfully\", userResponse);\n        \n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    /**\n     * Get user by ID\n     */\n    @GetMapping(\"/{id}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN') or hasRole('BRANCH_MANAGER') or @userService.canAccessUser(#id)\")\n    @Operation(summary = \"Get user by ID\", description = \"Retrieve user information by ID\")\n    public ResponseEntity<ApiResponse<UserResponse>> getUserById(\n            @Parameter(description = \"User ID\") @PathVariable Long id) {\n        \n        UserResponse userResponse = userService.getUserById(id);\n        ApiResponse<UserResponse> response = ApiResponse.success(\"User retrieved successfully\", userResponse);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get user by username\n     */\n    @GetMapping(\"/username/{username}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN') or hasRole('BRANCH_MANAGER')\")\n    @Operation(summary = \"Get user by username\", description = \"Retrieve user information by username\")\n    public ResponseEntity<ApiResponse<UserResponse>> getUserByUsername(\n            @Parameter(description = \"Username\") @PathVariable String username) {\n        \n        UserResponse userResponse = userService.getUserByUsername(username);\n        ApiResponse<UserResponse> response = ApiResponse.success(\"User retrieved successfully\", userResponse);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get all users with pagination\n     */\n    @GetMapping\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get all users\", description = \"Retrieve all users with pagination\")\n    public ResponseEntity<ApiResponse<Page<UserResponse>>> getAllUsers(Pageable pageable) {\n        Page<UserResponse> users = userService.getAllUsers(pageable);\n        ApiResponse<Page<UserResponse>> response = ApiResponse.success(\"Users retrieved successfully\", users);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get users by role\n     */\n    @GetMapping(\"/role/{role}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN') or hasRole('BRANCH_MANAGER')\")\n    @Operation(summary = \"Get users by role\", description = \"Retrieve users filtered by role\")\n    public ResponseEntity<ApiResponse<List<UserResponse>>> getUsersByRole(\n            @Parameter(description = \"User role\") @PathVariable Role role) {\n        \n        List<UserResponse> users = userService.getUsersByRole(role);\n        ApiResponse<List<UserResponse>> response = ApiResponse.success(\"Users retrieved successfully\", users);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get users by institution\n     */\n    @GetMapping(\"/institution/{institutionId}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get users by institution\", description = \"Retrieve users filtered by institution\")\n    public ResponseEntity<ApiResponse<List<UserResponse>>> getUsersByInstitution(\n            @Parameter(description = \"Institution ID\") @PathVariable Long institutionId) {\n        \n        List<UserResponse> users = userService.getUsersByInstitution(institutionId);\n        ApiResponse<List<UserResponse>> response = ApiResponse.success(\"Users retrieved successfully\", users);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get users by branch\n     */\n    @GetMapping(\"/branch/{branchId}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN') or hasRole('BRANCH_MANAGER')\")\n    @Operation(summary = \"Get users by branch\", description = \"Retrieve users filtered by branch\")\n    public ResponseEntity<ApiResponse<List<UserResponse>>> getUsersByBranch(\n            @Parameter(description = \"Branch ID\") @PathVariable Long branchId) {\n        \n        List<UserResponse> users = userService.getUsersByBranch(branchId);\n        ApiResponse<List<UserResponse>> response = ApiResponse.success(\"Users retrieved successfully\", users);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Update user\n     */\n    @PutMapping(\"/{id}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN') or @userService.canAccessUser(#id)\")\n    @Operation(summary = \"Update user\", description = \"Update user information\")\n    public ResponseEntity<ApiResponse<UserResponse>> updateUser(\n            @Parameter(description = \"User ID\") @PathVariable Long id,\n            @Valid @RequestBody UpdateUserRequest request) {\n        \n        logger.info(\"Updating user with ID: {}\", id);\n        \n        UserResponse userResponse = userService.updateUser(id, request);\n        ApiResponse<UserResponse> response = ApiResponse.success(\"User updated successfully\", userResponse);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Change user password\n     */\n    @PutMapping(\"/{id}/password\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN') or @userService.canAccessUser(#id)\")\n    @Operation(summary = \"Change user password\", description = \"Change user password\")\n    public ResponseEntity<ApiResponse<Void>> changePassword(\n            @Parameter(description = \"User ID\") @PathVariable Long id,\n            @RequestBody String newPassword) {\n        \n        logger.info(\"Changing password for user with ID: {}\", id);\n        \n        userService.changePassword(id, newPassword);\n        ApiResponse<Void> response = ApiResponse.success(\"Password changed successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Lock user account\n     */\n    @PutMapping(\"/{id}/lock\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Lock user account\", description = \"Lock user account\")\n    public ResponseEntity<ApiResponse<Void>> lockUser(\n            @Parameter(description = \"User ID\") @PathVariable Long id) {\n        \n        logger.info(\"Locking user account with ID: {}\", id);\n        \n        userService.lockUser(id);\n        ApiResponse<Void> response = ApiResponse.success(\"User account locked successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Unlock user account\n     */\n    @PutMapping(\"/{id}/unlock\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Unlock user account\", description = \"Unlock user account\")\n    public ResponseEntity<ApiResponse<Void>> unlockUser(\n            @Parameter(description = \"User ID\") @PathVariable Long id) {\n        \n        logger.info(\"Unlocking user account with ID: {}\", id);\n        \n        userService.unlockUser(id);\n        ApiResponse<Void> response = ApiResponse.success(\"User account unlocked successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Delete user (soft delete)\n     */\n    @DeleteMapping(\"/{id}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Delete user\", description = \"Soft delete user\")\n    public ResponseEntity<ApiResponse<Void>> deleteUser(\n            @Parameter(description = \"User ID\") @PathVariable Long id) {\n        \n        logger.info(\"Deleting user with ID: {}\", id);\n        \n        userService.deleteUser(id);\n        ApiResponse<Void> response = ApiResponse.success(\"User deleted successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n}\n","path":null,"size_bytes":9632,"size_tokens":null},"src/main/java/com/educationerp/institution_management/service/InstitutionService.java":{"content":"package com.educationerp.institution_management.service;\n\nimport com.educationerp.core.exception.BusinessException;\nimport com.educationerp.core.exception.ResourceNotFoundException;\nimport com.educationerp.institution_management.dto.CreateInstitutionRequest;\nimport com.educationerp.institution_management.dto.InstitutionResponse;\nimport com.educationerp.institution_management.entity.Institution;\nimport com.educationerp.institution_management.repository.InstitutionRepository;\nimport com.educationerp.security.enums.TenantType;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n/**\n * Service class for Institution management operations\n * Handles business logic for institution CRUD operations\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Service\n@Transactional\npublic class InstitutionService {\n\n    private static final Logger logger = LoggerFactory.getLogger(InstitutionService.class);\n\n    @Autowired\n    private InstitutionRepository institutionRepository;\n\n    /**\n     * Create a new institution\n     */\n    public InstitutionResponse createInstitution(CreateInstitutionRequest request) {\n        logger.info(\"Creating new institution with code: {}\", request.getCode());\n\n        // Validate unique constraints\n        if (institutionRepository.existsByCode(request.getCode())) {\n            throw new BusinessException(\"Institution code already exists: \" + request.getCode());\n        }\n\n        if (request.getEmail() != null && institutionRepository.existsByEmail(request.getEmail())) {\n            throw new BusinessException(\"Institution email already exists: \" + request.getEmail());\n        }\n\n        // Create institution entity\n        Institution institution = new Institution();\n        institution.setName(request.getName());\n        institution.setCode(request.getCode());\n        institution.setDescription(request.getDescription());\n        institution.setAddress(request.getAddress());\n        institution.setCity(request.getCity());\n        institution.setState(request.getState());\n        institution.setPostalCode(request.getPostalCode());\n        institution.setCountry(request.getCountry());\n        institution.setPhoneNumber(request.getPhoneNumber());\n        institution.setEmail(request.getEmail());\n        institution.setWebsiteUrl(request.getWebsiteUrl());\n        institution.setTenantType(request.getTenantType());\n        institution.setDatabaseName(request.getDatabaseName());\n        institution.setSchemaName(request.getSchemaName());\n        institution.setConnectionString(request.getConnectionString());\n        institution.setLogoUrl(request.getLogoUrl());\n        institution.setSettingsJson(request.getSettingsJson());\n\n        Institution savedInstitution = institutionRepository.save(institution);\n        logger.info(\"Institution created successfully with ID: {}\", savedInstitution.getId());\n\n        return mapToInstitutionResponse(savedInstitution);\n    }\n\n    /**\n     * Get institution by ID\n     */\n    @Transactional(readOnly = true)\n    public InstitutionResponse getInstitutionById(Long id) {\n        Institution institution = institutionRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"Institution not found with ID: \" + id));\n\n        return mapToInstitutionResponse(institution);\n    }\n\n    /**\n     * Get institution by code\n     */\n    @Transactional(readOnly = true)\n    public InstitutionResponse getInstitutionByCode(String code) {\n        Institution institution = institutionRepository.findByCodeAndIsActiveTrue(code)\n                .orElseThrow(() -> new ResourceNotFoundException(\"Institution not found with code: \" + code));\n\n        return mapToInstitutionResponse(institution);\n    }\n\n    /**\n     * Get all institutions with pagination\n     */\n    @Transactional(readOnly = true)\n    public Page<InstitutionResponse> getAllInstitutions(Pageable pageable) {\n        Page<Institution> institutions = institutionRepository.findAll(pageable);\n        return institutions.map(this::mapToInstitutionResponse);\n    }\n\n    /**\n     * Get institutions by tenant type\n     */\n    @Transactional(readOnly = true)\n    public List<InstitutionResponse> getInstitutionsByTenantType(TenantType tenantType) {\n        List<Institution> institutions = institutionRepository.findByTenantTypeAndIsActiveTrue(tenantType);\n        return institutions.stream()\n                .map(this::mapToInstitutionResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Get institutions by city\n     */\n    @Transactional(readOnly = true)\n    public List<InstitutionResponse> getInstitutionsByCity(String city) {\n        List<Institution> institutions = institutionRepository.findByCityIgnoreCase(city);\n        return institutions.stream()\n                .map(this::mapToInstitutionResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Get institutions by state\n     */\n    @Transactional(readOnly = true)\n    public List<InstitutionResponse> getInstitutionsByState(String state) {\n        List<Institution> institutions = institutionRepository.findByStateIgnoreCase(state);\n        return institutions.stream()\n                .map(this::mapToInstitutionResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Get institutions by country\n     */\n    @Transactional(readOnly = true)\n    public List<InstitutionResponse> getInstitutionsByCountry(String country) {\n        List<Institution> institutions = institutionRepository.findByCountryIgnoreCase(country);\n        return institutions.stream()\n                .map(this::mapToInstitutionResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Search institutions by name\n     */\n    @Transactional(readOnly = true)\n    public List<InstitutionResponse> searchInstitutionsByName(String name) {\n        List<Institution> institutions = institutionRepository.findByNameContainingIgnoreCase(name);\n        return institutions.stream()\n                .map(this::mapToInstitutionResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Update institution\n     */\n    public InstitutionResponse updateInstitution(Long id, CreateInstitutionRequest request) {\n        logger.info(\"Updating institution with ID: {}\", id);\n\n        Institution institution = institutionRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"Institution not found with ID: \" + id));\n\n        // Validate unique constraints for updated values\n        if (!institution.getCode().equals(request.getCode()) && \n            institutionRepository.existsByCodeAndIdNot(request.getCode(), id)) {\n            throw new BusinessException(\"Institution code already exists: \" + request.getCode());\n        }\n\n        if (request.getEmail() != null && !institution.getEmail().equals(request.getEmail()) && \n            institutionRepository.existsByEmailAndIdNot(request.getEmail(), id)) {\n            throw new BusinessException(\"Institution email already exists: \" + request.getEmail());\n        }\n\n        // Update institution fields\n        institution.setName(request.getName());\n        institution.setCode(request.getCode());\n        institution.setDescription(request.getDescription());\n        institution.setAddress(request.getAddress());\n        institution.setCity(request.getCity());\n        institution.setState(request.getState());\n        institution.setPostalCode(request.getPostalCode());\n        institution.setCountry(request.getCountry());\n        institution.setPhoneNumber(request.getPhoneNumber());\n        institution.setEmail(request.getEmail());\n        institution.setWebsiteUrl(request.getWebsiteUrl());\n        institution.setTenantType(request.getTenantType());\n        institution.setDatabaseName(request.getDatabaseName());\n        institution.setSchemaName(request.getSchemaName());\n        institution.setConnectionString(request.getConnectionString());\n        institution.setLogoUrl(request.getLogoUrl());\n        institution.setSettingsJson(request.getSettingsJson());\n\n        Institution updatedInstitution = institutionRepository.save(institution);\n        logger.info(\"Institution updated successfully with ID: {}\", updatedInstitution.getId());\n\n        return mapToInstitutionResponse(updatedInstitution);\n    }\n\n    /**\n     * Soft delete institution\n     */\n    public void deleteInstitution(Long id) {\n        logger.info(\"Deleting institution with ID: {}\", id);\n\n        Institution institution = institutionRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"Institution not found with ID: \" + id));\n\n        institution.softDelete();\n        institutionRepository.save(institution);\n\n        logger.info(\"Institution deleted successfully with ID: {}\", id);\n    }\n\n    /**\n     * Activate institution\n     */\n    public void activateInstitution(Long id) {\n        logger.info(\"Activating institution with ID: {}\", id);\n\n        Institution institution = institutionRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"Institution not found with ID: \" + id));\n\n        institution.setIsActive(true);\n        institutionRepository.save(institution);\n\n        logger.info(\"Institution activated successfully with ID: {}\", id);\n    }\n\n    /**\n     * Deactivate institution\n     */\n    public void deactivateInstitution(Long id) {\n        logger.info(\"Deactivating institution with ID: {}\", id);\n\n        Institution institution = institutionRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"Institution not found with ID: \" + id));\n\n        institution.setIsActive(false);\n        institutionRepository.save(institution);\n\n        logger.info(\"Institution deactivated successfully with ID: {}\", id);\n    }\n\n    /**\n     * Map Institution entity to InstitutionResponse DTO\n     */\n    private InstitutionResponse mapToInstitutionResponse(Institution institution) {\n        return InstitutionResponse.builder()\n                .id(institution.getId())\n                .name(institution.getName())\n                .code(institution.getCode())\n                .description(institution.getDescription())\n                .address(institution.getAddress())\n                .city(institution.getCity())\n                .state(institution.getState())\n                .postalCode(institution.getPostalCode())\n                .country(institution.getCountry())\n                .fullAddress(institution.getFullAddress())\n                .phoneNumber(institution.getPhoneNumber())\n                .email(institution.getEmail())\n                .websiteUrl(institution.getWebsiteUrl())\n                .tenantType(institution.getTenantType())\n                .databaseName(institution.getDatabaseName())\n                .schemaName(institution.getSchemaName())\n                .connectionString(institution.getConnectionString())\n                .isActive(institution.getIsActive())\n                .logoUrl(institution.getLogoUrl())\n                .settingsJson(institution.getSettingsJson())\n                .createdDate(institution.getCreatedDate())\n                .createdBy(institution.getCreatedBy())\n                .updatedDate(institution.getUpdatedDate())\n                .updatedBy(institution.getUpdatedBy())\n                .build();\n    }\n}\n","path":null,"size_bytes":11703,"size_tokens":null},"src/main/java/com/educationerp/notification/repository/NotificationRepository.java":{"content":"package com.educationerp.notification.repository;\n\nimport com.educationerp.notification.entity.Notification;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * Repository for Notification entity\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Repository\npublic interface NotificationRepository extends JpaRepository<Notification, Long> {\n\n    /**\n     * Find notifications by recipient ID\n     */\n    List<Notification> findByRecipientId(Long recipientId);\n\n    /**\n     * Find notifications by recipient ID and status\n     */\n    List<Notification> findByRecipientIdAndStatus(Long recipientId, String status);\n\n    /**\n     * Find unread notifications by recipient ID\n     */\n    List<Notification> findByRecipientIdAndIsReadFalse(Long recipientId);\n\n    /**\n     * Find notifications by type\n     */\n    List<Notification> findByNotificationType(String notificationType);\n\n    /**\n     * Find notifications by date range\n     */\n    @Query(\"SELECT n FROM Notification n WHERE n.createdDate BETWEEN :startDate AND :endDate\")\n    List<Notification> findByDateRange(@Param(\"startDate\") LocalDateTime startDate, \n                                         @Param(\"endDate\") LocalDateTime endDate);\n\n    /**\n     * Find all notifications by recipient ID with pagination\n     */\n    Page<Notification> findByRecipientId(Long recipientId, Pageable pageable);\n\n    /**\n     * Count unread notifications by recipient ID\n     */\n    long countByRecipientIdAndIsReadFalse(Long recipientId);\n\n    /**\n     * Find notification by identifier\n     */\n    Optional<Notification> findByNotificationIdentifier(String notificationIdentifier);\n\n    /**\n     * Find active notifications by recipient ID ordered by created date descending\n     */\n    List<Notification> findByRecipientIdAndIsActiveTrueOrderByCreatedDateDesc(Long recipientId);\n\n    /**\n     * Count unread active notifications by recipient ID\n     */\n    long countByRecipientIdAndIsReadFalseAndIsActiveTrue(Long recipientId);\n}\n\n","path":null,"size_bytes":2340,"size_tokens":null},"src/main/java/com/educationerp/security/tenant/TenantContext.java":{"content":"package com.educationerp.security.tenant;\n\n/**\n * Thread-local tenant context for multi-tenant support\n * Stores current tenant information for the request thread\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class TenantContext {\n\n    private static final ThreadLocal<String> currentTenant = new ThreadLocal<>();\n\n    /**\n     * Set current tenant for the thread\n     */\n    public static void setCurrentTenant(String tenantId) {\n        currentTenant.set(tenantId);\n    }\n\n    /**\n     * Get current tenant for the thread\n     */\n    public static String getCurrentTenant() {\n        return currentTenant.get();\n    }\n\n    /**\n     * Clear tenant context for the thread\n     */\n    public static void clear() {\n        currentTenant.remove();\n    }\n\n    /**\n     * Check if tenant context is set\n     */\n    public static boolean hasTenant() {\n        return currentTenant.get() != null;\n    }\n}\n","path":null,"size_bytes":915,"size_tokens":null},"src/main/java/com/educationerp/student_management/dto/CreateStudentRequest.java":{"content":"package com.educationerp.student_management.dto;\n\nimport com.educationerp.student_management.entity.Student;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * DTO for creating a new student\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class CreateStudentRequest {\n\n    @NotNull(message = \"Institution ID is required\")\n    private Long institutionId;\n\n    private Long branchId;\n\n    @NotBlank(message = \"Student number is required\")\n    @Size(max = 50, message = \"Student number must not exceed 50 characters\")\n    private String studentNumber;\n\n    @NotBlank(message = \"First name is required\")\n    @Size(max = 50, message = \"First name must not exceed 50 characters\")\n    private String firstName;\n\n    @NotBlank(message = \"Last name is required\")\n    @Size(max = 50, message = \"Last name must not exceed 50 characters\")\n    private String lastName;\n\n    @Size(max = 50, message = \"Middle name must not exceed 50 characters\")\n    private String middleName;\n\n    @NotNull(message = \"Date of birth is required\")\n    private LocalDate dateOfBirth;\n\n    private Student.Gender gender;\n\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    private String phoneNumber;\n\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    private String email;\n\n    @NotBlank(message = \"Address is required\")\n    @Size(max = 500, message = \"Address must not exceed 500 characters\")\n    private String address;\n\n    @Size(max = 100, message = \"City must not exceed 100 characters\")\n    private String city;\n\n    @Size(max = 100, message = \"State must not exceed 100 characters\")\n    private String state;\n\n    @Size(max = 20, message = \"Postal code must not exceed 20 characters\")\n    private String postalCode;\n\n    @Size(max = 100, message = \"Country must not exceed 100 characters\")\n    private String country;\n\n    @NotNull(message = \"Enrollment date is required\")\n    private LocalDate enrollmentDate;\n\n    private Student.EnrollmentStatus enrollmentStatus = Student.EnrollmentStatus.ACTIVE;\n\n    @Size(max = 50, message = \"Grade level must not exceed 50 characters\")\n    private String gradeLevel;\n\n    @Size(max = 100, message = \"Program must not exceed 100 characters\")\n    private String program;\n\n    @Size(max = 100, message = \"Major must not exceed 100 characters\")\n    private String major;\n\n    private Double gpa;\n\n    @Size(max = 500, message = \"Profile picture URL must not exceed 500 characters\")\n    private String profilePictureUrl;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    private String notes;\n\n    @Size(max = 100, message = \"Emergency contact name must not exceed 100 characters\")\n    private String emergencyContactName;\n\n    @Size(max = 20, message = \"Emergency contact phone must not exceed 20 characters\")\n    private String emergencyContactPhone;\n\n    @Size(max = 200, message = \"Emergency contact relationship must not exceed 200 characters\")\n    private String emergencyContactRelationship;\n\n    // Constructors\n    public CreateStudentRequest() {\n    }\n\n    public CreateStudentRequest(Long institutionId, Long branchId, String studentNumber, String firstName, \n                               String lastName, String middleName, LocalDate dateOfBirth, Student.Gender gender, \n                               String phoneNumber, String email, String address, String city, String state, \n                               String postalCode, String country, LocalDate enrollmentDate, \n                               Student.EnrollmentStatus enrollmentStatus, String gradeLevel, String program, String major) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.studentNumber = studentNumber;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.middleName = middleName;\n        this.dateOfBirth = dateOfBirth;\n        this.gender = gender;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.enrollmentDate = enrollmentDate;\n        this.enrollmentStatus = enrollmentStatus;\n        this.gradeLevel = gradeLevel;\n        this.program = program;\n        this.major = major;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getStudentNumber() {\n        return studentNumber;\n    }\n\n    public void setStudentNumber(String studentNumber) {\n        this.studentNumber = studentNumber;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getMiddleName() {\n        return middleName;\n    }\n\n    public void setMiddleName(String middleName) {\n        this.middleName = middleName;\n    }\n\n    public LocalDate getDateOfBirth() {\n        return dateOfBirth;\n    }\n\n    public void setDateOfBirth(LocalDate dateOfBirth) {\n        this.dateOfBirth = dateOfBirth;\n    }\n\n    public Student.Gender getGender() {\n        return gender;\n    }\n\n    public void setGender(Student.Gender gender) {\n        this.gender = gender;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public LocalDate getEnrollmentDate() {\n        return enrollmentDate;\n    }\n\n    public void setEnrollmentDate(LocalDate enrollmentDate) {\n        this.enrollmentDate = enrollmentDate;\n    }\n\n    public Student.EnrollmentStatus getEnrollmentStatus() {\n        return enrollmentStatus;\n    }\n\n    public void setEnrollmentStatus(Student.EnrollmentStatus enrollmentStatus) {\n        this.enrollmentStatus = enrollmentStatus;\n    }\n\n    public String getGradeLevel() {\n        return gradeLevel;\n    }\n\n    public void setGradeLevel(String gradeLevel) {\n        this.gradeLevel = gradeLevel;\n    }\n\n    public String getProgram() {\n        return program;\n    }\n\n    public void setProgram(String program) {\n        this.program = program;\n    }\n\n    public String getMajor() {\n        return major;\n    }\n\n    public void setMajor(String major) {\n        this.major = major;\n    }\n\n    public Double getGpa() {\n        return gpa;\n    }\n\n    public void setGpa(Double gpa) {\n        this.gpa = gpa;\n    }\n\n    public String getProfilePictureUrl() {\n        return profilePictureUrl;\n    }\n\n    public void setProfilePictureUrl(String profilePictureUrl) {\n        this.profilePictureUrl = profilePictureUrl;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    public String getEmergencyContactName() {\n        return emergencyContactName;\n    }\n\n    public void setEmergencyContactName(String emergencyContactName) {\n        this.emergencyContactName = emergencyContactName;\n    }\n\n    public String getEmergencyContactPhone() {\n        return emergencyContactPhone;\n    }\n\n    public void setEmergencyContactPhone(String emergencyContactPhone) {\n        this.emergencyContactPhone = emergencyContactPhone;\n    }\n\n    public String getEmergencyContactRelationship() {\n        return emergencyContactRelationship;\n    }\n\n    public void setEmergencyContactRelationship(String emergencyContactRelationship) {\n        this.emergencyContactRelationship = emergencyContactRelationship;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        CreateStudentRequest that = (CreateStudentRequest) o;\n        return Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(branchId, that.branchId) &&\n                Objects.equals(studentNumber, that.studentNumber) &&\n                Objects.equals(firstName, that.firstName) &&\n                Objects.equals(lastName, that.lastName) &&\n                Objects.equals(middleName, that.middleName) &&\n                Objects.equals(dateOfBirth, that.dateOfBirth) &&\n                gender == that.gender &&\n                Objects.equals(phoneNumber, that.phoneNumber) &&\n                Objects.equals(email, that.email) &&\n                Objects.equals(address, that.address) &&\n                Objects.equals(city, that.city) &&\n                Objects.equals(state, that.state) &&\n                Objects.equals(postalCode, that.postalCode) &&\n                Objects.equals(country, that.country) &&\n                Objects.equals(enrollmentDate, that.enrollmentDate) &&\n                enrollmentStatus == that.enrollmentStatus &&\n                Objects.equals(gradeLevel, that.gradeLevel) &&\n                Objects.equals(program, that.program) &&\n                Objects.equals(major, that.major) &&\n                Objects.equals(gpa, that.gpa) &&\n                Objects.equals(profilePictureUrl, that.profilePictureUrl) &&\n                Objects.equals(notes, that.notes) &&\n                Objects.equals(emergencyContactName, that.emergencyContactName) &&\n                Objects.equals(emergencyContactPhone, that.emergencyContactPhone) &&\n                Objects.equals(emergencyContactRelationship, that.emergencyContactRelationship);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(institutionId, branchId, studentNumber, firstName, lastName, middleName, \n                           dateOfBirth, gender, phoneNumber, email, address, city, state, postalCode, \n                           country, enrollmentDate, enrollmentStatus, gradeLevel, program, major, gpa, \n                           profilePictureUrl, notes, emergencyContactName, emergencyContactPhone, \n                           emergencyContactRelationship);\n    }\n\n    @Override\n    public String toString() {\n        return \"CreateStudentRequest{\" +\n                \"institutionId=\" + institutionId +\n                \", branchId=\" + branchId +\n                \", studentNumber='\" + studentNumber + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", enrollmentStatus=\" + enrollmentStatus +\n                '}';\n    }\n}\n","path":null,"size_bytes":11951,"size_tokens":null},"src/main/java/com/educationerp/security/dto/RefreshTokenRequest.java":{"content":"package com.educationerp.security.dto;\n\nimport jakarta.validation.constraints.NotBlank;\n\nimport java.util.Objects;\n\n/**\n * DTO for refresh token request\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class RefreshTokenRequest {\n\n    @NotBlank(message = \"Refresh token is required\")\n    private String refreshToken;\n\n    // Constructors\n    public RefreshTokenRequest() {\n    }\n\n    public RefreshTokenRequest(String refreshToken) {\n        this.refreshToken = refreshToken;\n    }\n\n    // Getters and Setters\n    public String getRefreshToken() {\n        return refreshToken;\n    }\n\n    public void setRefreshToken(String refreshToken) {\n        this.refreshToken = refreshToken;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        RefreshTokenRequest that = (RefreshTokenRequest) o;\n        return Objects.equals(refreshToken, that.refreshToken);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(refreshToken);\n    }\n\n    @Override\n    public String toString() {\n        return \"RefreshTokenRequest{\" +\n                \"refreshToken='\" + refreshToken + '\\'' +\n                '}';\n    }\n}\n","path":null,"size_bytes":1289,"size_tokens":null},"src/main/java/com/educationerp/security/controller/AuthController.java":{"content":"package com.educationerp.security.controller;\n\nimport com.educationerp.core.dto.ApiResponse;\nimport com.educationerp.security.dto.LoginRequest;\nimport com.educationerp.security.dto.LoginResponse;\nimport com.educationerp.security.dto.RefreshTokenRequest;\nimport com.educationerp.security.jwt.JwtUtil;\nimport com.educationerp.security.service.CustomUserDetailsService;\nimport com.educationerp.user_management.service.UserService;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.BadCredentialsException;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.web.bind.annotation.*;\n\n/**\n * Authentication controller for login, logout, and token management\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@RestController\n@RequestMapping(\"/api/auth\")\n@Tag(name = \"Authentication\", description = \"Authentication and authorization endpoints\")\npublic class AuthController {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthController.class);\n\n    @Autowired\n    private AuthenticationManager authenticationManager;\n\n    @Autowired\n    private JwtUtil jwtUtil;\n\n    @Autowired\n    private CustomUserDetailsService userDetailsService;\n\n    @Autowired\n    private UserService userService;\n\n    /**\n     * User login endpoint\n     */\n    @PostMapping(\"/login\")\n    @Operation(summary = \"User login\", description = \"Authenticate user and return JWT tokens\")\n    public ResponseEntity<ApiResponse<LoginResponse>> login(@Valid @RequestBody LoginRequest loginRequest) {\n        logger.info(\"Login attempt for username: {}\", loginRequest.getUsername());\n\n        try {\n            // Authenticate user\n            Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(\n                    loginRequest.getUsername(),\n                    loginRequest.getPassword()\n                )\n            );\n\n            UserDetails userDetails = (UserDetails) authentication.getPrincipal();\n            CustomUserDetailsService.CustomUserPrincipal customUserPrincipal = \n                (CustomUserDetailsService.CustomUserPrincipal) userDetails;\n\n            String tenantId = loginRequest.getTenantId();\n            if (tenantId == null || tenantId.trim().isEmpty()) {\n                tenantId = \"default\"; // Default tenant for now\n            }\n\n            // Generate tokens\n            String accessToken = jwtUtil.generateAccessToken(\n                userDetails, tenantId, customUserPrincipal.getUser().getRole());\n            String refreshToken = jwtUtil.generateRefreshToken(\n                userDetails, tenantId, customUserPrincipal.getUser().getRole());\n\n            // Handle successful login\n            userService.handleSuccessfulLogin(loginRequest.getUsername());\n\n            LoginResponse loginResponse = LoginResponse.builder()\n                    .accessToken(accessToken)\n                    .refreshToken(refreshToken)\n                    .tokenType(\"Bearer\")\n                    .expiresIn(jwtUtil.extractExpiration(accessToken).getTime())\n                    .username(userDetails.getUsername())\n                    .role(customUserPrincipal.getUser().getRole())\n                    .tenantId(tenantId)\n                    .build();\n\n            ApiResponse<LoginResponse> response = ApiResponse.success(\"Login successful\", loginResponse);\n            logger.info(\"Login successful for username: {}\", loginRequest.getUsername());\n\n            return ResponseEntity.ok(response);\n\n        } catch (BadCredentialsException e) {\n            // Handle failed login\n            userService.handleFailedLogin(loginRequest.getUsername());\n            logger.warn(\"Login failed for username: {}\", loginRequest.getUsername());\n            \n            ApiResponse<LoginResponse> response = ApiResponse.error(\"Invalid username or password\");\n            return ResponseEntity.badRequest().body(response);\n        }\n    }\n\n    /**\n     * Refresh token endpoint\n     */\n    @PostMapping(\"/refresh\")\n    @Operation(summary = \"Refresh token\", description = \"Generate new access token using refresh token\")\n    public ResponseEntity<ApiResponse<LoginResponse>> refreshToken(@Valid @RequestBody RefreshTokenRequest refreshRequest) {\n        logger.info(\"Token refresh attempt\");\n\n        try {\n            String refreshToken = refreshRequest.getRefreshToken();\n            \n            // Validate refresh token\n            if (!jwtUtil.isRefreshToken(refreshToken)) {\n                ApiResponse<LoginResponse> response = ApiResponse.error(\"Invalid refresh token\");\n                return ResponseEntity.badRequest().body(response);\n            }\n\n            String username = jwtUtil.extractUsername(refreshToken);\n            String tenantId = jwtUtil.extractTenantId(refreshToken);\n\n            UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n\n            // Generate new access token\n            String newAccessToken = jwtUtil.generateAccessToken(userDetails, tenantId, jwtUtil.extractRole(refreshToken));\n\n            LoginResponse loginResponse = LoginResponse.builder()\n                    .accessToken(newAccessToken)\n                    .refreshToken(refreshToken) // Keep the same refresh token\n                    .tokenType(\"Bearer\")\n                    .expiresIn(jwtUtil.extractExpiration(newAccessToken).getTime())\n                    .username(username)\n                    .role(jwtUtil.extractRole(refreshToken))\n                    .tenantId(tenantId)\n                    .build();\n\n            ApiResponse<LoginResponse> response = ApiResponse.success(\"Token refreshed successfully\", loginResponse);\n            logger.info(\"Token refreshed successfully for username: {}\", username);\n\n            return ResponseEntity.ok(response);\n\n        } catch (Exception e) {\n            logger.error(\"Token refresh failed\", e);\n            ApiResponse<LoginResponse> response = ApiResponse.error(\"Token refresh failed\");\n            return ResponseEntity.badRequest().body(response);\n        }\n    }\n\n    /**\n     * Logout endpoint\n     */\n    @PostMapping(\"/logout\")\n    @Operation(summary = \"User logout\", description = \"Logout user and invalidate tokens\")\n    public ResponseEntity<ApiResponse<Void>> logout(@RequestHeader(\"Authorization\") String authHeader) {\n        logger.info(\"Logout request\");\n\n        try {\n            String token = authHeader.substring(7); // Remove \"Bearer \" prefix\n            String username = jwtUtil.extractUsername(token);\n            \n            // In a real implementation, you would add the token to a blacklist\n            // For now, we'll just log the logout\n            logger.info(\"User logged out: {}\", username);\n\n            ApiResponse<Void> response = ApiResponse.success(\"Logout successful\", null);\n            return ResponseEntity.ok(response);\n\n        } catch (Exception e) {\n            logger.error(\"Logout failed\", e);\n            ApiResponse<Void> response = ApiResponse.error(\"Logout failed\");\n            return ResponseEntity.badRequest().body(response);\n        }\n    }\n\n    /**\n     * Validate token endpoint\n     */\n    @PostMapping(\"/validate\")\n    @Operation(summary = \"Validate token\", description = \"Validate JWT token\")\n    public ResponseEntity<ApiResponse<Boolean>> validateToken(@RequestHeader(\"Authorization\") String authHeader) {\n        try {\n            String token = authHeader.substring(7); // Remove \"Bearer \" prefix\n            \n            // Check if token is expired\n            boolean isValid = !jwtUtil.isTokenExpired(token);\n            \n            ApiResponse<Boolean> response = ApiResponse.success(\"Token validation completed\", isValid);\n            return ResponseEntity.ok(response);\n\n        } catch (Exception e) {\n            logger.error(\"Token validation failed\", e);\n            ApiResponse<Boolean> response = ApiResponse.success(\"Token validation completed\", false);\n            return ResponseEntity.ok(response);\n        }\n    }\n}\n","path":null,"size_bytes":8518,"size_tokens":null},"src/main/java/com/educationerp/institution_management/dto/CreateInstitutionRequest.java":{"content":"package com.educationerp.institution_management.dto;\n\nimport com.educationerp.security.enums.TenantType;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Objects;\n\n/**\n * DTO for creating a new institution\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class CreateInstitutionRequest {\n\n    @NotBlank(message = \"Institution name is required\")\n    @Size(max = 200, message = \"Institution name must not exceed 200 characters\")\n    private String name;\n\n    @NotBlank(message = \"Institution code is required\")\n    @Size(max = 20, message = \"Institution code must not exceed 20 characters\")\n    private String code;\n\n    @Size(max = 500, message = \"Description must not exceed 500 characters\")\n    private String description;\n\n    @NotBlank(message = \"Address is required\")\n    @Size(max = 500, message = \"Address must not exceed 500 characters\")\n    private String address;\n\n    @Size(max = 100, message = \"City must not exceed 100 characters\")\n    private String city;\n\n    @Size(max = 100, message = \"State must not exceed 100 characters\")\n    private String state;\n\n    @Size(max = 20, message = \"Postal code must not exceed 20 characters\")\n    private String postalCode;\n\n    @Size(max = 100, message = \"Country must not exceed 100 characters\")\n    private String country;\n\n    @NotBlank(message = \"Phone number is required\")\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    private String phoneNumber;\n\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    private String email;\n\n    @Size(max = 200, message = \"Website URL must not exceed 200 characters\")\n    private String websiteUrl;\n\n    @NotNull(message = \"Tenant type is required\")\n    private TenantType tenantType;\n\n    @Size(max = 100, message = \"Database name must not exceed 100 characters\")\n    private String databaseName;\n\n    @Size(max = 100, message = \"Schema name must not exceed 100 characters\")\n    private String schemaName;\n\n    @Size(max = 500, message = \"Connection string must not exceed 500 characters\")\n    private String connectionString;\n\n    @Size(max = 500, message = \"Logo URL must not exceed 500 characters\")\n    private String logoUrl;\n\n    @Size(max = 1000, message = \"Settings JSON must not exceed 1000 characters\")\n    private String settingsJson;\n\n    // Constructors\n    public CreateInstitutionRequest() {\n    }\n\n    public CreateInstitutionRequest(String name, String code, String description, String address, \n                                  String city, String state, String postalCode, String country, \n                                  String phoneNumber, String email, String websiteUrl, TenantType tenantType) {\n        this.name = name;\n        this.code = code;\n        this.description = description;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.websiteUrl = websiteUrl;\n        this.tenantType = tenantType;\n    }\n\n    // Getters and Setters\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getWebsiteUrl() {\n        return websiteUrl;\n    }\n\n    public void setWebsiteUrl(String websiteUrl) {\n        this.websiteUrl = websiteUrl;\n    }\n\n    public TenantType getTenantType() {\n        return tenantType;\n    }\n\n    public void setTenantType(TenantType tenantType) {\n        this.tenantType = tenantType;\n    }\n\n    public String getDatabaseName() {\n        return databaseName;\n    }\n\n    public void setDatabaseName(String databaseName) {\n        this.databaseName = databaseName;\n    }\n\n    public String getSchemaName() {\n        return schemaName;\n    }\n\n    public void setSchemaName(String schemaName) {\n        this.schemaName = schemaName;\n    }\n\n    public String getConnectionString() {\n        return connectionString;\n    }\n\n    public void setConnectionString(String connectionString) {\n        this.connectionString = connectionString;\n    }\n\n    public String getLogoUrl() {\n        return logoUrl;\n    }\n\n    public void setLogoUrl(String logoUrl) {\n        this.logoUrl = logoUrl;\n    }\n\n    public String getSettingsJson() {\n        return settingsJson;\n    }\n\n    public void setSettingsJson(String settingsJson) {\n        this.settingsJson = settingsJson;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        CreateInstitutionRequest that = (CreateInstitutionRequest) o;\n        return Objects.equals(name, that.name) &&\n                Objects.equals(code, that.code) &&\n                Objects.equals(description, that.description) &&\n                Objects.equals(address, that.address) &&\n                Objects.equals(city, that.city) &&\n                Objects.equals(state, that.state) &&\n                Objects.equals(postalCode, that.postalCode) &&\n                Objects.equals(country, that.country) &&\n                Objects.equals(phoneNumber, that.phoneNumber) &&\n                Objects.equals(email, that.email) &&\n                Objects.equals(websiteUrl, that.websiteUrl) &&\n                tenantType == that.tenantType &&\n                Objects.equals(databaseName, that.databaseName) &&\n                Objects.equals(schemaName, that.schemaName) &&\n                Objects.equals(connectionString, that.connectionString) &&\n                Objects.equals(logoUrl, that.logoUrl) &&\n                Objects.equals(settingsJson, that.settingsJson);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(name, code, description, address, city, state, postalCode, country, \n                           phoneNumber, email, websiteUrl, tenantType, databaseName, schemaName, \n                           connectionString, logoUrl, settingsJson);\n    }\n\n    @Override\n    public String toString() {\n        return \"CreateInstitutionRequest{\" +\n                \"name='\" + name + '\\'' +\n                \", code='\" + code + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", tenantType=\" + tenantType +\n                '}';\n    }\n}\n","path":null,"size_bytes":7868,"size_tokens":null},"src/main/java/com/educationerp/security/service/CustomUserDetailsService.java":{"content":"package com.educationerp.security.service;\n\nimport com.educationerp.user_management.entity.User;\nimport com.educationerp.user_management.repository.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Collection;\nimport java.util.Collections;\n\n/**\n * Custom UserDetailsService implementation\n * Loads user details for authentication\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsernameAndIsActiveTrue(username)\n                .orElseThrow(() -> new UsernameNotFoundException(\"User not found: \" + username));\n\n        return new CustomUserPrincipal(user);\n    }\n\n    /**\n     * Custom UserPrincipal implementation\n     */\n    public static class CustomUserPrincipal implements UserDetails {\n        \n        private final User user;\n\n        public CustomUserPrincipal(User user) {\n            this.user = user;\n        }\n\n        @Override\n        public Collection<? extends GrantedAuthority> getAuthorities() {\n            return Collections.singletonList(\n                new SimpleGrantedAuthority(\"ROLE_\" + user.getRole().name())\n            );\n        }\n\n        @Override\n        public String getPassword() {\n            return user.getPassword();\n        }\n\n        @Override\n        public String getUsername() {\n            return user.getUsername();\n        }\n\n        @Override\n        public boolean isAccountNonExpired() {\n            return true;\n        }\n\n        @Override\n        public boolean isAccountNonLocked() {\n            return !user.getIsLocked();\n        }\n\n        @Override\n        public boolean isCredentialsNonExpired() {\n            return true;\n        }\n\n        @Override\n        public boolean isEnabled() {\n            return user.getIsActive();\n        }\n\n        public User getUser() {\n            return user;\n        }\n    }\n}\n","path":null,"size_bytes":2519,"size_tokens":null},"src/main/java/com/educationerp/inventory/entity/EducationalProduct.java":{"content":"package com.educationerp.inventory.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.math.BigDecimal;\nimport java.util.Objects;\n\n/**\n * Educational Product entity for the Education ERP System\n * Represents books and educational resources\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"educational_products\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"isbn\"}),\n           @UniqueConstraint(columnNames = {\"institution_id\", \"product_code\"})\n       })\npublic class EducationalProduct extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotBlank(message = \"Product code is required\")\n    @Size(max = 50, message = \"Product code must not exceed 50 characters\")\n    @Column(name = \"product_code\", nullable = false, length = 50)\n    private String productCode;\n\n    @NotBlank(message = \"Product name is required\")\n    @Size(max = 200, message = \"Product name must not exceed 200 characters\")\n    @Column(name = \"product_name\", nullable = false, length = 200)\n    private String productName;\n\n    @Size(max = 20, message = \"ISBN must not exceed 20 characters\")\n    @Column(name = \"isbn\", length = 20)\n    private String isbn;\n\n    @Size(max = 100, message = \"Publisher must not exceed 100 characters\")\n    @Column(name = \"publisher\", length = 100)\n    private String publisher;\n\n    @Size(max = 100, message = \"Author must not exceed 100 characters\")\n    @Column(name = \"author\", length = 100)\n    private String author;\n\n    @Size(max = 50, message = \"Grade level must not exceed 50 characters\")\n    @Column(name = \"grade_level\", length = 50)\n    private String gradeLevel;\n\n    @Size(max = 100, message = \"Subject must not exceed 100 characters\")\n    @Column(name = \"subject\", length = 100)\n    private String subject;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"product_type\", nullable = false)\n    private ProductType productType = ProductType.BOOK;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"category\", nullable = false)\n    private ProductCategory category = ProductCategory.TEXTBOOK;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Column(name = \"purchase_price\", precision = 10, scale = 2)\n    private BigDecimal purchasePrice;\n\n    @Column(name = \"selling_price\", precision = 10, scale = 2)\n    private BigDecimal sellingPrice;\n\n    @Column(name = \"rental_price\", precision = 10, scale = 2)\n    private BigDecimal rentalPrice;\n\n    @Column(name = \"current_stock\", nullable = false)\n    private Integer currentStock = 0;\n\n    @Column(name = \"minimum_stock\", nullable = false)\n    private Integer minimumStock = 0;\n\n    @Column(name = \"maximum_stock\")\n    private Integer maximumStock;\n\n    @Column(name = \"reorder_point\", nullable = false)\n    private Integer reorderPoint = 0;\n\n    @Column(name = \"reorder_quantity\")\n    private Integer reorderQuantity;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private ProductStatus status = ProductStatus.ACTIVE;\n\n    @Column(name = \"is_rental_available\", nullable = false)\n    private Boolean isRentalAvailable = false;\n\n    @Column(name = \"is_mandatory\", nullable = false)\n    private Boolean isMandatory = false;\n\n    @Column(name = \"edition\")\n    private String edition;\n\n    @Column(name = \"publication_year\")\n    private Integer publicationYear;\n\n    @Size(max = 100, message = \"Language must not exceed 100 characters\")\n    @Column(name = \"language\", length = 100)\n    private String language;\n\n    @Size(max = 500, message = \"Image URL must not exceed 500 characters\")\n    @Column(name = \"image_url\", length = 500)\n    private String imageUrl;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public EducationalProduct() {\n    }\n\n    public EducationalProduct(Long institutionId, Long branchId, String productCode, String productName, \n                             String isbn, String publisher, String author, String gradeLevel, String subject, \n                             ProductType productType, ProductCategory category, String description, \n                             BigDecimal purchasePrice, BigDecimal sellingPrice, BigDecimal rentalPrice, \n                             Integer currentStock, Integer minimumStock, Integer maximumStock, \n                             Integer reorderPoint, Integer reorderQuantity, ProductStatus status, \n                             Boolean isRentalAvailable, Boolean isMandatory) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.productCode = productCode;\n        this.productName = productName;\n        this.isbn = isbn;\n        this.publisher = publisher;\n        this.author = author;\n        this.gradeLevel = gradeLevel;\n        this.subject = subject;\n        this.productType = productType;\n        this.category = category;\n        this.description = description;\n        this.purchasePrice = purchasePrice;\n        this.sellingPrice = sellingPrice;\n        this.rentalPrice = rentalPrice;\n        this.currentStock = currentStock;\n        this.minimumStock = minimumStock;\n        this.maximumStock = maximumStock;\n        this.reorderPoint = reorderPoint;\n        this.reorderQuantity = reorderQuantity;\n        this.status = status;\n        this.isRentalAvailable = isRentalAvailable;\n        this.isMandatory = isMandatory;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getProductCode() {\n        return productCode;\n    }\n\n    public void setProductCode(String productCode) {\n        this.productCode = productCode;\n    }\n\n    public String getProductName() {\n        return productName;\n    }\n\n    public void setProductName(String productName) {\n        this.productName = productName;\n    }\n\n    public String getIsbn() {\n        return isbn;\n    }\n\n    public void setIsbn(String isbn) {\n        this.isbn = isbn;\n    }\n\n    public String getPublisher() {\n        return publisher;\n    }\n\n    public void setPublisher(String publisher) {\n        this.publisher = publisher;\n    }\n\n    public String getAuthor() {\n        return author;\n    }\n\n    public void setAuthor(String author) {\n        this.author = author;\n    }\n\n    public String getGradeLevel() {\n        return gradeLevel;\n    }\n\n    public void setGradeLevel(String gradeLevel) {\n        this.gradeLevel = gradeLevel;\n    }\n\n    public String getSubject() {\n        return subject;\n    }\n\n    public void setSubject(String subject) {\n        this.subject = subject;\n    }\n\n    public ProductType getProductType() {\n        return productType;\n    }\n\n    public void setProductType(ProductType productType) {\n        this.productType = productType;\n    }\n\n    public ProductCategory getCategory() {\n        return category;\n    }\n\n    public void setCategory(ProductCategory category) {\n        this.category = category;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public BigDecimal getPurchasePrice() {\n        return purchasePrice;\n    }\n\n    public void setPurchasePrice(BigDecimal purchasePrice) {\n        this.purchasePrice = purchasePrice;\n    }\n\n    public BigDecimal getSellingPrice() {\n        return sellingPrice;\n    }\n\n    public void setSellingPrice(BigDecimal sellingPrice) {\n        this.sellingPrice = sellingPrice;\n    }\n\n    public BigDecimal getRentalPrice() {\n        return rentalPrice;\n    }\n\n    public void setRentalPrice(BigDecimal rentalPrice) {\n        this.rentalPrice = rentalPrice;\n    }\n\n    public Integer getCurrentStock() {\n        return currentStock;\n    }\n\n    public void setCurrentStock(Integer currentStock) {\n        this.currentStock = currentStock;\n    }\n\n    public Integer getMinimumStock() {\n        return minimumStock;\n    }\n\n    public void setMinimumStock(Integer minimumStock) {\n        this.minimumStock = minimumStock;\n    }\n\n    public Integer getMaximumStock() {\n        return maximumStock;\n    }\n\n    public void setMaximumStock(Integer maximumStock) {\n        this.maximumStock = maximumStock;\n    }\n\n    public Integer getReorderPoint() {\n        return reorderPoint;\n    }\n\n    public void setReorderPoint(Integer reorderPoint) {\n        this.reorderPoint = reorderPoint;\n    }\n\n    public Integer getReorderQuantity() {\n        return reorderQuantity;\n    }\n\n    public void setReorderQuantity(Integer reorderQuantity) {\n        this.reorderQuantity = reorderQuantity;\n    }\n\n    public ProductStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(ProductStatus status) {\n        this.status = status;\n    }\n\n    public Boolean getIsRentalAvailable() {\n        return isRentalAvailable;\n    }\n\n    public void setIsRentalAvailable(Boolean isRentalAvailable) {\n        this.isRentalAvailable = isRentalAvailable;\n    }\n\n    public Boolean getIsMandatory() {\n        return isMandatory;\n    }\n\n    public void setIsMandatory(Boolean isMandatory) {\n        this.isMandatory = isMandatory;\n    }\n\n    public String getEdition() {\n        return edition;\n    }\n\n    public void setEdition(String edition) {\n        this.edition = edition;\n    }\n\n    public Integer getPublicationYear() {\n        return publicationYear;\n    }\n\n    public void setPublicationYear(Integer publicationYear) {\n        this.publicationYear = publicationYear;\n    }\n\n    public String getLanguage() {\n        return language;\n    }\n\n    public void setLanguage(String language) {\n        this.language = language;\n    }\n\n    public String getImageUrl() {\n        return imageUrl;\n    }\n\n    public void setImageUrl(String imageUrl) {\n        this.imageUrl = imageUrl;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isActive() {\n        return status == ProductStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isInStock() {\n        return currentStock != null && currentStock > 0;\n    }\n\n    public boolean isLowStock() {\n        return currentStock != null && minimumStock != null && currentStock <= minimumStock;\n    }\n\n    public boolean needsReorder() {\n        return currentStock != null && reorderPoint != null && currentStock <= reorderPoint;\n    }\n\n    public boolean isOverstocked() {\n        return maximumStock != null && currentStock != null && currentStock > maximumStock;\n    }\n\n    public void addStock(Integer quantity) {\n        if (currentStock == null) {\n            currentStock = 0;\n        }\n        currentStock += quantity;\n    }\n\n    public void removeStock(Integer quantity) {\n        if (currentStock == null) {\n            currentStock = 0;\n        }\n        currentStock = Math.max(0, currentStock - quantity);\n    }\n\n    public void activate() {\n        this.status = ProductStatus.ACTIVE;\n    }\n\n    public void deactivate() {\n        this.status = ProductStatus.INACTIVE;\n    }\n\n    public void discontinue() {\n        this.status = ProductStatus.DISCONTINUED;\n    }\n\n    // Enums\n    public enum ProductType {\n        BOOK, WORKBOOK, REFERENCE, DICTIONARY, ATLAS, SOFTWARE, HARDWARE, EQUIPMENT, SUPPLIES, OTHER\n    }\n\n    public enum ProductCategory {\n        TEXTBOOK, REFERENCE_BOOK, WORKBOOK, DICTIONARY, ATLAS, SOFTWARE, HARDWARE, EQUIPMENT, SUPPLIES, \n        MOCK_EXAM, PRACTICE_TEST, STUDY_GUIDE, LITERATURE, SCIENCE_KIT, MATH_TOOLS, OTHER\n    }\n\n    public enum ProductStatus {\n        ACTIVE, INACTIVE, DISCONTINUED, OUT_OF_STOCK\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        EducationalProduct that = (EducationalProduct) o;\n        return Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(productCode, that.productCode) &&\n                Objects.equals(isbn, that.isbn);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, productCode, isbn);\n    }\n\n    @Override\n    public String toString() {\n        return \"EducationalProduct{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", productCode='\" + productCode + '\\'' +\n                \", productName='\" + productName + '\\'' +\n                \", isbn='\" + isbn + '\\'' +\n                \", status=\" + status +\n                \", currentStock=\" + currentStock +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":13530,"size_tokens":null},"src/main/java/com/educationerp/student_management/repository/StudentRepository.java":{"content":"package com.educationerp.student_management.repository;\n\nimport com.educationerp.student_management.entity.Student;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDate;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * Repository interface for Student entity\n * Provides data access methods for student management\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Repository\npublic interface StudentRepository extends JpaRepository<Student, Long> {\n\n    /**\n     * Find student by student number and active status\n     */\n    Optional<Student> findByStudentNumberAndIsActiveTrue(String studentNumber);\n\n    /**\n     * Find student by email and active status\n     */\n    Optional<Student> findByEmailAndIsActiveTrue(String email);\n\n    /**\n     * Find students by institution ID\n     */\n    List<Student> findByInstitutionIdAndIsActiveTrue(Long institutionId);\n\n    /**\n     * Find students by institution ID with pagination\n     */\n    Page<Student> findByInstitutionIdAndIsActiveTrue(Long institutionId, Pageable pageable);\n\n    /**\n     * Find students by branch ID\n     */\n    List<Student> findByBranchIdAndIsActiveTrue(Long branchId);\n\n    /**\n     * Find students by branch ID with pagination\n     */\n    Page<Student> findByBranchIdAndIsActiveTrue(Long branchId, Pageable pageable);\n\n    /**\n     * Find students by enrollment status\n     */\n    List<Student> findByEnrollmentStatusAndIsActiveTrue(Student.EnrollmentStatus enrollmentStatus);\n\n    /**\n     * Find students by enrollment status with pagination\n     */\n    Page<Student> findByEnrollmentStatusAndIsActiveTrue(Student.EnrollmentStatus enrollmentStatus, Pageable pageable);\n\n    /**\n     * Find students by grade level\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.gradeLevel = :gradeLevel AND s.isActive = true\")\n    List<Student> findByGradeLevel(@Param(\"gradeLevel\") String gradeLevel);\n\n    /**\n     * Find students by program\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.program = :program AND s.isActive = true\")\n    List<Student> findByProgram(@Param(\"program\") String program);\n\n    /**\n     * Find students by major\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.major = :major AND s.isActive = true\")\n    List<Student> findByMajor(@Param(\"major\") String major);\n\n    /**\n     * Find students by gender\n     */\n    List<Student> findByGenderAndIsActiveTrue(Student.Gender gender);\n\n    /**\n     * Find students by city\n     */\n    @Query(\"SELECT s FROM Student s WHERE LOWER(s.city) = LOWER(:city) AND s.isActive = true\")\n    List<Student> findByCityIgnoreCase(@Param(\"city\") String city);\n\n    /**\n     * Find students by state\n     */\n    @Query(\"SELECT s FROM Student s WHERE LOWER(s.state) = LOWER(:state) AND s.isActive = true\")\n    List<Student> findByStateIgnoreCase(@Param(\"state\") String state);\n\n    /**\n     * Find students by country\n     */\n    @Query(\"SELECT s FROM Student s WHERE LOWER(s.country) = LOWER(:country) AND s.isActive = true\")\n    List<Student> findByCountryIgnoreCase(@Param(\"country\") String country);\n\n    /**\n     * Find students by name pattern\n     */\n    @Query(\"SELECT s FROM Student s WHERE (LOWER(s.firstName) LIKE LOWER(CONCAT('%', :name, '%')) \" +\n           \"OR LOWER(s.lastName) LIKE LOWER(CONCAT('%', :name, '%'))) AND s.isActive = true\")\n    List<Student> findByNameContainingIgnoreCase(@Param(\"name\") String name);\n\n    /**\n     * Find students by name pattern with pagination\n     */\n    @Query(\"SELECT s FROM Student s WHERE (LOWER(s.firstName) LIKE LOWER(CONCAT('%', :name, '%')) \" +\n           \"OR LOWER(s.lastName) LIKE LOWER(CONCAT('%', :name, '%'))) AND s.isActive = true\")\n    Page<Student> findByNameContainingIgnoreCase(@Param(\"name\") String name, Pageable pageable);\n\n    /**\n     * Find students by enrollment date range\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.enrollmentDate BETWEEN :startDate AND :endDate AND s.isActive = true\")\n    List<Student> findByEnrollmentDateBetween(@Param(\"startDate\") LocalDate startDate, \n                                             @Param(\"endDate\") LocalDate endDate);\n\n    /**\n     * Find students by date of birth range\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.dateOfBirth BETWEEN :startDate AND :endDate AND s.isActive = true\")\n    List<Student> findByDateOfBirthBetween(@Param(\"startDate\") LocalDate startDate, \n                                          @Param(\"endDate\") LocalDate endDate);\n\n    /**\n     * Find students with GPA above threshold\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.gpa >= :gpa AND s.isActive = true\")\n    List<Student> findByGpaGreaterThanEqual(@Param(\"gpa\") Double gpa);\n\n    /**\n     * Find students with GPA below threshold\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.gpa < :gpa AND s.isActive = true\")\n    List<Student> findByGpaLessThan(@Param(\"gpa\") Double gpa);\n\n    /**\n     * Find students by institution and enrollment status\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.institutionId = :institutionId AND s.enrollmentStatus = :status AND s.isActive = true\")\n    List<Student> findByInstitutionIdAndEnrollmentStatus(@Param(\"institutionId\") Long institutionId, \n                                                        @Param(\"status\") Student.EnrollmentStatus status);\n\n    /**\n     * Find students by institution and grade level\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.institutionId = :institutionId AND s.gradeLevel = :gradeLevel AND s.isActive = true\")\n    List<Student> findByInstitutionIdAndGradeLevel(@Param(\"institutionId\") Long institutionId, \n                                                  @Param(\"gradeLevel\") String gradeLevel);\n\n    /**\n     * Find students by institution and program\n     */\n    @Query(\"SELECT s FROM Student s WHERE s.institutionId = :institutionId AND s.program = :program AND s.isActive = true\")\n    List<Student> findByInstitutionIdAndProgram(@Param(\"institutionId\") Long institutionId, \n                                               @Param(\"program\") String program);\n\n    /**\n     * Check if student number exists within institution\n     */\n    @Query(\"SELECT COUNT(s) > 0 FROM Student s WHERE s.institutionId = :institutionId AND s.studentNumber = :studentNumber\")\n    boolean existsByInstitutionIdAndStudentNumber(@Param(\"institutionId\") Long institutionId, \n                                                 @Param(\"studentNumber\") String studentNumber);\n\n    /**\n     * Check if student number exists within institution excluding specific student ID\n     */\n    @Query(\"SELECT COUNT(s) > 0 FROM Student s WHERE s.institutionId = :institutionId AND s.studentNumber = :studentNumber AND s.id != :studentId\")\n    boolean existsByInstitutionIdAndStudentNumberAndIdNot(@Param(\"institutionId\") Long institutionId, \n                                                         @Param(\"studentNumber\") String studentNumber, \n                                                         @Param(\"studentId\") Long studentId);\n\n    /**\n     * Check if email exists\n     */\n    boolean existsByEmail(String email);\n\n    /**\n     * Check if email exists excluding specific student ID\n     */\n    @Query(\"SELECT COUNT(s) > 0 FROM Student s WHERE s.email = :email AND s.id != :studentId\")\n    boolean existsByEmailAndIdNot(@Param(\"email\") String email, @Param(\"studentId\") Long studentId);\n\n    /**\n     * Count students by institution\n     */\n    long countByInstitutionIdAndIsActiveTrue(Long institutionId);\n\n    /**\n     * Count students by branch\n     */\n    long countByBranchIdAndIsActiveTrue(Long branchId);\n\n    /**\n     * Count students by enrollment status\n     */\n    long countByEnrollmentStatusAndIsActiveTrue(Student.EnrollmentStatus enrollmentStatus);\n\n    /**\n     * Count students by grade level\n     */\n    @Query(\"SELECT COUNT(s) FROM Student s WHERE s.gradeLevel = :gradeLevel AND s.isActive = true\")\n    long countByGradeLevel(@Param(\"gradeLevel\") String gradeLevel);\n\n    /**\n     * Count students by program\n     */\n    @Query(\"SELECT COUNT(s) FROM Student s WHERE s.program = :program AND s.isActive = true\")\n    long countByProgram(@Param(\"program\") String program);\n\n    /**\n     * Count students by major\n     */\n    @Query(\"SELECT COUNT(s) FROM Student s WHERE s.major = :major AND s.isActive = true\")\n    long countByMajor(@Param(\"major\") String major);\n\n    /**\n     * Count students by gender\n     */\n    long countByGenderAndIsActiveTrue(Student.Gender gender);\n\n    /**\n     * Count students by city\n     */\n    @Query(\"SELECT COUNT(s) FROM Student s WHERE LOWER(s.city) = LOWER(:city) AND s.isActive = true\")\n    long countByCityIgnoreCase(@Param(\"city\") String city);\n\n    /**\n     * Count students by state\n     */\n    @Query(\"SELECT COUNT(s) FROM Student s WHERE LOWER(s.state) = LOWER(:state) AND s.isActive = true\")\n    long countByStateIgnoreCase(@Param(\"state\") String state);\n\n    /**\n     * Count students by country\n     */\n    @Query(\"SELECT COUNT(s) FROM Student s WHERE LOWER(s.country) = LOWER(:country) AND s.isActive = true\")\n    long countByCountryIgnoreCase(@Param(\"country\") String country);\n}\n","path":null,"size_bytes":9357,"size_tokens":null},"src/main/java/com/educationerp/security/enums/Role.java":{"content":"package com.educationerp.security.enums;\n\n/**\n * User roles in the Education ERP System\n * Defines the access levels and permissions for different user types\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic enum Role {\n    SUPER_ADMIN(\"Super Administrator\", \"Full system access\"),\n    INSTITUTION_ADMIN(\"Institution Administrator\", \"Institution-level management\"),\n    BRANCH_MANAGER(\"Branch Manager\", \"Branch-level management\"),\n    COURSE_MANAGER(\"Course Manager\", \"Course and curriculum management\"),\n    ACCOUNTANT(\"Accountant\", \"Financial operations and reporting\"),\n    REPORT_VIEWER(\"Report Viewer\", \"Report access only\"),\n    TEACHER(\"Teacher\", \"Teaching and student evaluation\"),\n    STUDENT(\"Student\", \"Student portal access\"),\n    PARENT(\"Parent\", \"Parent portal access\");\n\n    private final String displayName;\n    private final String description;\n\n    Role(String displayName, String description) {\n        this.displayName = displayName;\n        this.description = description;\n    }\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    /**\n     * Check if this role has read-only access\n     */\n    public boolean isReadOnly() {\n        return this == REPORT_VIEWER || this == PARENT;\n    }\n\n    @Override\n    public String toString() {\n        return name();\n    }\n}\n\n","path":null,"size_bytes":1395,"size_tokens":null},"src/main/java/com/educationerp/user_management/dto/UserResponse.java":{"content":"package com.educationerp.user_management.dto;\n\nimport com.educationerp.security.enums.Role;\nimport com.fasterxml.jackson.annotation.JsonFormat;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * DTO for user response data\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class UserResponse {\n\n    private Long id;\n    private String username;\n    private String email;\n    private String firstName;\n    private String lastName;\n    private String fullName;\n    private String phoneNumber;\n    private Role role;\n    private Boolean isLocked;\n    private Boolean isActive;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime lastLoginDate;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime passwordChangedDate;\n    \n    private Boolean mustChangePassword;\n    private String profilePictureUrl;\n    private Long institutionId;\n    private Long branchId;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime createdDate;\n    \n    private String createdBy;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime updatedDate;\n    \n    private String updatedBy;\n\n    // Constructors\n    public UserResponse() {\n    }\n\n    public UserResponse(Long id, String username, String email, String firstName, String lastName, \n                       String fullName, String phoneNumber, Role role, Boolean isLocked, \n                       Boolean isActive, LocalDateTime lastLoginDate, LocalDateTime passwordChangedDate, \n                       Boolean mustChangePassword, String profilePictureUrl, Long institutionId, \n                       Long branchId, LocalDateTime createdDate, String createdBy, \n                       LocalDateTime updatedDate, String updatedBy) {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.fullName = fullName;\n        this.phoneNumber = phoneNumber;\n        this.role = role;\n        this.isLocked = isLocked;\n        this.isActive = isActive;\n        this.lastLoginDate = lastLoginDate;\n        this.passwordChangedDate = passwordChangedDate;\n        this.mustChangePassword = mustChangePassword;\n        this.profilePictureUrl = profilePictureUrl;\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.createdDate = createdDate;\n        this.createdBy = createdBy;\n        this.updatedDate = updatedDate;\n        this.updatedBy = updatedBy;\n    }\n\n    // Builder pattern\n    public static Builder builder() {\n        return new Builder();\n    }\n\n    public static class Builder {\n        private Long id;\n        private String username;\n        private String email;\n        private String firstName;\n        private String lastName;\n        private String fullName;\n        private String phoneNumber;\n        private Role role;\n        private Boolean isLocked;\n        private Boolean isActive;\n        private LocalDateTime lastLoginDate;\n        private LocalDateTime passwordChangedDate;\n        private Boolean mustChangePassword;\n        private String profilePictureUrl;\n        private Long institutionId;\n        private Long branchId;\n        private LocalDateTime createdDate;\n        private String createdBy;\n        private LocalDateTime updatedDate;\n        private String updatedBy;\n\n        public Builder id(Long id) {\n            this.id = id;\n            return this;\n        }\n\n        public Builder username(String username) {\n            this.username = username;\n            return this;\n        }\n\n        public Builder email(String email) {\n            this.email = email;\n            return this;\n        }\n\n        public Builder firstName(String firstName) {\n            this.firstName = firstName;\n            return this;\n        }\n\n        public Builder lastName(String lastName) {\n            this.lastName = lastName;\n            return this;\n        }\n\n        public Builder fullName(String fullName) {\n            this.fullName = fullName;\n            return this;\n        }\n\n        public Builder phoneNumber(String phoneNumber) {\n            this.phoneNumber = phoneNumber;\n            return this;\n        }\n\n        public Builder role(Role role) {\n            this.role = role;\n            return this;\n        }\n\n        public Builder isLocked(Boolean isLocked) {\n            this.isLocked = isLocked;\n            return this;\n        }\n\n        public Builder isActive(Boolean isActive) {\n            this.isActive = isActive;\n            return this;\n        }\n\n        public Builder lastLoginDate(LocalDateTime lastLoginDate) {\n            this.lastLoginDate = lastLoginDate;\n            return this;\n        }\n\n        public Builder passwordChangedDate(LocalDateTime passwordChangedDate) {\n            this.passwordChangedDate = passwordChangedDate;\n            return this;\n        }\n\n        public Builder mustChangePassword(Boolean mustChangePassword) {\n            this.mustChangePassword = mustChangePassword;\n            return this;\n        }\n\n        public Builder profilePictureUrl(String profilePictureUrl) {\n            this.profilePictureUrl = profilePictureUrl;\n            return this;\n        }\n\n        public Builder institutionId(Long institutionId) {\n            this.institutionId = institutionId;\n            return this;\n        }\n\n        public Builder branchId(Long branchId) {\n            this.branchId = branchId;\n            return this;\n        }\n\n        public Builder createdDate(LocalDateTime createdDate) {\n            this.createdDate = createdDate;\n            return this;\n        }\n\n        public Builder createdBy(String createdBy) {\n            this.createdBy = createdBy;\n            return this;\n        }\n\n        public Builder updatedDate(LocalDateTime updatedDate) {\n            this.updatedDate = updatedDate;\n            return this;\n        }\n\n        public Builder updatedBy(String updatedBy) {\n            this.updatedBy = updatedBy;\n            return this;\n        }\n\n        public UserResponse build() {\n            return new UserResponse(id, username, email, firstName, lastName, fullName, \n                                  phoneNumber, role, isLocked, isActive, lastLoginDate, \n                                  passwordChangedDate, mustChangePassword, profilePictureUrl, \n                                  institutionId, branchId, createdDate, createdBy, \n                                  updatedDate, updatedBy);\n        }\n    }\n\n    // Getters and Setters\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getFullName() {\n        return fullName;\n    }\n\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public Role getRole() {\n        return role;\n    }\n\n    public void setRole(Role role) {\n        this.role = role;\n    }\n\n    public Boolean getIsLocked() {\n        return isLocked;\n    }\n\n    public void setIsLocked(Boolean isLocked) {\n        this.isLocked = isLocked;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean isActive) {\n        this.isActive = isActive;\n    }\n\n    public LocalDateTime getLastLoginDate() {\n        return lastLoginDate;\n    }\n\n    public void setLastLoginDate(LocalDateTime lastLoginDate) {\n        this.lastLoginDate = lastLoginDate;\n    }\n\n    public LocalDateTime getPasswordChangedDate() {\n        return passwordChangedDate;\n    }\n\n    public void setPasswordChangedDate(LocalDateTime passwordChangedDate) {\n        this.passwordChangedDate = passwordChangedDate;\n    }\n\n    public Boolean getMustChangePassword() {\n        return mustChangePassword;\n    }\n\n    public void setMustChangePassword(Boolean mustChangePassword) {\n        this.mustChangePassword = mustChangePassword;\n    }\n\n    public String getProfilePictureUrl() {\n        return profilePictureUrl;\n    }\n\n    public void setProfilePictureUrl(String profilePictureUrl) {\n        this.profilePictureUrl = profilePictureUrl;\n    }\n\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public LocalDateTime getCreatedDate() {\n        return createdDate;\n    }\n\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = createdDate;\n    }\n\n    public String getCreatedBy() {\n        return createdBy;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    public LocalDateTime getUpdatedDate() {\n        return updatedDate;\n    }\n\n    public void setUpdatedDate(LocalDateTime updatedDate) {\n        this.updatedDate = updatedDate;\n    }\n\n    public String getUpdatedBy() {\n        return updatedBy;\n    }\n\n    public void setUpdatedBy(String updatedBy) {\n        this.updatedBy = updatedBy;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        UserResponse that = (UserResponse) o;\n        return Objects.equals(id, that.id) &&\n                Objects.equals(username, that.username) &&\n                Objects.equals(email, that.email);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, username, email);\n    }\n\n    @Override\n    public String toString() {\n        return \"UserResponse{\" +\n                \"id=\" + id +\n                \", username='\" + username + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", role=\" + role +\n                \", isActive=\" + isActive +\n                '}';\n    }\n}\n","path":null,"size_bytes":10880,"size_tokens":null},"src/main/java/com/educationerp/core/exception/BusinessException.java":{"content":"package com.educationerp.core.exception;\n\n/**\n * Exception thrown for business rule violations\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class BusinessException extends RuntimeException {\n\n    private final String errorCode;\n\n    public BusinessException(String message) {\n        super(message);\n        this.errorCode = null;\n    }\n\n    public BusinessException(String message, Throwable cause) {\n        super(message, cause);\n        this.errorCode = null;\n    }\n\n    public BusinessException(String message, String errorCode) {\n        super(message);\n        this.errorCode = errorCode;\n    }\n\n    public BusinessException(String message, String errorCode, Throwable cause) {\n        super(message, cause);\n        this.errorCode = errorCode;\n    }\n\n    public String getErrorCode() {\n        return errorCode;\n    }\n}\n\n","path":null,"size_bytes":847,"size_tokens":null},"src/main/java/com/educationerp/payment_management/entity/Payment.java":{"content":"package com.educationerp.payment_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * Payment entity for the Education ERP System\n * Represents payments made by students\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"payments\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"payment_reference\"})\n       })\npublic class Payment extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotNull(message = \"Student ID is required\")\n    @Column(name = \"student_id\", nullable = false)\n    private Long studentId;\n\n    @NotBlank(message = \"Payment reference is required\")\n    @Size(max = 50, message = \"Payment reference must not exceed 50 characters\")\n    @Column(name = \"payment_reference\", nullable = false, length = 50)\n    private String paymentReference;\n\n    @NotNull(message = \"Amount is required\")\n    @Column(name = \"amount\", nullable = false, precision = 10, scale = 2)\n    private BigDecimal amount;\n\n    @Column(name = \"discount_amount\", precision = 10, scale = 2)\n    private BigDecimal discountAmount;\n\n    @Column(name = \"tax_amount\", precision = 10, scale = 2)\n    private BigDecimal taxAmount;\n\n    @Column(name = \"final_amount\", precision = 10, scale = 2)\n    private BigDecimal finalAmount;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"payment_type\", nullable = false)\n    private PaymentType paymentType = PaymentType.COURSE_FEE;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"payment_method\", nullable = false)\n    private PaymentMethod paymentMethod = PaymentMethod.CASH;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private PaymentStatus status = PaymentStatus.PENDING;\n\n    @NotNull(message = \"Payment date is required\")\n    @Column(name = \"payment_date\", nullable = false)\n    private LocalDate paymentDate;\n\n    @Column(name = \"due_date\")\n    private LocalDate dueDate;\n\n    @Column(name = \"processed_date\")\n    private LocalDateTime processedDate;\n\n    @Column(name = \"transaction_id\", length = 100)\n    private String transactionId;\n\n    @Column(name = \"receipt_number\", length = 50)\n    private String receiptNumber;\n\n    @Column(name = \"installment_plan_id\")\n    private Long installmentPlanId;\n\n    @Column(name = \"installment_number\")\n    private Integer installmentNumber;\n\n    @Column(name = \"total_installments\")\n    private Integer totalInstallments;\n\n    @Column(name = \"course_id\")\n    private Long courseId;\n\n    @Column(name = \"product_id\")\n    private Long productId;\n\n    @Column(name = \"package_id\")\n    private Long packageId;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    @Column(name = \"processed_by\")\n    private String processedBy;\n\n    @Column(name = \"refund_amount\", precision = 10, scale = 2)\n    private BigDecimal refundAmount;\n\n    @Column(name = \"refund_date\")\n    private LocalDate refundDate;\n\n    @Size(max = 1000, message = \"Refund reason must not exceed 1000 characters\")\n    @Column(name = \"refund_reason\", length = 1000)\n    private String refundReason;\n\n    // Constructors\n    public Payment() {\n    }\n\n    public Payment(Long institutionId, Long branchId, Long studentId, String paymentReference, \n                   BigDecimal amount, PaymentType paymentType, PaymentMethod paymentMethod, \n                   PaymentStatus status, LocalDate paymentDate, LocalDate dueDate) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.studentId = studentId;\n        this.paymentReference = paymentReference;\n        this.amount = amount;\n        this.paymentType = paymentType;\n        this.paymentMethod = paymentMethod;\n        this.status = status;\n        this.paymentDate = paymentDate;\n        this.dueDate = dueDate;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public Long getStudentId() {\n        return studentId;\n    }\n\n    public void setStudentId(Long studentId) {\n        this.studentId = studentId;\n    }\n\n    public String getPaymentReference() {\n        return paymentReference;\n    }\n\n    public void setPaymentReference(String paymentReference) {\n        this.paymentReference = paymentReference;\n    }\n\n    public BigDecimal getAmount() {\n        return amount;\n    }\n\n    public void setAmount(BigDecimal amount) {\n        this.amount = amount;\n    }\n\n    public BigDecimal getDiscountAmount() {\n        return discountAmount;\n    }\n\n    public void setDiscountAmount(BigDecimal discountAmount) {\n        this.discountAmount = discountAmount;\n    }\n\n    public BigDecimal getTaxAmount() {\n        return taxAmount;\n    }\n\n    public void setTaxAmount(BigDecimal taxAmount) {\n        this.taxAmount = taxAmount;\n    }\n\n    public BigDecimal getFinalAmount() {\n        return finalAmount;\n    }\n\n    public void setFinalAmount(BigDecimal finalAmount) {\n        this.finalAmount = finalAmount;\n    }\n\n    public PaymentType getPaymentType() {\n        return paymentType;\n    }\n\n    public void setPaymentType(PaymentType paymentType) {\n        this.paymentType = paymentType;\n    }\n\n    public PaymentMethod getPaymentMethod() {\n        return paymentMethod;\n    }\n\n    public void setPaymentMethod(PaymentMethod paymentMethod) {\n        this.paymentMethod = paymentMethod;\n    }\n\n    public PaymentStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(PaymentStatus status) {\n        this.status = status;\n    }\n\n    public LocalDate getPaymentDate() {\n        return paymentDate;\n    }\n\n    public void setPaymentDate(LocalDate paymentDate) {\n        this.paymentDate = paymentDate;\n    }\n\n    public LocalDate getDueDate() {\n        return dueDate;\n    }\n\n    public void setDueDate(LocalDate dueDate) {\n        this.dueDate = dueDate;\n    }\n\n    public LocalDateTime getProcessedDate() {\n        return processedDate;\n    }\n\n    public void setProcessedDate(LocalDateTime processedDate) {\n        this.processedDate = processedDate;\n    }\n\n    public String getTransactionId() {\n        return transactionId;\n    }\n\n    public void setTransactionId(String transactionId) {\n        this.transactionId = transactionId;\n    }\n\n    public String getReceiptNumber() {\n        return receiptNumber;\n    }\n\n    public void setReceiptNumber(String receiptNumber) {\n        this.receiptNumber = receiptNumber;\n    }\n\n    public Long getInstallmentPlanId() {\n        return installmentPlanId;\n    }\n\n    public void setInstallmentPlanId(Long installmentPlanId) {\n        this.installmentPlanId = installmentPlanId;\n    }\n\n    public Integer getInstallmentNumber() {\n        return installmentNumber;\n    }\n\n    public void setInstallmentNumber(Integer installmentNumber) {\n        this.installmentNumber = installmentNumber;\n    }\n\n    public Integer getTotalInstallments() {\n        return totalInstallments;\n    }\n\n    public void setTotalInstallments(Integer totalInstallments) {\n        this.totalInstallments = totalInstallments;\n    }\n\n    public Long getCourseId() {\n        return courseId;\n    }\n\n    public void setCourseId(Long courseId) {\n        this.courseId = courseId;\n    }\n\n    public Long getProductId() {\n        return productId;\n    }\n\n    public void setProductId(Long productId) {\n        this.productId = productId;\n    }\n\n    public Long getPackageId() {\n        return packageId;\n    }\n\n    public void setPackageId(Long packageId) {\n        this.packageId = packageId;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    public String getProcessedBy() {\n        return processedBy;\n    }\n\n    public void setProcessedBy(String processedBy) {\n        this.processedBy = processedBy;\n    }\n\n    public BigDecimal getRefundAmount() {\n        return refundAmount;\n    }\n\n    public void setRefundAmount(BigDecimal refundAmount) {\n        this.refundAmount = refundAmount;\n    }\n\n    public LocalDate getRefundDate() {\n        return refundDate;\n    }\n\n    public void setRefundDate(LocalDate refundDate) {\n        this.refundDate = refundDate;\n    }\n\n    public String getRefundReason() {\n        return refundReason;\n    }\n\n    public void setRefundReason(String refundReason) {\n        this.refundReason = refundReason;\n    }\n\n    // Business methods\n    public boolean isPaid() {\n        return status == PaymentStatus.COMPLETED;\n    }\n\n    public boolean isPending() {\n        return status == PaymentStatus.PENDING;\n    }\n\n    public boolean isFailed() {\n        return status == PaymentStatus.FAILED;\n    }\n\n    public boolean isRefunded() {\n        return status == PaymentStatus.REFUNDED;\n    }\n\n    public boolean isOverdue() {\n        return dueDate != null && dueDate.isBefore(LocalDate.now()) && !isPaid();\n    }\n\n    public boolean isInstallment() {\n        return installmentPlanId != null && installmentNumber != null;\n    }\n\n    public void markAsCompleted() {\n        this.status = PaymentStatus.COMPLETED;\n        this.processedDate = LocalDateTime.now();\n    }\n\n    public void markAsFailed() {\n        this.status = PaymentStatus.FAILED;\n    }\n\n    public void markAsRefunded(BigDecimal refundAmount, String refundReason) {\n        this.status = PaymentStatus.REFUNDED;\n        this.refundAmount = refundAmount;\n        this.refundReason = refundReason;\n        this.refundDate = LocalDate.now();\n    }\n\n    public void calculateFinalAmount() {\n        BigDecimal finalAmount = amount;\n        if (discountAmount != null) {\n            finalAmount = finalAmount.subtract(discountAmount);\n        }\n        if (taxAmount != null) {\n            finalAmount = finalAmount.add(taxAmount);\n        }\n        this.finalAmount = finalAmount;\n    }\n\n    // Enums\n    public enum PaymentType {\n        COURSE_FEE, BOOK_FEE, EXAM_FEE, TRANSPORT_FEE, HOSTEL_FEE, LIBRARY_FEE, \n        LAB_FEE, SPORTS_FEE, ACTIVITY_FEE, LATE_FEE, PENALTY, REFUND, OTHER\n    }\n\n    public enum PaymentMethod {\n        CASH, BANK_TRANSFER, CREDIT_CARD, DEBIT_CARD, CHECK, ONLINE_PAYMENT, \n        MOBILE_PAYMENT, INSTALLMENT, SCHOLARSHIP, GRANT, OTHER\n    }\n\n    public enum PaymentStatus {\n        PENDING, COMPLETED, FAILED, CANCELLED, REFUNDED, PARTIAL\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Payment payment = (Payment) o;\n        return Objects.equals(institutionId, payment.institutionId) &&\n                Objects.equals(paymentReference, payment.paymentReference);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, paymentReference);\n    }\n\n    @Override\n    public String toString() {\n        return \"Payment{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", studentId=\" + studentId +\n                \", paymentReference='\" + paymentReference + '\\'' +\n                \", amount=\" + amount +\n                \", paymentType=\" + paymentType +\n                \", paymentMethod=\" + paymentMethod +\n                \", status=\" + status +\n                \", paymentDate=\" + paymentDate +\n                '}';\n    }\n}\n","path":null,"size_bytes":12458,"size_tokens":null},"src/main/java/com/educationerp/core/dto/ApiResponse.java":{"content":"package com.educationerp.core.dto;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * Standard API response wrapper\n * Provides a consistent response format for all API endpoints\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class ApiResponse<T> {\n    \n    private boolean success;\n    private String message;\n    private T data;\n    private LocalDateTime timestamp;\n    private Integer statusCode;\n\n    // Constructors\n    public ApiResponse() {\n        this.timestamp = LocalDateTime.now();\n    }\n\n    public ApiResponse(boolean success, String message, T data) {\n        this();\n        this.success = success;\n        this.message = message;\n        this.data = data;\n    }\n\n    public ApiResponse(boolean success, String message, T data, Integer statusCode) {\n        this(success, message, data);\n        this.statusCode = statusCode;\n    }\n\n    // Static factory methods\n    public static <T> ApiResponse<T> success(T data) {\n        return new ApiResponse<>(true, \"Operation successful\", data, 200);\n    }\n\n    public static <T> ApiResponse<T> success(String message, T data) {\n        return new ApiResponse<>(true, message, data, 200);\n    }\n\n    public static <T> ApiResponse<T> error(String message) {\n        return new ApiResponse<>(false, message, null, 400);\n    }\n\n    public static <T> ApiResponse<T> error(String message, Integer statusCode) {\n        return new ApiResponse<>(false, message, null, statusCode);\n    }\n\n    // Builder pattern\n    public static <T> Builder<T> builder() {\n        return new Builder<>();\n    }\n\n    public static class Builder<T> {\n        private boolean success;\n        private String message;\n        private T data;\n        private LocalDateTime timestamp;\n        private Integer statusCode;\n\n        public Builder<T> success(boolean success) {\n            this.success = success;\n            return this;\n        }\n\n        public Builder<T> message(String message) {\n            this.message = message;\n            return this;\n        }\n\n        public Builder<T> data(T data) {\n            this.data = data;\n            return this;\n        }\n\n        public Builder<T> timestamp(LocalDateTime timestamp) {\n            this.timestamp = timestamp;\n            return this;\n        }\n\n        public Builder<T> statusCode(Integer statusCode) {\n            this.statusCode = statusCode;\n            return this;\n        }\n\n        public ApiResponse<T> build() {\n            ApiResponse<T> response = new ApiResponse<>();\n            response.setSuccess(this.success);\n            response.setMessage(this.message);\n            response.setData(this.data);\n            response.setTimestamp(this.timestamp != null ? this.timestamp : LocalDateTime.now());\n            response.setStatusCode(this.statusCode);\n            return response;\n        }\n    }\n\n    // Getters and Setters\n    public boolean isSuccess() {\n        return success;\n    }\n\n    public void setSuccess(boolean success) {\n        this.success = success;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public T getData() {\n        return data;\n    }\n\n    public void setData(T data) {\n        this.data = data;\n    }\n\n    public LocalDateTime getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(LocalDateTime timestamp) {\n        this.timestamp = timestamp;\n    }\n\n    public Integer getStatusCode() {\n        return statusCode;\n    }\n\n    public void setStatusCode(Integer statusCode) {\n        this.statusCode = statusCode;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        ApiResponse<?> that = (ApiResponse<?>) o;\n        return success == that.success && Objects.equals(message, that.message) && Objects.equals(data, that.data) && Objects.equals(timestamp, that.timestamp) && Objects.equals(statusCode, that.statusCode);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(success, message, data, timestamp, statusCode);\n    }\n\n    @Override\n    public String toString() {\n        return \"ApiResponse{\" +\n                \"success=\" + success +\n                \", message='\" + message + '\\'' +\n                \", data=\" + data +\n                \", timestamp=\" + timestamp +\n                \", statusCode=\" + statusCode +\n                '}';\n    }\n}\n\n","path":null,"size_bytes":4498,"size_tokens":null},"src/main/java/com/educationerp/user_management/dto/UpdateUserRequest.java":{"content":"package com.educationerp.user_management.dto;\n\nimport com.educationerp.security.enums.Role;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Objects;\n\n/**\n * DTO for updating an existing user\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class UpdateUserRequest {\n\n    @NotBlank(message = \"Username is required\")\n    @Size(min = 3, max = 50, message = \"Username must be between 3 and 50 characters\")\n    private String username;\n\n    @NotBlank(message = \"Email is required\")\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    private String email;\n\n    @NotBlank(message = \"First name is required\")\n    @Size(max = 50, message = \"First name must not exceed 50 characters\")\n    private String firstName;\n\n    @NotBlank(message = \"Last name is required\")\n    @Size(max = 50, message = \"Last name must not exceed 50 characters\")\n    private String lastName;\n\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    private String phoneNumber;\n\n    @NotNull(message = \"Role is required\")\n    private Role role;\n\n    private Long institutionId;\n    private Long branchId;\n\n    // Constructors\n    public UpdateUserRequest() {\n    }\n\n    public UpdateUserRequest(String username, String email, String firstName, String lastName, \n                           String phoneNumber, Role role, Long institutionId, Long branchId) {\n        this.username = username;\n        this.email = email;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.phoneNumber = phoneNumber;\n        this.role = role;\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n    }\n\n    // Getters and Setters\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public Role getRole() {\n        return role;\n    }\n\n    public void setRole(Role role) {\n        this.role = role;\n    }\n\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        UpdateUserRequest that = (UpdateUserRequest) o;\n        return Objects.equals(username, that.username) &&\n                Objects.equals(email, that.email) &&\n                Objects.equals(firstName, that.firstName) &&\n                Objects.equals(lastName, that.lastName) &&\n                Objects.equals(phoneNumber, that.phoneNumber) &&\n                role == that.role &&\n                Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(branchId, that.branchId);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(username, email, firstName, lastName, phoneNumber, role, institutionId, branchId);\n    }\n\n    @Override\n    public String toString() {\n        return \"UpdateUserRequest{\" +\n                \"username='\" + username + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", phoneNumber='\" + phoneNumber + '\\'' +\n                \", role=\" + role +\n                \", institutionId=\" + institutionId +\n                \", branchId=\" + branchId +\n                '}';\n    }\n}\n","path":null,"size_bytes":4498,"size_tokens":null},"src/main/java/com/educationerp/reporting/repository/ReportRepository.java":{"content":"package com.educationerp.reporting.repository;\n\nimport com.educationerp.reporting.entity.Report;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * Repository for Report entity\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Repository\npublic interface ReportRepository extends JpaRepository<Report, Long> {\n\n    /**\n     * Find reports by institution ID\n     */\n    List<Report> findByInstitutionId(Long institutionId);\n\n    /**\n     * Find reports by type\n     */\n    List<Report> findByReportType(String reportType);\n\n    /**\n     * Find reports by status\n     */\n    List<Report> findByStatus(String status);\n\n    /**\n     * Find reports by institution ID and status\n     */\n    List<Report> findByInstitutionIdAndStatus(Long institutionId, String status);\n\n    /**\n     * Find reports by date range\n     */\n    @Query(\"SELECT r FROM Report r WHERE r.createdDate BETWEEN :startDate AND :endDate\")\n    List<Report> findByDateRange(@Param(\"startDate\") LocalDateTime startDate, \n                                  @Param(\"endDate\") LocalDateTime endDate);\n\n    /**\n     * Find all reports by institution ID with pagination\n     */\n    Page<Report> findByInstitutionId(Long institutionId, Pageable pageable);\n\n    /**\n     * Find reports by user ID who generated them\n     */\n    List<Report> findByCreatedBy(String username);\n\n    /**\n     * Check if report exists with given identifier\n     */\n    boolean existsByReportIdentifier(String reportIdentifier);\n\n    /**\n     * Find report by identifier\n     */\n    Optional<Report> findByReportIdentifier(String reportIdentifier);\n\n    /**\n     * Find active reports by institution ID ordered by created date descending\n     */\n    List<Report> findByInstitutionIdAndIsActiveTrueOrderByCreatedDateDesc(Long institutionId);\n\n    /**\n     * Find active reports by institution ID and category ordered by created date descending\n     */\n    List<Report> findByInstitutionIdAndCategoryAndIsActiveTrueOrderByCreatedDateDesc(Long institutionId, Report.ReportCategory category);\n\n    /**\n     * Find scheduled active reports by status\n     */\n    List<Report> findByIsScheduledTrueAndStatusAndIsActiveTrue(Report.ReportStatus status);\n}\n\n","path":null,"size_bytes":2542,"size_tokens":null},"src/main/java/com/educationerp/security/dto/LoginResponse.java":{"content":"package com.educationerp.security.dto;\n\nimport com.educationerp.security.enums.Role;\n\nimport java.util.Objects;\n\n/**\n * DTO for login response\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class LoginResponse {\n\n    private String accessToken;\n    private String refreshToken;\n    private String tokenType;\n    private Long expiresIn;\n    private String username;\n    private Role role;\n    private String tenantId;\n\n    // Constructors\n    public LoginResponse() {\n    }\n\n    public LoginResponse(String accessToken, String refreshToken, String tokenType, \n                        Long expiresIn, String username, Role role, String tenantId) {\n        this.accessToken = accessToken;\n        this.refreshToken = refreshToken;\n        this.tokenType = tokenType;\n        this.expiresIn = expiresIn;\n        this.username = username;\n        this.role = role;\n        this.tenantId = tenantId;\n    }\n\n    // Builder pattern\n    public static Builder builder() {\n        return new Builder();\n    }\n\n    public static class Builder {\n        private String accessToken;\n        private String refreshToken;\n        private String tokenType;\n        private Long expiresIn;\n        private String username;\n        private Role role;\n        private String tenantId;\n\n        public Builder accessToken(String accessToken) {\n            this.accessToken = accessToken;\n            return this;\n        }\n\n        public Builder refreshToken(String refreshToken) {\n            this.refreshToken = refreshToken;\n            return this;\n        }\n\n        public Builder tokenType(String tokenType) {\n            this.tokenType = tokenType;\n            return this;\n        }\n\n        public Builder expiresIn(Long expiresIn) {\n            this.expiresIn = expiresIn;\n            return this;\n        }\n\n        public Builder username(String username) {\n            this.username = username;\n            return this;\n        }\n\n        public Builder role(Role role) {\n            this.role = role;\n            return this;\n        }\n\n        public Builder tenantId(String tenantId) {\n            this.tenantId = tenantId;\n            return this;\n        }\n\n        public LoginResponse build() {\n            return new LoginResponse(accessToken, refreshToken, tokenType, expiresIn, username, role, tenantId);\n        }\n    }\n\n    // Getters and Setters\n    public String getAccessToken() {\n        return accessToken;\n    }\n\n    public void setAccessToken(String accessToken) {\n        this.accessToken = accessToken;\n    }\n\n    public String getRefreshToken() {\n        return refreshToken;\n    }\n\n    public void setRefreshToken(String refreshToken) {\n        this.refreshToken = refreshToken;\n    }\n\n    public String getTokenType() {\n        return tokenType;\n    }\n\n    public void setTokenType(String tokenType) {\n        this.tokenType = tokenType;\n    }\n\n    public Long getExpiresIn() {\n        return expiresIn;\n    }\n\n    public void setExpiresIn(Long expiresIn) {\n        this.expiresIn = expiresIn;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public Role getRole() {\n        return role;\n    }\n\n    public void setRole(Role role) {\n        this.role = role;\n    }\n\n    public String getTenantId() {\n        return tenantId;\n    }\n\n    public void setTenantId(String tenantId) {\n        this.tenantId = tenantId;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        LoginResponse that = (LoginResponse) o;\n        return Objects.equals(username, that.username) &&\n                role == that.role &&\n                Objects.equals(tenantId, that.tenantId);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(username, role, tenantId);\n    }\n\n    @Override\n    public String toString() {\n        return \"LoginResponse{\" +\n                \"username='\" + username + '\\'' +\n                \", role=\" + role +\n                \", tenantId='\" + tenantId + '\\'' +\n                \", tokenType='\" + tokenType + '\\'' +\n                '}';\n    }\n}\n","path":null,"size_bytes":4269,"size_tokens":null},"src/main/java/com/educationerp/user_management/entity/User.java":{"content":"package com.educationerp.user_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport com.educationerp.security.enums.Role;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * User entity for the Education ERP System\n * Represents all users in the system with role-based access\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"users\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = \"username\"),\n           @UniqueConstraint(columnNames = \"email\")\n       })\npublic class User extends BaseEntity {\n\n    @NotBlank(message = \"Username is required\")\n    @Size(min = 3, max = 50, message = \"Username must be between 3 and 50 characters\")\n    @Column(name = \"username\", nullable = false, unique = true, length = 50)\n    private String username;\n\n    @NotBlank(message = \"Email is required\")\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    @Column(name = \"email\", nullable = false, unique = true, length = 100)\n    private String email;\n\n    @NotBlank(message = \"Password is required\")\n    @Size(min = 8, message = \"Password must be at least 8 characters\")\n    @Column(name = \"password\", nullable = false)\n    private String password;\n\n    @NotBlank(message = \"First name is required\")\n    @Size(max = 50, message = \"First name must not exceed 50 characters\")\n    @Column(name = \"first_name\", nullable = false, length = 50)\n    private String firstName;\n\n    @NotBlank(message = \"Last name is required\")\n    @Size(max = 50, message = \"Last name must not exceed 50 characters\")\n    @Column(name = \"last_name\", nullable = false, length = 50)\n    private String lastName;\n\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    @Column(name = \"phone_number\", length = 20)\n    private String phoneNumber;\n\n    @NotNull(message = \"Role is required\")\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"role\", nullable = false)\n    private Role role;\n\n    @Column(name = \"is_locked\", nullable = false)\n    private Boolean isLocked = false;\n\n    @Column(name = \"failed_login_attempts\", nullable = false)\n    private Integer failedLoginAttempts = 0;\n\n    @Column(name = \"last_login_date\")\n    private LocalDateTime lastLoginDate;\n\n    @Column(name = \"password_changed_date\")\n    private LocalDateTime passwordChangedDate;\n\n    @Column(name = \"must_change_password\", nullable = false)\n    private Boolean mustChangePassword = false;\n\n    @Size(max = 500, message = \"Profile picture URL must not exceed 500 characters\")\n    @Column(name = \"profile_picture_url\", length = 500)\n    private String profilePictureUrl;\n\n    @Column(name = \"institution_id\")\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    // Constructors\n    public User() {\n    }\n\n    public User(String username, String email, String password, String firstName, \n               String lastName, String phoneNumber, Role role) {\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.phoneNumber = phoneNumber;\n        this.role = role;\n    }\n\n    // Getters and Setters\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public Role getRole() {\n        return role;\n    }\n\n    public void setRole(Role role) {\n        this.role = role;\n    }\n\n    public Boolean getIsLocked() {\n        return isLocked;\n    }\n\n    public void setIsLocked(Boolean isLocked) {\n        this.isLocked = isLocked;\n    }\n\n    public Integer getFailedLoginAttempts() {\n        return failedLoginAttempts;\n    }\n\n    public void setFailedLoginAttempts(Integer failedLoginAttempts) {\n        this.failedLoginAttempts = failedLoginAttempts;\n    }\n\n    public LocalDateTime getLastLoginDate() {\n        return lastLoginDate;\n    }\n\n    public void setLastLoginDate(LocalDateTime lastLoginDate) {\n        this.lastLoginDate = lastLoginDate;\n    }\n\n    public LocalDateTime getPasswordChangedDate() {\n        return passwordChangedDate;\n    }\n\n    public void setPasswordChangedDate(LocalDateTime passwordChangedDate) {\n        this.passwordChangedDate = passwordChangedDate;\n    }\n\n    public Boolean getMustChangePassword() {\n        return mustChangePassword;\n    }\n\n    public void setMustChangePassword(Boolean mustChangePassword) {\n        this.mustChangePassword = mustChangePassword;\n    }\n\n    public String getProfilePictureUrl() {\n        return profilePictureUrl;\n    }\n\n    public void setProfilePictureUrl(String profilePictureUrl) {\n        this.profilePictureUrl = profilePictureUrl;\n    }\n\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    // Business methods\n    public String getFullName() {\n        return firstName + \" \" + lastName;\n    }\n\n    public void incrementFailedLoginAttempts() {\n        this.failedLoginAttempts++;\n    }\n\n    public void resetFailedLoginAttempts() {\n        this.failedLoginAttempts = 0;\n    }\n\n    public void lockAccount() {\n        this.isLocked = true;\n    }\n\n    public void unlockAccount() {\n        this.isLocked = false;\n        this.failedLoginAttempts = 0;\n    }\n\n    public void updateLastLogin() {\n        this.lastLoginDate = LocalDateTime.now();\n    }\n\n    public void updatePasswordChangeDate() {\n        this.passwordChangedDate = LocalDateTime.now();\n        this.mustChangePassword = false;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        User user = (User) o;\n        return Objects.equals(username, user.username) &&\n                Objects.equals(email, user.email);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), username, email);\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + getId() +\n                \", username='\" + username + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", role=\" + role +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":7734,"size_tokens":null},"src/main/java/com/educationerp/core/exception/ResourceNotFoundException.java":{"content":"package com.educationerp.core.exception;\n\n/**\n * Exception thrown when a requested resource is not found\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class ResourceNotFoundException extends RuntimeException {\n\n    private final String resourceName;\n    private final String fieldName;\n    private final Object fieldValue;\n\n    public ResourceNotFoundException(String resourceName, String fieldName, Object fieldValue) {\n        super(String.format(\"%s not found with %s : '%s'\", resourceName, fieldName, fieldValue));\n        this.resourceName = resourceName;\n        this.fieldName = fieldName;\n        this.fieldValue = fieldValue;\n    }\n\n    public ResourceNotFoundException(String message) {\n        super(message);\n        this.resourceName = null;\n        this.fieldName = null;\n        this.fieldValue = null;\n    }\n\n    public String getResourceName() {\n        return resourceName;\n    }\n\n    public String getFieldName() {\n        return fieldName;\n    }\n\n    public Object getFieldValue() {\n        return fieldValue;\n    }\n}\n\n","path":null,"size_bytes":1056,"size_tokens":null},"src/main/java/com/educationerp/reporting/entity/Report.java":{"content":"package com.educationerp.reporting.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * Report entity for the Education ERP System\n * Represents generated reports and analytics\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"reports\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"report_code\"})\n       })\npublic class Report extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotBlank(message = \"Report code is required\")\n    @Size(max = 50, message = \"Report code must not exceed 50 characters\")\n    @Column(name = \"report_code\", nullable = false, length = 50)\n    private String reportCode;\n\n    @NotBlank(message = \"Report name is required\")\n    @Size(max = 200, message = \"Report name must not exceed 200 characters\")\n    @Column(name = \"report_name\", nullable = false, length = 200)\n    private String reportName;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"report_type\", nullable = false)\n    private ReportType reportType = ReportType.STANDARD;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"category\", nullable = false)\n    private ReportCategory category = ReportCategory.STUDENT;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private ReportStatus status = ReportStatus.ACTIVE;\n\n    @Column(name = \"is_scheduled\", nullable = false)\n    private Boolean isScheduled = false;\n\n    @Column(name = \"schedule_cron\")\n    private String scheduleCron;\n\n    @Column(name = \"last_generated_date\")\n    private LocalDateTime lastGeneratedDate;\n\n    @Column(name = \"next_scheduled_date\")\n    private LocalDateTime nextScheduledDate;\n\n    @Size(max = 100, message = \"Generated by must not exceed 100 characters\")\n    @Column(name = \"generated_by\", length = 100)\n    private String generatedBy;\n\n    @Column(name = \"generation_time_ms\")\n    private Long generationTimeMs;\n\n    @Column(name = \"record_count\")\n    private Long recordCount;\n\n    @Size(max = 500, message = \"File path must not exceed 500 characters\")\n    @Column(name = \"file_path\", length = 500)\n    private String filePath;\n\n    @Size(max = 50, message = \"File format must not exceed 50 characters\")\n    @Column(name = \"file_format\", length = 50)\n    private String fileFormat;\n\n    @Column(name = \"file_size_bytes\")\n    private Long fileSizeBytes;\n\n    @Size(max = 1000, message = \"Parameters must not exceed 1000 characters\")\n    @Column(name = \"parameters\", length = 1000)\n    private String parameters;\n\n    @Size(max = 1000, message = \"Filters must not exceed 1000 characters\")\n    @Column(name = \"filters\", length = 1000)\n    private String filters;\n\n    @Size(max = 1000, message = \"Columns must not exceed 1000 characters\")\n    @Column(name = \"columns\", length = 1000)\n    private String columns;\n\n    @Size(max = 100, message = \"Sort order must not exceed 100 characters\")\n    @Column(name = \"sort_order\", length = 100)\n    private String sortOrder;\n\n    @Column(name = \"is_public\", nullable = false)\n    private Boolean isPublic = false;\n\n    @Size(max = 1000, message = \"Access roles must not exceed 1000 characters\")\n    @Column(name = \"access_roles\", length = 1000)\n    private String accessRoles;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public Report() {\n    }\n\n    public Report(Long institutionId, Long branchId, String reportCode, String reportName, \n                 String description, ReportType reportType, ReportCategory category, \n                 ReportStatus status, Boolean isScheduled, String scheduleCron) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.reportCode = reportCode;\n        this.reportName = reportName;\n        this.description = description;\n        this.reportType = reportType;\n        this.category = category;\n        this.status = status;\n        this.isScheduled = isScheduled;\n        this.scheduleCron = scheduleCron;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getReportCode() {\n        return reportCode;\n    }\n\n    public void setReportCode(String reportCode) {\n        this.reportCode = reportCode;\n    }\n\n    public String getReportName() {\n        return reportName;\n    }\n\n    public void setReportName(String reportName) {\n        this.reportName = reportName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public ReportType getReportType() {\n        return reportType;\n    }\n\n    public void setReportType(ReportType reportType) {\n        this.reportType = reportType;\n    }\n\n    public ReportCategory getCategory() {\n        return category;\n    }\n\n    public void setCategory(ReportCategory category) {\n        this.category = category;\n    }\n\n    public ReportStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(ReportStatus status) {\n        this.status = status;\n    }\n\n    public Boolean getIsScheduled() {\n        return isScheduled;\n    }\n\n    public void setIsScheduled(Boolean isScheduled) {\n        this.isScheduled = isScheduled;\n    }\n\n    public String getScheduleCron() {\n        return scheduleCron;\n    }\n\n    public void setScheduleCron(String scheduleCron) {\n        this.scheduleCron = scheduleCron;\n    }\n\n    public LocalDateTime getLastGeneratedDate() {\n        return lastGeneratedDate;\n    }\n\n    public void setLastGeneratedDate(LocalDateTime lastGeneratedDate) {\n        this.lastGeneratedDate = lastGeneratedDate;\n    }\n\n    public LocalDateTime getNextScheduledDate() {\n        return nextScheduledDate;\n    }\n\n    public void setNextScheduledDate(LocalDateTime nextScheduledDate) {\n        this.nextScheduledDate = nextScheduledDate;\n    }\n\n    public String getGeneratedBy() {\n        return generatedBy;\n    }\n\n    public void setGeneratedBy(String generatedBy) {\n        this.generatedBy = generatedBy;\n    }\n\n    public Long getGenerationTimeMs() {\n        return generationTimeMs;\n    }\n\n    public void setGenerationTimeMs(Long generationTimeMs) {\n        this.generationTimeMs = generationTimeMs;\n    }\n\n    public Long getRecordCount() {\n        return recordCount;\n    }\n\n    public void setRecordCount(Long recordCount) {\n        this.recordCount = recordCount;\n    }\n\n    public String getFilePath() {\n        return filePath;\n    }\n\n    public void setFilePath(String filePath) {\n        this.filePath = filePath;\n    }\n\n    public String getFileFormat() {\n        return fileFormat;\n    }\n\n    public void setFileFormat(String fileFormat) {\n        this.fileFormat = fileFormat;\n    }\n\n    public Long getFileSizeBytes() {\n        return fileSizeBytes;\n    }\n\n    public void setFileSizeBytes(Long fileSizeBytes) {\n        this.fileSizeBytes = fileSizeBytes;\n    }\n\n    public String getParameters() {\n        return parameters;\n    }\n\n    public void setParameters(String parameters) {\n        this.parameters = parameters;\n    }\n\n    public String getFilters() {\n        return filters;\n    }\n\n    public void setFilters(String filters) {\n        this.filters = filters;\n    }\n\n    public String getColumns() {\n        return columns;\n    }\n\n    public void setColumns(String columns) {\n        this.columns = columns;\n    }\n\n    public String getSortOrder() {\n        return sortOrder;\n    }\n\n    public void setSortOrder(String sortOrder) {\n        this.sortOrder = sortOrder;\n    }\n\n    public Boolean getIsPublic() {\n        return isPublic;\n    }\n\n    public void setIsPublic(Boolean isPublic) {\n        this.isPublic = isPublic;\n    }\n\n    public String getAccessRoles() {\n        return accessRoles;\n    }\n\n    public void setAccessRoles(String accessRoles) {\n        this.accessRoles = accessRoles;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isActive() {\n        return status == ReportStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isScheduled() {\n        return isScheduled != null && isScheduled;\n    }\n\n    public boolean isPublic() {\n        return isPublic != null && isPublic;\n    }\n\n    public void markAsGenerated(String generatedBy, Long generationTimeMs, Long recordCount, \n                               String filePath, String fileFormat, Long fileSizeBytes) {\n        this.lastGeneratedDate = LocalDateTime.now();\n        this.generatedBy = generatedBy;\n        this.generationTimeMs = generationTimeMs;\n        this.recordCount = recordCount;\n        this.filePath = filePath;\n        this.fileFormat = fileFormat;\n        this.fileSizeBytes = fileSizeBytes;\n    }\n\n    public void activate() {\n        this.status = ReportStatus.ACTIVE;\n    }\n\n    public void deactivate() {\n        this.status = ReportStatus.INACTIVE;\n    }\n\n    public void archive() {\n        this.status = ReportStatus.ARCHIVED;\n    }\n\n    // Enums\n    public enum ReportType {\n        STANDARD, CUSTOM, SCHEDULED, AD_HOC, DASHBOARD, ANALYTICS\n    }\n\n    public enum ReportCategory {\n        STUDENT, COURSE, PAYMENT, INVENTORY, USER, INSTITUTION, FINANCIAL, ACADEMIC, \n        ATTENDANCE, EXAM, GRADES, ENROLLMENT, REPORTS, SYSTEM\n    }\n\n    public enum ReportStatus {\n        ACTIVE, INACTIVE, ARCHIVED, DRAFT, GENERATING, ERROR\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Report report = (Report) o;\n        return Objects.equals(institutionId, report.institutionId) &&\n                Objects.equals(reportCode, report.reportCode);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, reportCode);\n    }\n\n    @Override\n    public String toString() {\n        return \"Report{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", reportCode='\" + reportCode + '\\'' +\n                \", reportName='\" + reportName + '\\'' +\n                \", reportType=\" + reportType +\n                \", category=\" + category +\n                \", status=\" + status +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":11347,"size_tokens":null},"src/main/java/com/educationerp/core/entity/BaseEntity.java":{"content":"package com.educationerp.core.entity;\n\nimport jakarta.persistence.*;\nimport org.springframework.data.annotation.CreatedDate;\nimport org.springframework.data.annotation.LastModifiedDate;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * Base entity class providing common fields for all entities\n * Includes audit fields like created date, updated date, and soft delete\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@MappedSuperclass\n@EntityListeners(AuditingEntityListener.class)\npublic abstract class BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @CreatedDate\n    @Column(name = \"created_date\", nullable = false, updatable = false)\n    private LocalDateTime createdDate;\n\n    @Column(name = \"created_by\", length = 100)\n    private String createdBy;\n\n    @LastModifiedDate\n    @Column(name = \"updated_date\")\n    private LocalDateTime updatedDate;\n\n    @Column(name = \"updated_by\", length = 100)\n    private String updatedBy;\n\n    @Column(name = \"is_active\", nullable = false)\n    private Boolean isActive = true;\n\n    @PrePersist\n    protected void onCreate() {\n        if (createdDate == null) {\n            createdDate = LocalDateTime.now();\n        }\n        if (isActive == null) {\n            isActive = true;\n        }\n    }\n\n    @PreUpdate\n    protected void onUpdate() {\n        updatedDate = LocalDateTime.now();\n    }\n\n    // Getters and Setters\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public LocalDateTime getCreatedDate() {\n        return createdDate;\n    }\n\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = createdDate;\n    }\n\n    public String getCreatedBy() {\n        return createdBy;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    public LocalDateTime getUpdatedDate() {\n        return updatedDate;\n    }\n\n    public void setUpdatedDate(LocalDateTime updatedDate) {\n        this.updatedDate = updatedDate;\n    }\n\n    public String getUpdatedBy() {\n        return updatedBy;\n    }\n\n    public void setUpdatedBy(String updatedBy) {\n        this.updatedBy = updatedBy;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean isActive) {\n        this.isActive = isActive;\n    }\n\n    /**\n     * Soft delete - sets isActive to false\n     */\n    public void softDelete() {\n        this.isActive = false;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        BaseEntity that = (BaseEntity) o;\n        return Objects.equals(id, that.id);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public String toString() {\n        return \"BaseEntity{\" +\n                \"id=\" + id +\n                \", createdDate=\" + createdDate +\n                \", createdBy='\" + createdBy + '\\'' +\n                \", updatedDate=\" + updatedDate +\n                \", updatedBy='\" + updatedBy + '\\'' +\n                \", isActive=\" + isActive +\n                '}';\n    }\n}\n\n","path":null,"size_bytes":3319,"size_tokens":null},"src/main/java/com/educationerp/student_management/dto/StudentResponse.java":{"content":"package com.educationerp.student_management.dto;\n\nimport com.educationerp.student_management.entity.Student;\nimport com.fasterxml.jackson.annotation.JsonFormat;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * DTO for student response data\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class StudentResponse {\n\n    private Long id;\n    private Long institutionId;\n    private Long branchId;\n    private String studentNumber;\n    private String firstName;\n    private String lastName;\n    private String middleName;\n    private String fullName;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd\")\n    private LocalDate dateOfBirth;\n    \n    private Student.Gender gender;\n    private String phoneNumber;\n    private String email;\n    private String address;\n    private String city;\n    private String state;\n    private String postalCode;\n    private String country;\n    private String fullAddress;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd\")\n    private LocalDate enrollmentDate;\n    \n    private Student.EnrollmentStatus enrollmentStatus;\n    private String gradeLevel;\n    private String program;\n    private String major;\n    private Double gpa;\n    private String profilePictureUrl;\n    private String notes;\n    private String emergencyContactName;\n    private String emergencyContactPhone;\n    private String emergencyContactRelationship;\n    private Integer age;\n    private Boolean isActive;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime createdDate;\n    \n    private String createdBy;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime updatedDate;\n    \n    private String updatedBy;\n\n    // Constructors\n    public StudentResponse() {\n    }\n\n    public StudentResponse(Long id, Long institutionId, Long branchId, String studentNumber, \n                          String firstName, String lastName, String middleName, String fullName, \n                          LocalDate dateOfBirth, Student.Gender gender, String phoneNumber, \n                          String email, String address, String city, String state, String postalCode, \n                          String country, String fullAddress, LocalDate enrollmentDate, \n                          Student.EnrollmentStatus enrollmentStatus, String gradeLevel, String program, \n                          String major, Double gpa, String profilePictureUrl, String notes, \n                          String emergencyContactName, String emergencyContactPhone, \n                          String emergencyContactRelationship, Integer age, Boolean isActive, \n                          LocalDateTime createdDate, String createdBy, LocalDateTime updatedDate, \n                          String updatedBy) {\n        this.id = id;\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.studentNumber = studentNumber;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.middleName = middleName;\n        this.fullName = fullName;\n        this.dateOfBirth = dateOfBirth;\n        this.gender = gender;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.fullAddress = fullAddress;\n        this.enrollmentDate = enrollmentDate;\n        this.enrollmentStatus = enrollmentStatus;\n        this.gradeLevel = gradeLevel;\n        this.program = program;\n        this.major = major;\n        this.gpa = gpa;\n        this.profilePictureUrl = profilePictureUrl;\n        this.notes = notes;\n        this.emergencyContactName = emergencyContactName;\n        this.emergencyContactPhone = emergencyContactPhone;\n        this.emergencyContactRelationship = emergencyContactRelationship;\n        this.age = age;\n        this.isActive = isActive;\n        this.createdDate = createdDate;\n        this.createdBy = createdBy;\n        this.updatedDate = updatedDate;\n        this.updatedBy = updatedBy;\n    }\n\n    // Builder pattern\n    public static Builder builder() {\n        return new Builder();\n    }\n\n    public static class Builder {\n        private Long id;\n        private Long institutionId;\n        private Long branchId;\n        private String studentNumber;\n        private String firstName;\n        private String lastName;\n        private String middleName;\n        private String fullName;\n        private LocalDate dateOfBirth;\n        private Student.Gender gender;\n        private String phoneNumber;\n        private String email;\n        private String address;\n        private String city;\n        private String state;\n        private String postalCode;\n        private String country;\n        private String fullAddress;\n        private LocalDate enrollmentDate;\n        private Student.EnrollmentStatus enrollmentStatus;\n        private String gradeLevel;\n        private String program;\n        private String major;\n        private Double gpa;\n        private String profilePictureUrl;\n        private String notes;\n        private String emergencyContactName;\n        private String emergencyContactPhone;\n        private String emergencyContactRelationship;\n        private Integer age;\n        private Boolean isActive;\n        private LocalDateTime createdDate;\n        private String createdBy;\n        private LocalDateTime updatedDate;\n        private String updatedBy;\n\n        public Builder id(Long id) {\n            this.id = id;\n            return this;\n        }\n\n        public Builder institutionId(Long institutionId) {\n            this.institutionId = institutionId;\n            return this;\n        }\n\n        public Builder branchId(Long branchId) {\n            this.branchId = branchId;\n            return this;\n        }\n\n        public Builder studentNumber(String studentNumber) {\n            this.studentNumber = studentNumber;\n            return this;\n        }\n\n        public Builder firstName(String firstName) {\n            this.firstName = firstName;\n            return this;\n        }\n\n        public Builder lastName(String lastName) {\n            this.lastName = lastName;\n            return this;\n        }\n\n        public Builder middleName(String middleName) {\n            this.middleName = middleName;\n            return this;\n        }\n\n        public Builder fullName(String fullName) {\n            this.fullName = fullName;\n            return this;\n        }\n\n        public Builder dateOfBirth(LocalDate dateOfBirth) {\n            this.dateOfBirth = dateOfBirth;\n            return this;\n        }\n\n        public Builder gender(Student.Gender gender) {\n            this.gender = gender;\n            return this;\n        }\n\n        public Builder phoneNumber(String phoneNumber) {\n            this.phoneNumber = phoneNumber;\n            return this;\n        }\n\n        public Builder email(String email) {\n            this.email = email;\n            return this;\n        }\n\n        public Builder address(String address) {\n            this.address = address;\n            return this;\n        }\n\n        public Builder city(String city) {\n            this.city = city;\n            return this;\n        }\n\n        public Builder state(String state) {\n            this.state = state;\n            return this;\n        }\n\n        public Builder postalCode(String postalCode) {\n            this.postalCode = postalCode;\n            return this;\n        }\n\n        public Builder country(String country) {\n            this.country = country;\n            return this;\n        }\n\n        public Builder fullAddress(String fullAddress) {\n            this.fullAddress = fullAddress;\n            return this;\n        }\n\n        public Builder enrollmentDate(LocalDate enrollmentDate) {\n            this.enrollmentDate = enrollmentDate;\n            return this;\n        }\n\n        public Builder enrollmentStatus(Student.EnrollmentStatus enrollmentStatus) {\n            this.enrollmentStatus = enrollmentStatus;\n            return this;\n        }\n\n        public Builder gradeLevel(String gradeLevel) {\n            this.gradeLevel = gradeLevel;\n            return this;\n        }\n\n        public Builder program(String program) {\n            this.program = program;\n            return this;\n        }\n\n        public Builder major(String major) {\n            this.major = major;\n            return this;\n        }\n\n        public Builder gpa(Double gpa) {\n            this.gpa = gpa;\n            return this;\n        }\n\n        public Builder profilePictureUrl(String profilePictureUrl) {\n            this.profilePictureUrl = profilePictureUrl;\n            return this;\n        }\n\n        public Builder notes(String notes) {\n            this.notes = notes;\n            return this;\n        }\n\n        public Builder emergencyContactName(String emergencyContactName) {\n            this.emergencyContactName = emergencyContactName;\n            return this;\n        }\n\n        public Builder emergencyContactPhone(String emergencyContactPhone) {\n            this.emergencyContactPhone = emergencyContactPhone;\n            return this;\n        }\n\n        public Builder emergencyContactRelationship(String emergencyContactRelationship) {\n            this.emergencyContactRelationship = emergencyContactRelationship;\n            return this;\n        }\n\n        public Builder age(Integer age) {\n            this.age = age;\n            return this;\n        }\n\n        public Builder isActive(Boolean isActive) {\n            this.isActive = isActive;\n            return this;\n        }\n\n        public Builder createdDate(LocalDateTime createdDate) {\n            this.createdDate = createdDate;\n            return this;\n        }\n\n        public Builder createdBy(String createdBy) {\n            this.createdBy = createdBy;\n            return this;\n        }\n\n        public Builder updatedDate(LocalDateTime updatedDate) {\n            this.updatedDate = updatedDate;\n            return this;\n        }\n\n        public Builder updatedBy(String updatedBy) {\n            this.updatedBy = updatedBy;\n            return this;\n        }\n\n        public StudentResponse build() {\n            return new StudentResponse(id, institutionId, branchId, studentNumber, firstName, lastName, \n                                     middleName, fullName, dateOfBirth, gender, phoneNumber, email, \n                                     address, city, state, postalCode, country, fullAddress, \n                                     enrollmentDate, enrollmentStatus, gradeLevel, program, major, gpa, \n                                     profilePictureUrl, notes, emergencyContactName, emergencyContactPhone, \n                                     emergencyContactRelationship, age, isActive, createdDate, createdBy, \n                                     updatedDate, updatedBy);\n        }\n    }\n\n    // Getters and Setters\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getStudentNumber() {\n        return studentNumber;\n    }\n\n    public void setStudentNumber(String studentNumber) {\n        this.studentNumber = studentNumber;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getMiddleName() {\n        return middleName;\n    }\n\n    public void setMiddleName(String middleName) {\n        this.middleName = middleName;\n    }\n\n    public String getFullName() {\n        return fullName;\n    }\n\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n    }\n\n    public LocalDate getDateOfBirth() {\n        return dateOfBirth;\n    }\n\n    public void setDateOfBirth(LocalDate dateOfBirth) {\n        this.dateOfBirth = dateOfBirth;\n    }\n\n    public Student.Gender getGender() {\n        return gender;\n    }\n\n    public void setGender(Student.Gender gender) {\n        this.gender = gender;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getFullAddress() {\n        return fullAddress;\n    }\n\n    public void setFullAddress(String fullAddress) {\n        this.fullAddress = fullAddress;\n    }\n\n    public LocalDate getEnrollmentDate() {\n        return enrollmentDate;\n    }\n\n    public void setEnrollmentDate(LocalDate enrollmentDate) {\n        this.enrollmentDate = enrollmentDate;\n    }\n\n    public Student.EnrollmentStatus getEnrollmentStatus() {\n        return enrollmentStatus;\n    }\n\n    public void setEnrollmentStatus(Student.EnrollmentStatus enrollmentStatus) {\n        this.enrollmentStatus = enrollmentStatus;\n    }\n\n    public String getGradeLevel() {\n        return gradeLevel;\n    }\n\n    public void setGradeLevel(String gradeLevel) {\n        this.gradeLevel = gradeLevel;\n    }\n\n    public String getProgram() {\n        return program;\n    }\n\n    public void setProgram(String program) {\n        this.program = program;\n    }\n\n    public String getMajor() {\n        return major;\n    }\n\n    public void setMajor(String major) {\n        this.major = major;\n    }\n\n    public Double getGpa() {\n        return gpa;\n    }\n\n    public void setGpa(Double gpa) {\n        this.gpa = gpa;\n    }\n\n    public String getProfilePictureUrl() {\n        return profilePictureUrl;\n    }\n\n    public void setProfilePictureUrl(String profilePictureUrl) {\n        this.profilePictureUrl = profilePictureUrl;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    public String getEmergencyContactName() {\n        return emergencyContactName;\n    }\n\n    public void setEmergencyContactName(String emergencyContactName) {\n        this.emergencyContactName = emergencyContactName;\n    }\n\n    public String getEmergencyContactPhone() {\n        return emergencyContactPhone;\n    }\n\n    public void setEmergencyContactPhone(String emergencyContactPhone) {\n        this.emergencyContactPhone = emergencyContactPhone;\n    }\n\n    public String getEmergencyContactRelationship() {\n        return emergencyContactRelationship;\n    }\n\n    public void setEmergencyContactRelationship(String emergencyContactRelationship) {\n        this.emergencyContactRelationship = emergencyContactRelationship;\n    }\n\n    public Integer getAge() {\n        return age;\n    }\n\n    public void setAge(Integer age) {\n        this.age = age;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean isActive) {\n        this.isActive = isActive;\n    }\n\n    public LocalDateTime getCreatedDate() {\n        return createdDate;\n    }\n\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = createdDate;\n    }\n\n    public String getCreatedBy() {\n        return createdBy;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    public LocalDateTime getUpdatedDate() {\n        return updatedDate;\n    }\n\n    public void setUpdatedDate(LocalDateTime updatedDate) {\n        this.updatedDate = updatedDate;\n    }\n\n    public String getUpdatedBy() {\n        return updatedBy;\n    }\n\n    public void setUpdatedBy(String updatedBy) {\n        this.updatedBy = updatedBy;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        StudentResponse that = (StudentResponse) o;\n        return Objects.equals(id, that.id) &&\n                Objects.equals(studentNumber, that.studentNumber) &&\n                Objects.equals(email, that.email);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, studentNumber, email);\n    }\n\n    @Override\n    public String toString() {\n        return \"StudentResponse{\" +\n                \"id=\" + id +\n                \", studentNumber='\" + studentNumber + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", enrollmentStatus=\" + enrollmentStatus +\n                \", isActive=\" + isActive +\n                '}';\n    }\n}\n","path":null,"size_bytes":17782,"size_tokens":null},"src/main/java/com/educationerp/inventory/entity/StudentProductDistribution.java":{"content":"package com.educationerp.inventory.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotNull;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * Student Product Distribution entity for the Education ERP System\n * Tracks distribution of educational products to students\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"student_product_distributions\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"student_id\", \"product_id\", \"distribution_date\"})\n       })\npublic class StudentProductDistribution extends BaseEntity {\n\n    @NotNull(message = \"Student ID is required\")\n    @Column(name = \"student_id\", nullable = false)\n    private Long studentId;\n\n    @NotNull(message = \"Product ID is required\")\n    @Column(name = \"product_id\", nullable = false)\n    private Long productId;\n\n    @Column(name = \"package_id\")\n    private Long packageId;\n\n    @NotNull(message = \"Distribution date is required\")\n    @Column(name = \"distribution_date\", nullable = false)\n    private LocalDate distributionDate;\n\n    @Column(name = \"return_date\")\n    private LocalDate returnDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"distribution_type\", nullable = false)\n    private DistributionType distributionType = DistributionType.SALE;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private DistributionStatus status = DistributionStatus.ACTIVE;\n\n    @Column(name = \"quantity\", nullable = false)\n    private Integer quantity = 1;\n\n    @Column(name = \"unit_price\", precision = 10, scale = 2)\n    private BigDecimal unitPrice;\n\n    @Column(name = \"total_price\", precision = 10, scale = 2)\n    private BigDecimal totalPrice;\n\n    @Column(name = \"discount_amount\", precision = 10, scale = 2)\n    private BigDecimal discountAmount;\n\n    @Column(name = \"final_price\", precision = 10, scale = 2)\n    private BigDecimal finalPrice;\n\n    @Column(name = \"is_paid\", nullable = false)\n    private Boolean isPaid = false;\n\n    @Column(name = \"payment_due_date\")\n    private LocalDate paymentDueDate;\n\n    @Column(name = \"payment_date\")\n    private LocalDate paymentDate;\n\n    @Column(name = \"rental_duration_days\")\n    private Integer rentalDurationDays;\n\n    @Column(name = \"rental_return_due_date\")\n    private LocalDate rentalReturnDueDate;\n\n    @Column(name = \"late_fee\", precision = 10, scale = 2)\n    private BigDecimal lateFee;\n\n    @Column(name = \"condition_on_distribution\", length = 100)\n    private String conditionOnDistribution;\n\n    @Column(name = \"condition_on_return\", length = 100)\n    private String conditionOnReturn;\n\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public StudentProductDistribution() {\n    }\n\n    public StudentProductDistribution(Long studentId, Long productId, Long packageId, \n                                    LocalDate distributionDate, DistributionType distributionType, \n                                    DistributionStatus status, Integer quantity, BigDecimal unitPrice, \n                                    BigDecimal totalPrice, BigDecimal finalPrice, Boolean isPaid) {\n        this.studentId = studentId;\n        this.productId = productId;\n        this.packageId = packageId;\n        this.distributionDate = distributionDate;\n        this.distributionType = distributionType;\n        this.status = status;\n        this.quantity = quantity;\n        this.unitPrice = unitPrice;\n        this.totalPrice = totalPrice;\n        this.finalPrice = finalPrice;\n        this.isPaid = isPaid;\n    }\n\n    // Getters and Setters\n    public Long getStudentId() {\n        return studentId;\n    }\n\n    public void setStudentId(Long studentId) {\n        this.studentId = studentId;\n    }\n\n    public Long getProductId() {\n        return productId;\n    }\n\n    public void setProductId(Long productId) {\n        this.productId = productId;\n    }\n\n    public Long getPackageId() {\n        return packageId;\n    }\n\n    public void setPackageId(Long packageId) {\n        this.packageId = packageId;\n    }\n\n    public LocalDate getDistributionDate() {\n        return distributionDate;\n    }\n\n    public void setDistributionDate(LocalDate distributionDate) {\n        this.distributionDate = distributionDate;\n    }\n\n    public LocalDate getReturnDate() {\n        return returnDate;\n    }\n\n    public void setReturnDate(LocalDate returnDate) {\n        this.returnDate = returnDate;\n    }\n\n    public DistributionType getDistributionType() {\n        return distributionType;\n    }\n\n    public void setDistributionType(DistributionType distributionType) {\n        this.distributionType = distributionType;\n    }\n\n    public DistributionStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(DistributionStatus status) {\n        this.status = status;\n    }\n\n    public Integer getQuantity() {\n        return quantity;\n    }\n\n    public void setQuantity(Integer quantity) {\n        this.quantity = quantity;\n    }\n\n    public BigDecimal getUnitPrice() {\n        return unitPrice;\n    }\n\n    public void setUnitPrice(BigDecimal unitPrice) {\n        this.unitPrice = unitPrice;\n    }\n\n    public BigDecimal getTotalPrice() {\n        return totalPrice;\n    }\n\n    public void setTotalPrice(BigDecimal totalPrice) {\n        this.totalPrice = totalPrice;\n    }\n\n    public BigDecimal getDiscountAmount() {\n        return discountAmount;\n    }\n\n    public void setDiscountAmount(BigDecimal discountAmount) {\n        this.discountAmount = discountAmount;\n    }\n\n    public BigDecimal getFinalPrice() {\n        return finalPrice;\n    }\n\n    public void setFinalPrice(BigDecimal finalPrice) {\n        this.finalPrice = finalPrice;\n    }\n\n    public Boolean getIsPaid() {\n        return isPaid;\n    }\n\n    public void setIsPaid(Boolean isPaid) {\n        this.isPaid = isPaid;\n    }\n\n    public LocalDate getPaymentDueDate() {\n        return paymentDueDate;\n    }\n\n    public void setPaymentDueDate(LocalDate paymentDueDate) {\n        this.paymentDueDate = paymentDueDate;\n    }\n\n    public LocalDate getPaymentDate() {\n        return paymentDate;\n    }\n\n    public void setPaymentDate(LocalDate paymentDate) {\n        this.paymentDate = paymentDate;\n    }\n\n    public Integer getRentalDurationDays() {\n        return rentalDurationDays;\n    }\n\n    public void setRentalDurationDays(Integer rentalDurationDays) {\n        this.rentalDurationDays = rentalDurationDays;\n    }\n\n    public LocalDate getRentalReturnDueDate() {\n        return rentalReturnDueDate;\n    }\n\n    public void setRentalReturnDueDate(LocalDate rentalReturnDueDate) {\n        this.rentalReturnDueDate = rentalReturnDueDate;\n    }\n\n    public BigDecimal getLateFee() {\n        return lateFee;\n    }\n\n    public void setLateFee(BigDecimal lateFee) {\n        this.lateFee = lateFee;\n    }\n\n    public String getConditionOnDistribution() {\n        return conditionOnDistribution;\n    }\n\n    public void setConditionOnDistribution(String conditionOnDistribution) {\n        this.conditionOnDistribution = conditionOnDistribution;\n    }\n\n    public String getConditionOnReturn() {\n        return conditionOnReturn;\n    }\n\n    public void setConditionOnReturn(String conditionOnReturn) {\n        this.conditionOnReturn = conditionOnReturn;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isActive() {\n        return status == DistributionStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isRental() {\n        return distributionType == DistributionType.RENTAL;\n    }\n\n    public boolean isSale() {\n        return distributionType == DistributionType.SALE;\n    }\n\n    public boolean isOverdue() {\n        if (paymentDueDate != null && !isPaid) {\n            return paymentDueDate.isBefore(LocalDate.now());\n        }\n        if (rentalReturnDueDate != null && isRental()) {\n            return rentalReturnDueDate.isBefore(LocalDate.now());\n        }\n        return false;\n    }\n\n    public boolean isReturned() {\n        return returnDate != null;\n    }\n\n    public void markAsPaid() {\n        this.isPaid = true;\n        this.paymentDate = LocalDate.now();\n    }\n\n    public void markAsReturned() {\n        this.returnDate = LocalDate.now();\n        this.status = DistributionStatus.RETURNED;\n    }\n\n    public void markAsLost() {\n        this.status = DistributionStatus.LOST;\n    }\n\n    public void markAsDamaged() {\n        this.status = DistributionStatus.DAMAGED;\n    }\n\n    public void calculateFinalPrice() {\n        if (totalPrice != null && discountAmount != null) {\n            this.finalPrice = totalPrice.subtract(discountAmount);\n        } else {\n            this.finalPrice = totalPrice;\n        }\n    }\n\n    public void calculateRentalReturnDueDate() {\n        if (distributionDate != null && rentalDurationDays != null) {\n            this.rentalReturnDueDate = distributionDate.plusDays(rentalDurationDays);\n        }\n    }\n\n    // Enums\n    public enum DistributionType {\n        SALE, RENTAL, LOAN, FREE_DISTRIBUTION\n    }\n\n    public enum DistributionStatus {\n        ACTIVE, RETURNED, LOST, DAMAGED, OVERDUE, CANCELLED\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        StudentProductDistribution that = (StudentProductDistribution) o;\n        return Objects.equals(studentId, that.studentId) &&\n                Objects.equals(productId, that.productId) &&\n                Objects.equals(distributionDate, that.distributionDate);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), studentId, productId, distributionDate);\n    }\n\n    @Override\n    public String toString() {\n        return \"StudentProductDistribution{\" +\n                \"id=\" + getId() +\n                \", studentId=\" + studentId +\n                \", productId=\" + productId +\n                \", distributionDate=\" + distributionDate +\n                \", distributionType=\" + distributionType +\n                \", status=\" + status +\n                \", quantity=\" + quantity +\n                \", finalPrice=\" + finalPrice +\n                \", isPaid=\" + isPaid +\n                '}';\n    }\n}\n","path":null,"size_bytes":10501,"size_tokens":null},"src/main/java/com/educationerp/institution_management/entity/Branch.java":{"content":"package com.educationerp.institution_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Objects;\n\n/**\n * Branch entity for the Education ERP System\n * Represents branches of educational institutions\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"branches\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"code\"})\n       })\npublic class Branch extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @NotBlank(message = \"Branch name is required\")\n    @Size(max = 200, message = \"Branch name must not exceed 200 characters\")\n    @Column(name = \"name\", nullable = false, length = 200)\n    private String name;\n\n    @NotBlank(message = \"Branch code is required\")\n    @Size(max = 20, message = \"Branch code must not exceed 20 characters\")\n    @Column(name = \"code\", nullable = false, length = 20)\n    private String code;\n\n    @Size(max = 500, message = \"Description must not exceed 500 characters\")\n    @Column(name = \"description\", length = 500)\n    private String description;\n\n    @NotBlank(message = \"Address is required\")\n    @Size(max = 500, message = \"Address must not exceed 500 characters\")\n    @Column(name = \"address\", nullable = false, length = 500)\n    private String address;\n\n    @Size(max = 100, message = \"City must not exceed 100 characters\")\n    @Column(name = \"city\", length = 100)\n    private String city;\n\n    @Size(max = 100, message = \"State must not exceed 100 characters\")\n    @Column(name = \"state\", length = 100)\n    private String state;\n\n    @Size(max = 20, message = \"Postal code must not exceed 20 characters\")\n    @Column(name = \"postal_code\", length = 20)\n    private String postalCode;\n\n    @Size(max = 100, message = \"Country must not exceed 100 characters\")\n    @Column(name = \"country\", length = 100)\n    private String country;\n\n    @NotBlank(message = \"Phone number is required\")\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    @Column(name = \"phone_number\", nullable = false, length = 20)\n    private String phoneNumber;\n\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    @Column(name = \"email\", length = 100)\n    private String email;\n\n    @Size(max = 200, message = \"Website URL must not exceed 200 characters\")\n    @Column(name = \"website_url\", length = 200)\n    private String websiteUrl;\n\n    @Column(name = \"is_active\", nullable = false)\n    private Boolean isActive = true;\n\n    @Size(max = 500, message = \"Logo URL must not exceed 500 characters\")\n    @Column(name = \"logo_url\", length = 500)\n    private String logoUrl;\n\n    @Size(max = 1000, message = \"Settings JSON must not exceed 1000 characters\")\n    @Column(name = \"settings_json\", length = 1000)\n    private String settingsJson;\n\n    // Constructors\n    public Branch() {\n    }\n\n    public Branch(Long institutionId, String name, String code, String description, \n                  String address, String city, String state, String postalCode, \n                  String country, String phoneNumber, String email, String websiteUrl) {\n        this.institutionId = institutionId;\n        this.name = name;\n        this.code = code;\n        this.description = description;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.websiteUrl = websiteUrl;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getWebsiteUrl() {\n        return websiteUrl;\n    }\n\n    public void setWebsiteUrl(String websiteUrl) {\n        this.websiteUrl = websiteUrl;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean isActive) {\n        this.isActive = isActive;\n    }\n\n    public String getLogoUrl() {\n        return logoUrl;\n    }\n\n    public void setLogoUrl(String logoUrl) {\n        this.logoUrl = logoUrl;\n    }\n\n    public String getSettingsJson() {\n        return settingsJson;\n    }\n\n    public void setSettingsJson(String settingsJson) {\n        this.settingsJson = settingsJson;\n    }\n\n    // Business methods\n    public String getFullAddress() {\n        StringBuilder address = new StringBuilder();\n        if (this.address != null) address.append(this.address);\n        if (this.city != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.city);\n        }\n        if (this.state != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.state);\n        }\n        if (this.postalCode != null) {\n            if (address.length() > 0) address.append(\" \");\n            address.append(this.postalCode);\n        }\n        if (this.country != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.country);\n        }\n        return address.toString();\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Branch branch = (Branch) o;\n        return Objects.equals(institutionId, branch.institutionId) &&\n                Objects.equals(code, branch.code);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, code);\n    }\n\n    @Override\n    public String toString() {\n        return \"Branch{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", name='\" + name + '\\'' +\n                \", code='\" + code + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":7897,"size_tokens":null},"src/main/java/com/educationerp/inventory/entity/ProductPackage.java":{"content":"package com.educationerp.inventory.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.math.BigDecimal;\nimport java.util.Objects;\n\n/**\n * Product Package entity for the Education ERP System\n * Represents bundled educational products with discounted pricing\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"product_packages\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"package_code\"})\n       })\npublic class ProductPackage extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotBlank(message = \"Package code is required\")\n    @Size(max = 50, message = \"Package code must not exceed 50 characters\")\n    @Column(name = \"package_code\", nullable = false, length = 50)\n    private String packageCode;\n\n    @NotBlank(message = \"Package name is required\")\n    @Size(max = 200, message = \"Package name must not exceed 200 characters\")\n    @Column(name = \"package_name\", nullable = false, length = 200)\n    private String packageName;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"package_type\", nullable = false)\n    private PackageType packageType = PackageType.STANDARD;\n\n    @Column(name = \"total_price\", precision = 10, scale = 2)\n    private BigDecimal totalPrice;\n\n    @Column(name = \"discounted_price\", precision = 10, scale = 2)\n    private BigDecimal discountedPrice;\n\n    @Column(name = \"discount_percentage\")\n    private BigDecimal discountPercentage;\n\n    @Column(name = \"discount_amount\", precision = 10, scale = 2)\n    private BigDecimal discountAmount;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private PackageStatus status = PackageStatus.ACTIVE;\n\n    @Column(name = \"is_mandatory\", nullable = false)\n    private Boolean isMandatory = false;\n\n    @Column(name = \"is_rental_available\", nullable = false)\n    private Boolean isRentalAvailable = false;\n\n    @Column(name = \"rental_price\", precision = 10, scale = 2)\n    private BigDecimal rentalPrice;\n\n    @Size(max = 50, message = \"Grade level must not exceed 50 characters\")\n    @Column(name = \"grade_level\", length = 50)\n    private String gradeLevel;\n\n    @Size(max = 100, message = \"Subject must not exceed 100 characters\")\n    @Column(name = \"subject\", length = 100)\n    private String subject;\n\n    @Size(max = 100, message = \"Program must not exceed 100 characters\")\n    @Column(name = \"program\", length = 100)\n    private String program;\n\n    @Size(max = 500, message = \"Image URL must not exceed 500 characters\")\n    @Column(name = \"image_url\", length = 500)\n    private String imageUrl;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public ProductPackage() {\n    }\n\n    public ProductPackage(Long institutionId, Long branchId, String packageCode, String packageName, \n                         String description, PackageType packageType, BigDecimal totalPrice, \n                         BigDecimal discountedPrice, BigDecimal discountPercentage, BigDecimal discountAmount, \n                         PackageStatus status, Boolean isMandatory, Boolean isRentalAvailable, \n                         BigDecimal rentalPrice, String gradeLevel, String subject, String program) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.packageCode = packageCode;\n        this.packageName = packageName;\n        this.description = description;\n        this.packageType = packageType;\n        this.totalPrice = totalPrice;\n        this.discountedPrice = discountedPrice;\n        this.discountPercentage = discountPercentage;\n        this.discountAmount = discountAmount;\n        this.status = status;\n        this.isMandatory = isMandatory;\n        this.isRentalAvailable = isRentalAvailable;\n        this.rentalPrice = rentalPrice;\n        this.gradeLevel = gradeLevel;\n        this.subject = subject;\n        this.program = program;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getPackageCode() {\n        return packageCode;\n    }\n\n    public void setPackageCode(String packageCode) {\n        this.packageCode = packageCode;\n    }\n\n    public String getPackageName() {\n        return packageName;\n    }\n\n    public void setPackageName(String packageName) {\n        this.packageName = packageName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public PackageType getPackageType() {\n        return packageType;\n    }\n\n    public void setPackageType(PackageType packageType) {\n        this.packageType = packageType;\n    }\n\n    public BigDecimal getTotalPrice() {\n        return totalPrice;\n    }\n\n    public void setTotalPrice(BigDecimal totalPrice) {\n        this.totalPrice = totalPrice;\n    }\n\n    public BigDecimal getDiscountedPrice() {\n        return discountedPrice;\n    }\n\n    public void setDiscountedPrice(BigDecimal discountedPrice) {\n        this.discountedPrice = discountedPrice;\n    }\n\n    public BigDecimal getDiscountPercentage() {\n        return discountPercentage;\n    }\n\n    public void setDiscountPercentage(BigDecimal discountPercentage) {\n        this.discountPercentage = discountPercentage;\n    }\n\n    public BigDecimal getDiscountAmount() {\n        return discountAmount;\n    }\n\n    public void setDiscountAmount(BigDecimal discountAmount) {\n        this.discountAmount = discountAmount;\n    }\n\n    public PackageStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(PackageStatus status) {\n        this.status = status;\n    }\n\n    public Boolean getIsMandatory() {\n        return isMandatory;\n    }\n\n    public void setIsMandatory(Boolean isMandatory) {\n        this.isMandatory = isMandatory;\n    }\n\n    public Boolean getIsRentalAvailable() {\n        return isRentalAvailable;\n    }\n\n    public void setIsRentalAvailable(Boolean isRentalAvailable) {\n        this.isRentalAvailable = isRentalAvailable;\n    }\n\n    public BigDecimal getRentalPrice() {\n        return rentalPrice;\n    }\n\n    public void setRentalPrice(BigDecimal rentalPrice) {\n        this.rentalPrice = rentalPrice;\n    }\n\n    public String getGradeLevel() {\n        return gradeLevel;\n    }\n\n    public void setGradeLevel(String gradeLevel) {\n        this.gradeLevel = gradeLevel;\n    }\n\n    public String getSubject() {\n        return subject;\n    }\n\n    public void setSubject(String subject) {\n        this.subject = subject;\n    }\n\n    public String getProgram() {\n        return program;\n    }\n\n    public void setProgram(String program) {\n        this.program = program;\n    }\n\n    public String getImageUrl() {\n        return imageUrl;\n    }\n\n    public void setImageUrl(String imageUrl) {\n        this.imageUrl = imageUrl;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isActive() {\n        return status == PackageStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean hasDiscount() {\n        return discountPercentage != null && discountPercentage.compareTo(BigDecimal.ZERO) > 0;\n    }\n\n    public BigDecimal getEffectivePrice() {\n        return discountedPrice != null ? discountedPrice : totalPrice;\n    }\n\n    public BigDecimal calculateDiscountAmount() {\n        if (totalPrice != null && discountPercentage != null) {\n            return totalPrice.multiply(discountPercentage.divide(new BigDecimal(\"100\")));\n        }\n        return discountAmount;\n    }\n\n    public void activate() {\n        this.status = PackageStatus.ACTIVE;\n    }\n\n    public void deactivate() {\n        this.status = PackageStatus.INACTIVE;\n    }\n\n    public void discontinue() {\n        this.status = PackageStatus.DISCONTINUED;\n    }\n\n    // Enums\n    public enum PackageType {\n        STANDARD, PREMIUM, GOLD, PLATINUM, CUSTOM, MOCK_EXAM_PACKAGE, STUDY_PACKAGE, COMPLETE_PACKAGE\n    }\n\n    public enum PackageStatus {\n        ACTIVE, INACTIVE, DISCONTINUED, DRAFT\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        ProductPackage that = (ProductPackage) o;\n        return Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(packageCode, that.packageCode);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, packageCode);\n    }\n\n    @Override\n    public String toString() {\n        return \"ProductPackage{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", packageCode='\" + packageCode + '\\'' +\n                \", packageName='\" + packageName + '\\'' +\n                \", status=\" + status +\n                \", totalPrice=\" + totalPrice +\n                \", discountedPrice=\" + discountedPrice +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":10014,"size_tokens":null},"src/main/java/com/educationerp/security/jwt/JwtUtil.java":{"content":"package com.educationerp.security.jwt;\n\nimport com.educationerp.security.enums.Role;\nimport io.jsonwebtoken.*;\nimport io.jsonwebtoken.security.Keys;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Component;\n\nimport javax.crypto.SecretKey;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Function;\n\n/**\n * JWT utility class for token generation, validation, and extraction\n * Supports scenario-based token expiration for different user types\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Component\npublic class JwtUtil {\n\n    private static final Logger logger = LoggerFactory.getLogger(JwtUtil.class);\n\n    @Value(\"${jwt.secret:education-erp-secret-key-that-should-be-at-least-256-bits-long}\")\n    private String secret;\n\n    @Value(\"${jwt.access-token.expiration:1800000}\") // 30 minutes default\n    private Long accessTokenExpiration;\n\n    @Value(\"${jwt.refresh-token.expiration:86400000}\") // 24 hours default\n    private Long refreshTokenExpiration;\n\n    @Value(\"${jwt.readonly-access-token.expiration:86400000}\") // 24 hours for read-only users\n    private Long readonlyAccessTokenExpiration;\n\n    @Value(\"${jwt.readonly-refresh-token.expiration:2592000000}\") // 30 days for read-only users\n    private Long readonlyRefreshTokenExpiration;\n\n    /**\n     * Generate access token for user\n     */\n    public String generateAccessToken(UserDetails userDetails, String tenantId, Role role) {\n        Map<String, Object> claims = new HashMap<>();\n        claims.put(\"tenantId\", tenantId);\n        claims.put(\"role\", role.name());\n        claims.put(\"tokenType\", \"access\");\n        \n        return createToken(claims, userDetails.getUsername(), getAccessTokenExpiration(role));\n    }\n\n    /**\n     * Generate refresh token for user\n     */\n    public String generateRefreshToken(UserDetails userDetails, String tenantId, Role role) {\n        Map<String, Object> claims = new HashMap<>();\n        claims.put(\"tenantId\", tenantId);\n        claims.put(\"role\", role.name());\n        claims.put(\"tokenType\", \"refresh\");\n        \n        return createToken(claims, userDetails.getUsername(), getRefreshTokenExpiration(role));\n    }\n\n    /**\n     * Create JWT token with claims\n     */\n    private String createToken(Map<String, Object> claims, String subject, Long expiration) {\n        return Jwts.builder()\n                .claims(claims)\n                .subject(subject)\n                .issuedAt(new Date(System.currentTimeMillis()))\n                .expiration(new Date(System.currentTimeMillis() + expiration))\n                .signWith(getSigningKey(), Jwts.SIG.HS256)\n                .compact();\n    }\n\n    /**\n     * Extract username from token\n     */\n    public String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\n    /**\n     * Extract tenant ID from token\n     */\n    public String extractTenantId(String token) {\n        return extractClaim(token, claims -> claims.get(\"tenantId\", String.class));\n    }\n\n    /**\n     * Extract role from token\n     */\n    public Role extractRole(String token) {\n        String roleStr = extractClaim(token, claims -> claims.get(\"role\", String.class));\n        return Role.valueOf(roleStr);\n    }\n\n    /**\n     * Extract token type from token\n     */\n    public String extractTokenType(String token) {\n        return extractClaim(token, claims -> claims.get(\"tokenType\", String.class));\n    }\n\n    /**\n     * Extract expiration date from token\n     */\n    public Date extractExpiration(String token) {\n        return extractClaim(token, Claims::getExpiration);\n    }\n\n    /**\n     * Extract specific claim from token\n     */\n    public <T> T extractClaim(String token, Function<Claims, T> claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n\n    /**\n     * Extract all claims from token\n     */\n    private Claims extractAllClaims(String token) {\n        return Jwts.parser()\n                .verifyWith(getSigningKey())\n                .build()\n                .parseSignedClaims(token)\n                .getPayload();\n    }\n\n    /**\n     * Check if token is expired\n     */\n    public Boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n\n    /**\n     * Validate token\n     */\n    public Boolean validateToken(String token, UserDetails userDetails) {\n        final String username = extractUsername(token);\n        return (username.equals(userDetails.getUsername()) && !isTokenExpired(token));\n    }\n\n    /**\n     * Check if token is a refresh token\n     */\n    public Boolean isRefreshToken(String token) {\n        return \"refresh\".equals(extractTokenType(token));\n    }\n\n    /**\n     * Check if token is an access token\n     */\n    public Boolean isAccessToken(String token) {\n        return \"access\".equals(extractTokenType(token));\n    }\n\n    /**\n     * Get signing key\n     */\n    private SecretKey getSigningKey() {\n        byte[] keyBytes = secret.getBytes();\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n\n    /**\n     * Get access token expiration based on role\n     */\n    private Long getAccessTokenExpiration(Role role) {\n        if (role.isReadOnly()) {\n            return readonlyAccessTokenExpiration;\n        }\n        return accessTokenExpiration;\n    }\n\n    /**\n     * Get refresh token expiration based on role\n     */\n    private Long getRefreshTokenExpiration(Role role) {\n        if (role.isReadOnly()) {\n            return readonlyRefreshTokenExpiration;\n        }\n        return refreshTokenExpiration;\n    }\n\n    /**\n     * Parse token and handle exceptions\n     */\n    public Claims parseToken(String token) {\n        try {\n            return Jwts.parser()\n                    .verifyWith(getSigningKey())\n                    .build()\n                    .parseSignedClaims(token)\n                    .getPayload();\n        } catch (ExpiredJwtException e) {\n            logger.warn(\"JWT token is expired: {}\", e.getMessage());\n            throw e;\n        } catch (UnsupportedJwtException e) {\n            logger.error(\"JWT token is unsupported: {}\", e.getMessage());\n            throw e;\n        } catch (MalformedJwtException e) {\n            logger.error(\"JWT token is malformed: {}\", e.getMessage());\n            throw e;\n        } catch (SecurityException e) {\n            logger.error(\"JWT signature validation failed: {}\", e.getMessage());\n            throw e;\n        } catch (IllegalArgumentException e) {\n            logger.error(\"JWT token compact of handler are invalid: {}\", e.getMessage());\n            throw e;\n        }\n    }\n}\n","path":null,"size_bytes":6823,"size_tokens":null},"src/main/java/com/educationerp/security/config/SecurityConfig.java":{"content":"package com.educationerp.security.config;\n\nimport com.educationerp.security.jwt.JwtAuthenticationFilter;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.CorsConfigurationSource;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\n\nimport java.util.Arrays;\n\n/**\n * Security configuration for the Education ERP System\n * Configures JWT authentication, CORS, and security policies\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig {\n\n    @Autowired\n    private JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .csrf(AbstractHttpConfigurer::disable)\n            .cors(cors -> cors.configurationSource(corsConfigurationSource()))\n            .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n            .authorizeHttpRequests(authz -> authz\n                // Public endpoints\n                .requestMatchers(\"/api/auth/**\").permitAll()\n                .requestMatchers(\"/api/public/**\").permitAll()\n                .requestMatchers(\"/actuator/health\").permitAll()\n                .requestMatchers(\"/swagger-ui/**\").permitAll()\n                .requestMatchers(\"/v3/api-docs/**\").permitAll()\n                .requestMatchers(\"/swagger-resources/**\").permitAll()\n                .requestMatchers(\"/webjars/**\").permitAll()\n                \n                // Admin endpoints\n                .requestMatchers(\"/api/admin/**\").hasRole(\"SUPER_ADMIN\")\n                \n                // Institution admin endpoints\n                .requestMatchers(\"/api/institution/**\").hasAnyRole(\"SUPER_ADMIN\", \"INSTITUTION_ADMIN\")\n                \n                // Branch manager endpoints\n                .requestMatchers(\"/api/branch/**\").hasAnyRole(\"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\")\n                \n                // Course manager endpoints\n                .requestMatchers(\"/api/course/**\").hasAnyRole(\"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\", \"COURSE_MANAGER\")\n                \n                // Teacher endpoints\n                .requestMatchers(\"/api/teacher/**\").hasAnyRole(\"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\", \"TEACHER\")\n                \n                // Student endpoints\n                .requestMatchers(\"/api/student/**\").hasAnyRole(\"STUDENT\", \"PARENT\", \"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\", \"TEACHER\")\n                \n                // Parent endpoints\n                .requestMatchers(\"/api/parent/**\").hasAnyRole(\"PARENT\", \"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\")\n                \n                // Payment endpoints\n                .requestMatchers(\"/api/payment/**\").hasAnyRole(\"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\", \"ACCOUNTANT\")\n                \n                // Report endpoints\n                .requestMatchers(\"/api/reports/**\").hasAnyRole(\"SUPER_ADMIN\", \"INSTITUTION_ADMIN\", \"BRANCH_MANAGER\", \"REPORT_VIEWER\", \"ACCOUNTANT\")\n                \n                // All other requests need authentication\n                .anyRequest().authenticated()\n            )\n            .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n        return authConfig.getAuthenticationManager();\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOriginPatterns(Arrays.asList(\"*\"));\n        configuration.setAllowedMethods(Arrays.asList(\"GET\", \"POST\", \"PUT\", \"DELETE\", \"OPTIONS\"));\n        configuration.setAllowedHeaders(Arrays.asList(\"*\"));\n        configuration.setAllowCredentials(true);\n        \n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(\"/**\", configuration);\n        return source;\n    }\n}\n","path":null,"size_bytes":5432,"size_tokens":null},"src/main/java/com/educationerp/security/enums/TenantType.java":{"content":"package com.educationerp.security.enums;\n\n/**\n * Tenant deployment type in multi-tenant architecture\n * Defines how data is isolated for different institutions\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic enum TenantType {\n    SHARED_SCHEMA(\"Shared Schema\", \"All tenants share the same database schema\"),\n    DEDICATED_DB(\"Dedicated Database\", \"Each tenant has its own database\"),\n    ON_PREMISE(\"On-Premise\", \"Self-hosted deployment with local infrastructure\");\n\n    private final String displayName;\n    private final String description;\n\n    TenantType(String displayName, String description) {\n        this.displayName = displayName;\n        this.description = description;\n    }\n\n    public String getDisplayName() {\n        return displayName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    @Override\n    public String toString() {\n        return name();\n    }\n}\n\n","path":null,"size_bytes":924,"size_tokens":null},"src/main/java/com/educationerp/course_management/entity/Course.java":{"content":"package com.educationerp.course_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * Course entity for the Education ERP System\n * Represents courses offered by educational institutions\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"courses\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"course_code\"})\n       })\npublic class Course extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotBlank(message = \"Course code is required\")\n    @Size(max = 20, message = \"Course code must not exceed 20 characters\")\n    @Column(name = \"course_code\", nullable = false, length = 20)\n    private String courseCode;\n\n    @NotBlank(message = \"Course name is required\")\n    @Size(max = 200, message = \"Course name must not exceed 200 characters\")\n    @Column(name = \"course_name\", nullable = false, length = 200)\n    private String courseName;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Size(max = 100, message = \"Subject must not exceed 100 characters\")\n    @Column(name = \"subject\", length = 100)\n    private String subject;\n\n    @Size(max = 50, message = \"Grade level must not exceed 50 characters\")\n    @Column(name = \"grade_level\", length = 50)\n    private String gradeLevel;\n\n    @Column(name = \"credits\")\n    private Integer credits;\n\n    @Column(name = \"duration_hours\")\n    private Integer durationHours;\n\n    @Column(name = \"max_students\")\n    private Integer maxStudents;\n\n    @Column(name = \"current_students\")\n    private Integer currentStudents = 0;\n\n    @NotNull(message = \"Start date is required\")\n    @Column(name = \"start_date\", nullable = false)\n    private LocalDate startDate;\n\n    @Column(name = \"end_date\")\n    private LocalDate endDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private CourseStatus status = CourseStatus.ACTIVE;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"type\", nullable = false)\n    private CourseType type = CourseType.REGULAR;\n\n    @Column(name = \"fee\", precision = 10, scale = 2)\n    private BigDecimal fee;\n\n    @Column(name = \"is_online\", nullable = false)\n    private Boolean isOnline = false;\n\n    @Size(max = 500, message = \"Location must not exceed 500 characters\")\n    @Column(name = \"location\", length = 500)\n    private String location;\n\n    @Size(max = 100, message = \"Instructor name must not exceed 100 characters\")\n    @Column(name = \"instructor_name\", length = 100)\n    private String instructorName;\n\n    @Column(name = \"instructor_id\")\n    private Long instructorId;\n\n    @Size(max = 1000, message = \"Prerequisites must not exceed 1000 characters\")\n    @Column(name = \"prerequisites\", length = 1000)\n    private String prerequisites;\n\n    @Size(max = 1000, message = \"Learning objectives must not exceed 1000 characters\")\n    @Column(name = \"learning_objectives\", length = 1000)\n    private String learningObjectives;\n\n    @Size(max = 1000, message = \"Course materials must not exceed 1000 characters\")\n    @Column(name = \"course_materials\", length = 1000)\n    private String courseMaterials;\n\n    @Size(max = 1000, message = \"Assessment methods must not exceed 1000 characters\")\n    @Column(name = \"assessment_methods\", length = 1000)\n    private String assessmentMethods;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public Course() {\n    }\n\n    public Course(Long institutionId, Long branchId, String courseCode, String courseName, \n                  String description, String subject, String gradeLevel, Integer credits, \n                  Integer durationHours, Integer maxStudents, LocalDate startDate, LocalDate endDate, \n                  CourseStatus status, CourseType type, BigDecimal fee, Boolean isOnline, \n                  String location, String instructorName, Long instructorId) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.courseCode = courseCode;\n        this.courseName = courseName;\n        this.description = description;\n        this.subject = subject;\n        this.gradeLevel = gradeLevel;\n        this.credits = credits;\n        this.durationHours = durationHours;\n        this.maxStudents = maxStudents;\n        this.startDate = startDate;\n        this.endDate = endDate;\n        this.status = status;\n        this.type = type;\n        this.fee = fee;\n        this.isOnline = isOnline;\n        this.location = location;\n        this.instructorName = instructorName;\n        this.instructorId = instructorId;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getCourseCode() {\n        return courseCode;\n    }\n\n    public void setCourseCode(String courseCode) {\n        this.courseCode = courseCode;\n    }\n\n    public String getCourseName() {\n        return courseName;\n    }\n\n    public void setCourseName(String courseName) {\n        this.courseName = courseName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getSubject() {\n        return subject;\n    }\n\n    public void setSubject(String subject) {\n        this.subject = subject;\n    }\n\n    public String getGradeLevel() {\n        return gradeLevel;\n    }\n\n    public void setGradeLevel(String gradeLevel) {\n        this.gradeLevel = gradeLevel;\n    }\n\n    public Integer getCredits() {\n        return credits;\n    }\n\n    public void setCredits(Integer credits) {\n        this.credits = credits;\n    }\n\n    public Integer getDurationHours() {\n        return durationHours;\n    }\n\n    public void setDurationHours(Integer durationHours) {\n        this.durationHours = durationHours;\n    }\n\n    public Integer getMaxStudents() {\n        return maxStudents;\n    }\n\n    public void setMaxStudents(Integer maxStudents) {\n        this.maxStudents = maxStudents;\n    }\n\n    public Integer getCurrentStudents() {\n        return currentStudents;\n    }\n\n    public void setCurrentStudents(Integer currentStudents) {\n        this.currentStudents = currentStudents;\n    }\n\n    public LocalDate getStartDate() {\n        return startDate;\n    }\n\n    public void setStartDate(LocalDate startDate) {\n        this.startDate = startDate;\n    }\n\n    public LocalDate getEndDate() {\n        return endDate;\n    }\n\n    public void setEndDate(LocalDate endDate) {\n        this.endDate = endDate;\n    }\n\n    public CourseStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(CourseStatus status) {\n        this.status = status;\n    }\n\n    public CourseType getType() {\n        return type;\n    }\n\n    public void setType(CourseType type) {\n        this.type = type;\n    }\n\n    public BigDecimal getFee() {\n        return fee;\n    }\n\n    public void setFee(BigDecimal fee) {\n        this.fee = fee;\n    }\n\n    public Boolean getIsOnline() {\n        return isOnline;\n    }\n\n    public void setIsOnline(Boolean isOnline) {\n        this.isOnline = isOnline;\n    }\n\n    public String getLocation() {\n        return location;\n    }\n\n    public void setLocation(String location) {\n        this.location = location;\n    }\n\n    public String getInstructorName() {\n        return instructorName;\n    }\n\n    public void setInstructorName(String instructorName) {\n        this.instructorName = instructorName;\n    }\n\n    public Long getInstructorId() {\n        return instructorId;\n    }\n\n    public void setInstructorId(Long instructorId) {\n        this.instructorId = instructorId;\n    }\n\n    public String getPrerequisites() {\n        return prerequisites;\n    }\n\n    public void setPrerequisites(String prerequisites) {\n        this.prerequisites = prerequisites;\n    }\n\n    public String getLearningObjectives() {\n        return learningObjectives;\n    }\n\n    public void setLearningObjectives(String learningObjectives) {\n        this.learningObjectives = learningObjectives;\n    }\n\n    public String getCourseMaterials() {\n        return courseMaterials;\n    }\n\n    public void setCourseMaterials(String courseMaterials) {\n        this.courseMaterials = courseMaterials;\n    }\n\n    public String getAssessmentMethods() {\n        return assessmentMethods;\n    }\n\n    public void setAssessmentMethods(String assessmentMethods) {\n        this.assessmentMethods = assessmentMethods;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isFull() {\n        return maxStudents != null && currentStudents >= maxStudents;\n    }\n\n    public boolean isActive() {\n        return status == CourseStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isOngoing() {\n        LocalDate today = LocalDate.now();\n        return startDate != null && startDate.isBefore(today) && \n               (endDate == null || endDate.isAfter(today));\n    }\n\n    public boolean isUpcoming() {\n        return startDate != null && startDate.isAfter(LocalDate.now());\n    }\n\n    public boolean isCompleted() {\n        return endDate != null && endDate.isBefore(LocalDate.now());\n    }\n\n    public void incrementStudentCount() {\n        if (currentStudents == null) {\n            currentStudents = 0;\n        }\n        currentStudents++;\n    }\n\n    public void decrementStudentCount() {\n        if (currentStudents != null && currentStudents > 0) {\n            currentStudents--;\n        }\n    }\n\n    public void activate() {\n        this.status = CourseStatus.ACTIVE;\n    }\n\n    public void suspend() {\n        this.status = CourseStatus.SUSPENDED;\n    }\n\n    public void complete() {\n        this.status = CourseStatus.COMPLETED;\n    }\n\n    public void cancel() {\n        this.status = CourseStatus.CANCELLED;\n    }\n\n    // Enums\n    public enum CourseStatus {\n        ACTIVE, SUSPENDED, COMPLETED, CANCELLED, DRAFT\n    }\n\n    public enum CourseType {\n        REGULAR, INTENSIVE, WORKSHOP, SEMINAR, ONLINE, HYBRID, PRIVATE, GROUP\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Course course = (Course) o;\n        return Objects.equals(institutionId, course.institutionId) &&\n                Objects.equals(courseCode, course.courseCode);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, courseCode);\n    }\n\n    @Override\n    public String toString() {\n        return \"Course{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", courseCode='\" + courseCode + '\\'' +\n                \", courseName='\" + courseName + '\\'' +\n                \", status=\" + status +\n                \", type=\" + type +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":11883,"size_tokens":null},"src/main/java/com/educationerp/payment_management/entity/InstallmentPlan.java":{"content":"package com.educationerp.payment_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * Installment Plan entity for the Education ERP System\n * Represents installment payment plans for students\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"installment_plans\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"plan_code\"})\n       })\npublic class InstallmentPlan extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotNull(message = \"Student ID is required\")\n    @Column(name = \"student_id\", nullable = false)\n    private Long studentId;\n\n    @NotBlank(message = \"Plan code is required\")\n    @Size(max = 50, message = \"Plan code must not exceed 50 characters\")\n    @Column(name = \"plan_code\", nullable = false, length = 50)\n    private String planCode;\n\n    @NotBlank(message = \"Plan name is required\")\n    @Size(max = 200, message = \"Plan name must not exceed 200 characters\")\n    @Column(name = \"plan_name\", nullable = false, length = 200)\n    private String planName;\n\n    @NotNull(message = \"Total amount is required\")\n    @Column(name = \"total_amount\", nullable = false, precision = 10, scale = 2)\n    private BigDecimal totalAmount;\n\n    @Column(name = \"down_payment\", precision = 10, scale = 2)\n    private BigDecimal downPayment;\n\n    @Column(name = \"installment_amount\", precision = 10, scale = 2)\n    private BigDecimal installmentAmount;\n\n    @NotNull(message = \"Number of installments is required\")\n    @Column(name = \"number_of_installments\", nullable = false)\n    private Integer numberOfInstallments;\n\n    @Column(name = \"paid_installments\", nullable = false)\n    private Integer paidInstallments = 0;\n\n    @Column(name = \"remaining_installments\", nullable = false)\n    private Integer remainingInstallments;\n\n    @NotNull(message = \"Start date is required\")\n    @Column(name = \"start_date\", nullable = false)\n    private LocalDate startDate;\n\n    @Column(name = \"end_date\")\n    private LocalDate endDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"frequency\", nullable = false)\n    private InstallmentFrequency frequency = InstallmentFrequency.MONTHLY;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private InstallmentStatus status = InstallmentStatus.ACTIVE;\n\n    @Column(name = \"interest_rate\", precision = 5, scale = 2)\n    private BigDecimal interestRate;\n\n    @Column(name = \"total_interest\", precision = 10, scale = 2)\n    private BigDecimal totalInterest;\n\n    @Column(name = \"late_fee_percentage\", precision = 5, scale = 2)\n    private BigDecimal lateFeePercentage;\n\n    @Column(name = \"late_fee_amount\", precision = 10, scale = 2)\n    private BigDecimal lateFeeAmount;\n\n    @Column(name = \"course_id\")\n    private Long courseId;\n\n    @Column(name = \"product_id\")\n    private Long productId;\n\n    @Column(name = \"package_id\")\n    private Long packageId;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Size(max = 1000, message = \"Terms and conditions must not exceed 1000 characters\")\n    @Column(name = \"terms_and_conditions\", length = 1000)\n    private String termsAndConditions;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public InstallmentPlan() {\n    }\n\n    public InstallmentPlan(Long institutionId, Long branchId, Long studentId, String planCode, \n                          String planName, BigDecimal totalAmount, BigDecimal downPayment, \n                          BigDecimal installmentAmount, Integer numberOfInstallments, LocalDate startDate, \n                          LocalDate endDate, InstallmentFrequency frequency, InstallmentStatus status) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.studentId = studentId;\n        this.planCode = planCode;\n        this.planName = planName;\n        this.totalAmount = totalAmount;\n        this.downPayment = downPayment;\n        this.installmentAmount = installmentAmount;\n        this.numberOfInstallments = numberOfInstallments;\n        this.startDate = startDate;\n        this.endDate = endDate;\n        this.frequency = frequency;\n        this.status = status;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public Long getStudentId() {\n        return studentId;\n    }\n\n    public void setStudentId(Long studentId) {\n        this.studentId = studentId;\n    }\n\n    public String getPlanCode() {\n        return planCode;\n    }\n\n    public void setPlanCode(String planCode) {\n        this.planCode = planCode;\n    }\n\n    public String getPlanName() {\n        return planName;\n    }\n\n    public void setPlanName(String planName) {\n        this.planName = planName;\n    }\n\n    public BigDecimal getTotalAmount() {\n        return totalAmount;\n    }\n\n    public void setTotalAmount(BigDecimal totalAmount) {\n        this.totalAmount = totalAmount;\n    }\n\n    public BigDecimal getDownPayment() {\n        return downPayment;\n    }\n\n    public void setDownPayment(BigDecimal downPayment) {\n        this.downPayment = downPayment;\n    }\n\n    public BigDecimal getInstallmentAmount() {\n        return installmentAmount;\n    }\n\n    public void setInstallmentAmount(BigDecimal installmentAmount) {\n        this.installmentAmount = installmentAmount;\n    }\n\n    public Integer getNumberOfInstallments() {\n        return numberOfInstallments;\n    }\n\n    public void setNumberOfInstallments(Integer numberOfInstallments) {\n        this.numberOfInstallments = numberOfInstallments;\n    }\n\n    public Integer getPaidInstallments() {\n        return paidInstallments;\n    }\n\n    public void setPaidInstallments(Integer paidInstallments) {\n        this.paidInstallments = paidInstallments;\n    }\n\n    public Integer getRemainingInstallments() {\n        return remainingInstallments;\n    }\n\n    public void setRemainingInstallments(Integer remainingInstallments) {\n        this.remainingInstallments = remainingInstallments;\n    }\n\n    public LocalDate getStartDate() {\n        return startDate;\n    }\n\n    public void setStartDate(LocalDate startDate) {\n        this.startDate = startDate;\n    }\n\n    public LocalDate getEndDate() {\n        return endDate;\n    }\n\n    public void setEndDate(LocalDate endDate) {\n        this.endDate = endDate;\n    }\n\n    public InstallmentFrequency getFrequency() {\n        return frequency;\n    }\n\n    public void setFrequency(InstallmentFrequency frequency) {\n        this.frequency = frequency;\n    }\n\n    public InstallmentStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(InstallmentStatus status) {\n        this.status = status;\n    }\n\n    public BigDecimal getInterestRate() {\n        return interestRate;\n    }\n\n    public void setInterestRate(BigDecimal interestRate) {\n        this.interestRate = interestRate;\n    }\n\n    public BigDecimal getTotalInterest() {\n        return totalInterest;\n    }\n\n    public void setTotalInterest(BigDecimal totalInterest) {\n        this.totalInterest = totalInterest;\n    }\n\n    public BigDecimal getLateFeePercentage() {\n        return lateFeePercentage;\n    }\n\n    public void setLateFeePercentage(BigDecimal lateFeePercentage) {\n        this.lateFeePercentage = lateFeePercentage;\n    }\n\n    public BigDecimal getLateFeeAmount() {\n        return lateFeeAmount;\n    }\n\n    public void setLateFeeAmount(BigDecimal lateFeeAmount) {\n        this.lateFeeAmount = lateFeeAmount;\n    }\n\n    public Long getCourseId() {\n        return courseId;\n    }\n\n    public void setCourseId(Long courseId) {\n        this.courseId = courseId;\n    }\n\n    public Long getProductId() {\n        return productId;\n    }\n\n    public void setProductId(Long productId) {\n        this.productId = productId;\n    }\n\n    public Long getPackageId() {\n        return packageId;\n    }\n\n    public void setPackageId(Long packageId) {\n        this.packageId = packageId;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getTermsAndConditions() {\n        return termsAndConditions;\n    }\n\n    public void setTermsAndConditions(String termsAndConditions) {\n        this.termsAndConditions = termsAndConditions;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isActive() {\n        return status == InstallmentStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isCompleted() {\n        return status == InstallmentStatus.COMPLETED;\n    }\n\n    public boolean isOverdue() {\n        return endDate != null && endDate.isBefore(LocalDate.now()) && !isCompleted();\n    }\n\n    public boolean isPaidOff() {\n        return paidInstallments != null && numberOfInstallments != null && \n               paidInstallments >= numberOfInstallments;\n    }\n\n    public BigDecimal getPaidAmount() {\n        BigDecimal paidAmount = BigDecimal.ZERO;\n        if (downPayment != null) {\n            paidAmount = paidAmount.add(downPayment);\n        }\n        if (installmentAmount != null && paidInstallments != null) {\n            paidAmount = paidAmount.add(installmentAmount.multiply(new BigDecimal(paidInstallments)));\n        }\n        return paidAmount;\n    }\n\n    public BigDecimal getRemainingAmount() {\n        return totalAmount.subtract(getPaidAmount());\n    }\n\n    public void incrementPaidInstallments() {\n        if (paidInstallments == null) {\n            paidInstallments = 0;\n        }\n        paidInstallments++;\n        updateRemainingInstallments();\n    }\n\n    public void updateRemainingInstallments() {\n        if (numberOfInstallments != null && paidInstallments != null) {\n            remainingInstallments = numberOfInstallments - paidInstallments;\n        }\n    }\n\n    public void markAsCompleted() {\n        this.status = InstallmentStatus.COMPLETED;\n        this.endDate = LocalDate.now();\n    }\n\n    public void markAsCancelled() {\n        this.status = InstallmentStatus.CANCELLED;\n    }\n\n    public void markAsOverdue() {\n        this.status = InstallmentStatus.OVERDUE;\n    }\n\n    public void calculateInstallmentAmount() {\n        if (totalAmount != null && numberOfInstallments != null) {\n            BigDecimal amountToDivide = totalAmount;\n            if (downPayment != null) {\n                amountToDivide = amountToDivide.subtract(downPayment);\n            }\n            this.installmentAmount = amountToDivide.divide(new BigDecimal(numberOfInstallments), 2, RoundingMode.HALF_UP);\n        }\n    }\n\n    // Enums\n    public enum InstallmentFrequency {\n        WEEKLY, MONTHLY, QUARTERLY, SEMESTERLY, YEARLY\n    }\n\n    public enum InstallmentStatus {\n        ACTIVE, COMPLETED, CANCELLED, OVERDUE, SUSPENDED\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        InstallmentPlan that = (InstallmentPlan) o;\n        return Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(planCode, that.planCode);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, planCode);\n    }\n\n    @Override\n    public String toString() {\n        return \"InstallmentPlan{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", studentId=\" + studentId +\n                \", planCode='\" + planCode + '\\'' +\n                \", planName='\" + planName + '\\'' +\n                \", totalAmount=\" + totalAmount +\n                \", numberOfInstallments=\" + numberOfInstallments +\n                \", paidInstallments=\" + paidInstallments +\n                \", status=\" + status +\n                '}';\n    }\n}\n","path":null,"size_bytes":12870,"size_tokens":null},"src/main/java/com/educationerp/institution_management/repository/BranchRepository.java":{"content":"package com.educationerp.institution_management.repository;\n\nimport com.educationerp.institution_management.entity.Branch;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * Repository interface for Branch entity\n * Provides data access methods for branch management\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Repository\npublic interface BranchRepository extends JpaRepository<Branch, Long> {\n\n    /**\n     * Find branch by institution ID and code\n     */\n    Optional<Branch> findByInstitutionIdAndCodeAndIsActiveTrue(Long institutionId, String code);\n\n    /**\n     * Find branches by institution ID\n     */\n    List<Branch> findByInstitutionIdAndIsActiveTrue(Long institutionId);\n\n    /**\n     * Find branches by institution ID with pagination\n     */\n    Page<Branch> findByInstitutionIdAndIsActiveTrue(Long institutionId, Pageable pageable);\n\n    /**\n     * Find branch by code within institution\n     */\n    @Query(\"SELECT b FROM Branch b WHERE b.institutionId = :institutionId AND b.code = :code\")\n    Optional<Branch> findByInstitutionIdAndCode(@Param(\"institutionId\") Long institutionId, @Param(\"code\") String code);\n\n    /**\n     * Find branches by city\n     */\n    @Query(\"SELECT b FROM Branch b WHERE LOWER(b.city) = LOWER(:city) AND b.isActive = true\")\n    List<Branch> findByCityIgnoreCase(@Param(\"city\") String city);\n\n    /**\n     * Find branches by state\n     */\n    @Query(\"SELECT b FROM Branch b WHERE LOWER(b.state) = LOWER(:state) AND b.isActive = true\")\n    List<Branch> findByStateIgnoreCase(@Param(\"state\") String state);\n\n    /**\n     * Find branches by country\n     */\n    @Query(\"SELECT b FROM Branch b WHERE LOWER(b.country) = LOWER(:country) AND b.isActive = true\")\n    List<Branch> findByCountryIgnoreCase(@Param(\"country\") String country);\n\n    /**\n     * Find branches by name pattern\n     */\n    @Query(\"SELECT b FROM Branch b WHERE LOWER(b.name) LIKE LOWER(CONCAT('%', :name, '%')) AND b.isActive = true\")\n    List<Branch> findByNameContainingIgnoreCase(@Param(\"name\") String name);\n\n    /**\n     * Find branches by name pattern with pagination\n     */\n    @Query(\"SELECT b FROM Branch b WHERE LOWER(b.name) LIKE LOWER(CONCAT('%', :name, '%')) AND b.isActive = true\")\n    Page<Branch> findByNameContainingIgnoreCase(@Param(\"name\") String name, Pageable pageable);\n\n    /**\n     * Find branches by institution and city\n     */\n    @Query(\"SELECT b FROM Branch b WHERE b.institutionId = :institutionId AND LOWER(b.city) = LOWER(:city) AND b.isActive = true\")\n    List<Branch> findByInstitutionIdAndCityIgnoreCase(@Param(\"institutionId\") Long institutionId, @Param(\"city\") String city);\n\n    /**\n     * Find branches by institution and state\n     */\n    @Query(\"SELECT b FROM Branch b WHERE b.institutionId = :institutionId AND LOWER(b.state) = LOWER(:state) AND b.isActive = true\")\n    List<Branch> findByInstitutionIdAndStateIgnoreCase(@Param(\"institutionId\") Long institutionId, @Param(\"state\") String state);\n\n    /**\n     * Check if code exists within institution\n     */\n    @Query(\"SELECT COUNT(b) > 0 FROM Branch b WHERE b.institutionId = :institutionId AND b.code = :code\")\n    boolean existsByInstitutionIdAndCode(@Param(\"institutionId\") Long institutionId, @Param(\"code\") String code);\n\n    /**\n     * Check if code exists within institution excluding specific branch ID\n     */\n    @Query(\"SELECT COUNT(b) > 0 FROM Branch b WHERE b.institutionId = :institutionId AND b.code = :code AND b.id != :branchId\")\n    boolean existsByInstitutionIdAndCodeAndIdNot(@Param(\"institutionId\") Long institutionId, @Param(\"code\") String code, @Param(\"branchId\") Long branchId);\n\n    /**\n     * Count branches by institution\n     */\n    long countByInstitutionIdAndIsActiveTrue(Long institutionId);\n\n    /**\n     * Count branches by city\n     */\n    @Query(\"SELECT COUNT(b) FROM Branch b WHERE LOWER(b.city) = LOWER(:city) AND b.isActive = true\")\n    long countByCityIgnoreCase(@Param(\"city\") String city);\n\n    /**\n     * Count branches by state\n     */\n    @Query(\"SELECT COUNT(b) FROM Branch b WHERE LOWER(b.state) = LOWER(:state) AND b.isActive = true\")\n    long countByStateIgnoreCase(@Param(\"state\") String state);\n\n    /**\n     * Count branches by country\n     */\n    @Query(\"SELECT COUNT(b) FROM Branch b WHERE LOWER(b.country) = LOWER(:country) AND b.isActive = true\")\n    long countByCountryIgnoreCase(@Param(\"country\") String country);\n}\n","path":null,"size_bytes":4712,"size_tokens":null},"src/main/java/com/educationerp/student_management/entity/Enrollment.java":{"content":"package com.educationerp.student_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotNull;\n\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * Enrollment entity for the Education ERP System\n * Represents student enrollments in courses\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"enrollments\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"student_id\", \"course_id\"})\n       })\npublic class Enrollment extends BaseEntity {\n\n    @NotNull(message = \"Student ID is required\")\n    @Column(name = \"student_id\", nullable = false)\n    private Long studentId;\n\n    @NotNull(message = \"Course ID is required\")\n    @Column(name = \"course_id\", nullable = false)\n    private Long courseId;\n\n    @NotNull(message = \"Enrollment date is required\")\n    @Column(name = \"enrollment_date\", nullable = false)\n    private LocalDate enrollmentDate;\n\n    @Column(name = \"completion_date\")\n    private LocalDate completionDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private EnrollmentStatus status = EnrollmentStatus.ACTIVE;\n\n    @Column(name = \"grade\")\n    private Double grade;\n\n    @Column(name = \"credits\")\n    private Integer credits;\n\n    @Column(name = \"is_paid\", nullable = false)\n    private Boolean isPaid = false;\n\n    @Column(name = \"payment_due_date\")\n    private LocalDate paymentDueDate;\n\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public Enrollment() {\n    }\n\n    public Enrollment(Long studentId, Long courseId, LocalDate enrollmentDate, \n                     EnrollmentStatus status, Integer credits, Boolean isPaid) {\n        this.studentId = studentId;\n        this.courseId = courseId;\n        this.enrollmentDate = enrollmentDate;\n        this.status = status;\n        this.credits = credits;\n        this.isPaid = isPaid;\n    }\n\n    // Getters and Setters\n    public Long getStudentId() {\n        return studentId;\n    }\n\n    public void setStudentId(Long studentId) {\n        this.studentId = studentId;\n    }\n\n    public Long getCourseId() {\n        return courseId;\n    }\n\n    public void setCourseId(Long courseId) {\n        this.courseId = courseId;\n    }\n\n    public LocalDate getEnrollmentDate() {\n        return enrollmentDate;\n    }\n\n    public void setEnrollmentDate(LocalDate enrollmentDate) {\n        this.enrollmentDate = enrollmentDate;\n    }\n\n    public LocalDate getCompletionDate() {\n        return completionDate;\n    }\n\n    public void setCompletionDate(LocalDate completionDate) {\n        this.completionDate = completionDate;\n    }\n\n    public EnrollmentStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(EnrollmentStatus status) {\n        this.status = status;\n    }\n\n    public Double getGrade() {\n        return grade;\n    }\n\n    public void setGrade(Double grade) {\n        this.grade = grade;\n    }\n\n    public Integer getCredits() {\n        return credits;\n    }\n\n    public void setCredits(Integer credits) {\n        this.credits = credits;\n    }\n\n    public Boolean getIsPaid() {\n        return isPaid;\n    }\n\n    public void setIsPaid(Boolean isPaid) {\n        this.isPaid = isPaid;\n    }\n\n    public LocalDate getPaymentDueDate() {\n        return paymentDueDate;\n    }\n\n    public void setPaymentDueDate(LocalDate paymentDueDate) {\n        this.paymentDueDate = paymentDueDate;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isCompleted() {\n        return status == EnrollmentStatus.COMPLETED && completionDate != null;\n    }\n\n    public boolean isActive() {\n        return status == EnrollmentStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isOverdue() {\n        return paymentDueDate != null && paymentDueDate.isBefore(LocalDate.now()) && !isPaid;\n    }\n\n    public void complete() {\n        this.status = EnrollmentStatus.COMPLETED;\n        this.completionDate = LocalDate.now();\n    }\n\n    public void withdraw() {\n        this.status = EnrollmentStatus.WITHDRAWN;\n    }\n\n    public void suspend() {\n        this.status = EnrollmentStatus.SUSPENDED;\n    }\n\n    public void reactivate() {\n        this.status = EnrollmentStatus.ACTIVE;\n    }\n\n    // Enums\n    public enum EnrollmentStatus {\n        ACTIVE, COMPLETED, WITHDRAWN, SUSPENDED, FAILED\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Enrollment that = (Enrollment) o;\n        return Objects.equals(studentId, that.studentId) &&\n                Objects.equals(courseId, that.courseId);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), studentId, courseId);\n    }\n\n    @Override\n    public String toString() {\n        return \"Enrollment{\" +\n                \"id=\" + getId() +\n                \", studentId=\" + studentId +\n                \", courseId=\" + courseId +\n                \", enrollmentDate=\" + enrollmentDate +\n                \", status=\" + status +\n                \", grade=\" + grade +\n                \", isPaid=\" + isPaid +\n                '}';\n    }\n}\n","path":null,"size_bytes":5437,"size_tokens":null},"src/main/java/com/educationerp/EducationErpApplication.java":{"content":"package com.educationerp;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.data.jpa.repository.config.EnableJpaAuditing;\n\n/**\n * Education ERP System - Main Application\n * Multi-tenant education management system\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@SpringBootApplication\n@EnableJpaAuditing\npublic class EducationErpApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(EducationErpApplication.class, args);\n    }\n}\n\n","path":null,"size_bytes":572,"size_tokens":null},"src/main/java/com/educationerp/security/jwt/JwtAuthenticationFilter.java":{"content":"package com.educationerp.security.jwt;\n\nimport com.educationerp.security.service.CustomUserDetailsService;\nimport com.educationerp.security.tenant.TenantContext;\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport java.io.IOException;\n\n/**\n * JWT Authentication Filter\n * Intercepts requests and validates JWT tokens\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private static final Logger logger = LoggerFactory.getLogger(JwtAuthenticationFilter.class);\n\n    @Autowired\n    private JwtUtil jwtUtil;\n\n    @Autowired\n    private CustomUserDetailsService userDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, \n                                  HttpServletResponse response, \n                                  FilterChain filterChain) throws ServletException, IOException {\n        \n        try {\n            String jwt = getJwtFromRequest(request);\n            \n            if (StringUtils.hasText(jwt) && jwtUtil.validateToken(jwt, null)) {\n                String username = jwtUtil.extractUsername(jwt);\n                String tenantId = jwtUtil.extractTenantId(jwt);\n                \n                // Set tenant context\n                TenantContext.setCurrentTenant(tenantId);\n                \n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                \n                if (jwtUtil.validateToken(jwt, userDetails)) {\n                    UsernamePasswordAuthenticationToken authentication = \n                        new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                    authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                    \n                    SecurityContextHolder.getContext().setAuthentication(authentication);\n                }\n            }\n        } catch (Exception ex) {\n            logger.error(\"Could not set user authentication in security context\", ex);\n        } finally {\n            filterChain.doFilter(request, response);\n        }\n    }\n\n    /**\n     * Extract JWT token from Authorization header\n     */\n    private String getJwtFromRequest(HttpServletRequest request) {\n        String bearerToken = request.getHeader(\"Authorization\");\n        if (StringUtils.hasText(bearerToken) && bearerToken.startsWith(\"Bearer \")) {\n            return bearerToken.substring(7);\n        }\n        return null;\n    }\n}\n","path":null,"size_bytes":3242,"size_tokens":null},"src/main/java/com/educationerp/reporting/service/ReportService.java":{"content":"package com.educationerp.reporting.service;\n\nimport com.educationerp.reporting.entity.Report;\nimport com.educationerp.reporting.repository.ReportRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Service class for Report operations\n * Handles report generation and management\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Service\n@Transactional\npublic class ReportService {\n\n    private static final Logger logger = LoggerFactory.getLogger(ReportService.class);\n\n    @Autowired\n    private ReportRepository reportRepository;\n\n    /**\n     * Generate student enrollment report\n     */\n    public Report generateStudentEnrollmentReport(Long institutionId, Long branchId, \n                                                 Map<String, Object> parameters) {\n        logger.info(\"Generating student enrollment report for institution: {}\", institutionId);\n\n        long startTime = System.currentTimeMillis();\n\n        try {\n            // TODO: Implement actual report generation logic\n            // This is a placeholder implementation\n            \n            Report report = new Report();\n            report.setInstitutionId(institutionId);\n            report.setBranchId(branchId);\n            report.setReportCode(\"STU_ENROLL_\" + System.currentTimeMillis());\n            report.setReportName(\"Student Enrollment Report\");\n            report.setDescription(\"Report showing student enrollment statistics\");\n            report.setReportType(Report.ReportType.STANDARD);\n            report.setCategory(Report.ReportCategory.STUDENT);\n            report.setStatus(Report.ReportStatus.ACTIVE);\n            report.setFileFormat(\"PDF\");\n            report.setGeneratedBy(\"System\");\n            report.setRecordCount(0L); // TODO: Calculate actual record count\n\n            long endTime = System.currentTimeMillis();\n            report.markAsGenerated(\"System\", endTime - startTime, 0L, \n                                 \"/reports/student_enrollment.pdf\", \"PDF\", 1024L);\n\n            Report savedReport = reportRepository.save(report);\n            logger.info(\"Student enrollment report generated successfully: {}\", savedReport.getId());\n\n            return savedReport;\n\n        } catch (Exception e) {\n            logger.error(\"Failed to generate student enrollment report\", e);\n            throw new RuntimeException(\"Failed to generate report\", e);\n        }\n    }\n\n    /**\n     * Generate payment report\n     */\n    public Report generatePaymentReport(Long institutionId, Long branchId, \n                                       Map<String, Object> parameters) {\n        logger.info(\"Generating payment report for institution: {}\", institutionId);\n\n        long startTime = System.currentTimeMillis();\n\n        try {\n            // TODO: Implement actual report generation logic\n            // This is a placeholder implementation\n            \n            Report report = new Report();\n            report.setInstitutionId(institutionId);\n            report.setBranchId(branchId);\n            report.setReportCode(\"PAY_REPORT_\" + System.currentTimeMillis());\n            report.setReportName(\"Payment Report\");\n            report.setDescription(\"Report showing payment statistics and trends\");\n            report.setReportType(Report.ReportType.STANDARD);\n            report.setCategory(Report.ReportCategory.PAYMENT);\n            report.setStatus(Report.ReportStatus.ACTIVE);\n            report.setFileFormat(\"PDF\");\n            report.setGeneratedBy(\"System\");\n            report.setRecordCount(0L); // TODO: Calculate actual record count\n\n            long endTime = System.currentTimeMillis();\n            report.markAsGenerated(\"System\", endTime - startTime, 0L, \n                                 \"/reports/payment_report.pdf\", \"PDF\", 2048L);\n\n            Report savedReport = reportRepository.save(report);\n            logger.info(\"Payment report generated successfully: {}\", savedReport.getId());\n\n            return savedReport;\n\n        } catch (Exception e) {\n            logger.error(\"Failed to generate payment report\", e);\n            throw new RuntimeException(\"Failed to generate report\", e);\n        }\n    }\n\n    /**\n     * Generate course performance report\n     */\n    public Report generateCoursePerformanceReport(Long institutionId, Long branchId, \n                                                 Map<String, Object> parameters) {\n        logger.info(\"Generating course performance report for institution: {}\", institutionId);\n\n        long startTime = System.currentTimeMillis();\n\n        try {\n            // TODO: Implement actual report generation logic\n            // This is a placeholder implementation\n            \n            Report report = new Report();\n            report.setInstitutionId(institutionId);\n            report.setBranchId(branchId);\n            report.setReportCode(\"COURSE_PERF_\" + System.currentTimeMillis());\n            report.setReportName(\"Course Performance Report\");\n            report.setDescription(\"Report showing course performance metrics and analytics\");\n            report.setReportType(Report.ReportType.ANALYTICS);\n            report.setCategory(Report.ReportCategory.COURSE);\n            report.setStatus(Report.ReportStatus.ACTIVE);\n            report.setFileFormat(\"PDF\");\n            report.setGeneratedBy(\"System\");\n            report.setRecordCount(0L); // TODO: Calculate actual record count\n\n            long endTime = System.currentTimeMillis();\n            report.markAsGenerated(\"System\", endTime - startTime, 0L, \n                                 \"/reports/course_performance.pdf\", \"PDF\", 1536L);\n\n            Report savedReport = reportRepository.save(report);\n            logger.info(\"Course performance report generated successfully: {}\", savedReport.getId());\n\n            return savedReport;\n\n        } catch (Exception e) {\n            logger.error(\"Failed to generate course performance report\", e);\n            throw new RuntimeException(\"Failed to generate report\", e);\n        }\n    }\n\n    /**\n     * Generate inventory report\n     */\n    public Report generateInventoryReport(Long institutionId, Long branchId, \n                                         Map<String, Object> parameters) {\n        logger.info(\"Generating inventory report for institution: {}\", institutionId);\n\n        long startTime = System.currentTimeMillis();\n\n        try {\n            // TODO: Implement actual report generation logic\n            // This is a placeholder implementation\n            \n            Report report = new Report();\n            report.setInstitutionId(institutionId);\n            report.setBranchId(branchId);\n            report.setReportCode(\"INV_REPORT_\" + System.currentTimeMillis());\n            report.setReportName(\"Inventory Report\");\n            report.setDescription(\"Report showing inventory levels and stock status\");\n            report.setReportType(Report.ReportType.STANDARD);\n            report.setCategory(Report.ReportCategory.INVENTORY);\n            report.setStatus(Report.ReportStatus.ACTIVE);\n            report.setFileFormat(\"PDF\");\n            report.setGeneratedBy(\"System\");\n            report.setRecordCount(0L); // TODO: Calculate actual record count\n\n            long endTime = System.currentTimeMillis();\n            report.markAsGenerated(\"System\", endTime - startTime, 0L, \n                                 \"/reports/inventory_report.pdf\", \"PDF\", 1024L);\n\n            Report savedReport = reportRepository.save(report);\n            logger.info(\"Inventory report generated successfully: {}\", savedReport.getId());\n\n            return savedReport;\n\n        } catch (Exception e) {\n            logger.error(\"Failed to generate inventory report\", e);\n            throw new RuntimeException(\"Failed to generate report\", e);\n        }\n    }\n\n    /**\n     * Generate financial report\n     */\n    public Report generateFinancialReport(Long institutionId, Long branchId, \n                                         Map<String, Object> parameters) {\n        logger.info(\"Generating financial report for institution: {}\", institutionId);\n\n        long startTime = System.currentTimeMillis();\n\n        try {\n            // TODO: Implement actual report generation logic\n            // This is a placeholder implementation\n            \n            Report report = new Report();\n            report.setInstitutionId(institutionId);\n            report.setBranchId(branchId);\n            report.setReportCode(\"FIN_REPORT_\" + System.currentTimeMillis());\n            report.setReportName(\"Financial Report\");\n            report.setDescription(\"Report showing financial metrics and revenue analysis\");\n            report.setReportType(Report.ReportType.ANALYTICS);\n            report.setCategory(Report.ReportCategory.FINANCIAL);\n            report.setStatus(Report.ReportStatus.ACTIVE);\n            report.setFileFormat(\"PDF\");\n            report.setGeneratedBy(\"System\");\n            report.setRecordCount(0L); // TODO: Calculate actual record count\n\n            long endTime = System.currentTimeMillis();\n            report.markAsGenerated(\"System\", endTime - startTime, 0L, \n                                 \"/reports/financial_report.pdf\", \"PDF\", 2560L);\n\n            Report savedReport = reportRepository.save(report);\n            logger.info(\"Financial report generated successfully: {}\", savedReport.getId());\n\n            return savedReport;\n\n        } catch (Exception e) {\n            logger.error(\"Failed to generate financial report\", e);\n            throw new RuntimeException(\"Failed to generate report\", e);\n        }\n    }\n\n    /**\n     * Get reports by institution\n     */\n    @Transactional(readOnly = true)\n    public List<Report> getReportsByInstitution(Long institutionId) {\n        return reportRepository.findByInstitutionIdAndIsActiveTrueOrderByCreatedDateDesc(institutionId);\n    }\n\n    /**\n     * Get reports by category\n     */\n    @Transactional(readOnly = true)\n    public List<Report> getReportsByCategory(Long institutionId, Report.ReportCategory category) {\n        return reportRepository.findByInstitutionIdAndCategoryAndIsActiveTrueOrderByCreatedDateDesc(institutionId, category);\n    }\n\n    /**\n     * Get report by ID\n     */\n    @Transactional(readOnly = true)\n    public Report getReportById(Long reportId) {\n        return reportRepository.findById(reportId)\n                .orElseThrow(() -> new RuntimeException(\"Report not found\"));\n    }\n\n    /**\n     * Get scheduled reports\n     */\n    @Transactional(readOnly = true)\n    public List<Report> getScheduledReports() {\n        return reportRepository.findByIsScheduledTrueAndStatusAndIsActiveTrue(Report.ReportStatus.ACTIVE);\n    }\n\n    /**\n     * Delete report\n     */\n    public void deleteReport(Long reportId) {\n        Report report = reportRepository.findById(reportId)\n                .orElseThrow(() -> new RuntimeException(\"Report not found\"));\n        \n        report.softDelete();\n        reportRepository.save(report);\n        \n        logger.info(\"Report deleted: {}\", reportId);\n    }\n\n    /**\n     * Get dashboard metrics\n     */\n    @Transactional(readOnly = true)\n    public Map<String, Object> getDashboardMetrics(Long institutionId) {\n        // TODO: Implement actual dashboard metrics calculation\n        // This is a placeholder implementation\n        \n        return Map.of(\n            \"totalStudents\", 0L,\n            \"totalCourses\", 0L,\n            \"totalRevenue\", 0.0,\n            \"activeUsers\", 0L,\n            \"pendingPayments\", 0L,\n            \"lowStockItems\", 0L\n        );\n    }\n}\n","path":null,"size_bytes":11751,"size_tokens":null},"src/main/java/com/educationerp/institution_management/controller/InstitutionController.java":{"content":"package com.educationerp.institution_management.controller;\n\nimport com.educationerp.core.dto.ApiResponse;\nimport com.educationerp.institution_management.dto.CreateInstitutionRequest;\nimport com.educationerp.institution_management.dto.InstitutionResponse;\nimport com.educationerp.institution_management.service.InstitutionService;\nimport com.educationerp.security.enums.TenantType;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport jakarta.validation.Valid;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n/**\n * REST controller for Institution management operations\n * Provides CRUD operations for institutions with role-based access control\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@RestController\n@RequestMapping(\"/api/institutions\")\n@Tag(name = \"Institution Management\", description = \"Institution management operations\")\npublic class InstitutionController {\n\n    private static final Logger logger = LoggerFactory.getLogger(InstitutionController.class);\n\n    @Autowired\n    private InstitutionService institutionService;\n\n    /**\n     * Create a new institution\n     */\n    @PostMapping\n    @PreAuthorize(\"hasRole('SUPER_ADMIN')\")\n    @Operation(summary = \"Create institution\", description = \"Create a new institution in the system\")\n    public ResponseEntity<ApiResponse<InstitutionResponse>> createInstitution(@Valid @RequestBody CreateInstitutionRequest request) {\n        logger.info(\"Creating new institution with code: {}\", request.getCode());\n        \n        InstitutionResponse institutionResponse = institutionService.createInstitution(request);\n        ApiResponse<InstitutionResponse> response = ApiResponse.success(\"Institution created successfully\", institutionResponse);\n        \n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    /**\n     * Get institution by ID\n     */\n    @GetMapping(\"/{id}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get institution by ID\", description = \"Retrieve institution information by ID\")\n    public ResponseEntity<ApiResponse<InstitutionResponse>> getInstitutionById(\n            @Parameter(description = \"Institution ID\") @PathVariable Long id) {\n        \n        InstitutionResponse institutionResponse = institutionService.getInstitutionById(id);\n        ApiResponse<InstitutionResponse> response = ApiResponse.success(\"Institution retrieved successfully\", institutionResponse);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get institution by code\n     */\n    @GetMapping(\"/code/{code}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get institution by code\", description = \"Retrieve institution information by code\")\n    public ResponseEntity<ApiResponse<InstitutionResponse>> getInstitutionByCode(\n            @Parameter(description = \"Institution code\") @PathVariable String code) {\n        \n        InstitutionResponse institutionResponse = institutionService.getInstitutionByCode(code);\n        ApiResponse<InstitutionResponse> response = ApiResponse.success(\"Institution retrieved successfully\", institutionResponse);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get all institutions with pagination\n     */\n    @GetMapping\n    @PreAuthorize(\"hasRole('SUPER_ADMIN')\")\n    @Operation(summary = \"Get all institutions\", description = \"Retrieve all institutions with pagination\")\n    public ResponseEntity<ApiResponse<Page<InstitutionResponse>>> getAllInstitutions(Pageable pageable) {\n        Page<InstitutionResponse> institutions = institutionService.getAllInstitutions(pageable);\n        ApiResponse<Page<InstitutionResponse>> response = ApiResponse.success(\"Institutions retrieved successfully\", institutions);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get institutions by tenant type\n     */\n    @GetMapping(\"/tenant-type/{tenantType}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN')\")\n    @Operation(summary = \"Get institutions by tenant type\", description = \"Retrieve institutions filtered by tenant type\")\n    public ResponseEntity<ApiResponse<List<InstitutionResponse>>> getInstitutionsByTenantType(\n            @Parameter(description = \"Tenant type\") @PathVariable TenantType tenantType) {\n        \n        List<InstitutionResponse> institutions = institutionService.getInstitutionsByTenantType(tenantType);\n        ApiResponse<List<InstitutionResponse>> response = ApiResponse.success(\"Institutions retrieved successfully\", institutions);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get institutions by city\n     */\n    @GetMapping(\"/city/{city}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get institutions by city\", description = \"Retrieve institutions filtered by city\")\n    public ResponseEntity<ApiResponse<List<InstitutionResponse>>> getInstitutionsByCity(\n            @Parameter(description = \"City name\") @PathVariable String city) {\n        \n        List<InstitutionResponse> institutions = institutionService.getInstitutionsByCity(city);\n        ApiResponse<List<InstitutionResponse>> response = ApiResponse.success(\"Institutions retrieved successfully\", institutions);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get institutions by state\n     */\n    @GetMapping(\"/state/{state}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get institutions by state\", description = \"Retrieve institutions filtered by state\")\n    public ResponseEntity<ApiResponse<List<InstitutionResponse>>> getInstitutionsByState(\n            @Parameter(description = \"State name\") @PathVariable String state) {\n        \n        List<InstitutionResponse> institutions = institutionService.getInstitutionsByState(state);\n        ApiResponse<List<InstitutionResponse>> response = ApiResponse.success(\"Institutions retrieved successfully\", institutions);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Get institutions by country\n     */\n    @GetMapping(\"/country/{country}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Get institutions by country\", description = \"Retrieve institutions filtered by country\")\n    public ResponseEntity<ApiResponse<List<InstitutionResponse>>> getInstitutionsByCountry(\n            @Parameter(description = \"Country name\") @PathVariable String country) {\n        \n        List<InstitutionResponse> institutions = institutionService.getInstitutionsByCountry(country);\n        ApiResponse<List<InstitutionResponse>> response = ApiResponse.success(\"Institutions retrieved successfully\", institutions);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Search institutions by name\n     */\n    @GetMapping(\"/search\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Search institutions by name\", description = \"Search institutions by name pattern\")\n    public ResponseEntity<ApiResponse<List<InstitutionResponse>>> searchInstitutionsByName(\n            @Parameter(description = \"Name pattern\") @RequestParam String name) {\n        \n        List<InstitutionResponse> institutions = institutionService.searchInstitutionsByName(name);\n        ApiResponse<List<InstitutionResponse>> response = ApiResponse.success(\"Institutions retrieved successfully\", institutions);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Update institution\n     */\n    @PutMapping(\"/{id}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN') or hasRole('INSTITUTION_ADMIN')\")\n    @Operation(summary = \"Update institution\", description = \"Update institution information\")\n    public ResponseEntity<ApiResponse<InstitutionResponse>> updateInstitution(\n            @Parameter(description = \"Institution ID\") @PathVariable Long id,\n            @Valid @RequestBody CreateInstitutionRequest request) {\n        \n        logger.info(\"Updating institution with ID: {}\", id);\n        \n        InstitutionResponse institutionResponse = institutionService.updateInstitution(id, request);\n        ApiResponse<InstitutionResponse> response = ApiResponse.success(\"Institution updated successfully\", institutionResponse);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Delete institution (soft delete)\n     */\n    @DeleteMapping(\"/{id}\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN')\")\n    @Operation(summary = \"Delete institution\", description = \"Soft delete institution\")\n    public ResponseEntity<ApiResponse<Void>> deleteInstitution(\n            @Parameter(description = \"Institution ID\") @PathVariable Long id) {\n        \n        logger.info(\"Deleting institution with ID: {}\", id);\n        \n        institutionService.deleteInstitution(id);\n        ApiResponse<Void> response = ApiResponse.success(\"Institution deleted successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Activate institution\n     */\n    @PutMapping(\"/{id}/activate\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN')\")\n    @Operation(summary = \"Activate institution\", description = \"Activate institution\")\n    public ResponseEntity<ApiResponse<Void>> activateInstitution(\n            @Parameter(description = \"Institution ID\") @PathVariable Long id) {\n        \n        logger.info(\"Activating institution with ID: {}\", id);\n        \n        institutionService.activateInstitution(id);\n        ApiResponse<Void> response = ApiResponse.success(\"Institution activated successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n\n    /**\n     * Deactivate institution\n     */\n    @PutMapping(\"/{id}/deactivate\")\n    @PreAuthorize(\"hasRole('SUPER_ADMIN')\")\n    @Operation(summary = \"Deactivate institution\", description = \"Deactivate institution\")\n    public ResponseEntity<ApiResponse<Void>> deactivateInstitution(\n            @Parameter(description = \"Institution ID\") @PathVariable Long id) {\n        \n        logger.info(\"Deactivating institution with ID: {}\", id);\n        \n        institutionService.deactivateInstitution(id);\n        ApiResponse<Void> response = ApiResponse.success(\"Institution deactivated successfully\", null);\n        \n        return ResponseEntity.ok(response);\n    }\n}\n","path":null,"size_bytes":10887,"size_tokens":null},"src/main/java/com/educationerp/security/dto/LoginRequest.java":{"content":"package com.educationerp.security.dto;\n\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Objects;\n\n/**\n * DTO for login request\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class LoginRequest {\n\n    @NotBlank(message = \"Username is required\")\n    @Size(min = 3, max = 50, message = \"Username must be between 3 and 50 characters\")\n    private String username;\n\n    @NotBlank(message = \"Password is required\")\n    @Size(min = 8, message = \"Password must be at least 8 characters\")\n    private String password;\n\n    private String tenantId;\n\n    // Constructors\n    public LoginRequest() {\n    }\n\n    public LoginRequest(String username, String password, String tenantId) {\n        this.username = username;\n        this.password = password;\n        this.tenantId = tenantId;\n    }\n\n    // Getters and Setters\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getTenantId() {\n        return tenantId;\n    }\n\n    public void setTenantId(String tenantId) {\n        this.tenantId = tenantId;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        LoginRequest that = (LoginRequest) o;\n        return Objects.equals(username, that.username) &&\n                Objects.equals(password, that.password) &&\n                Objects.equals(tenantId, that.tenantId);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(username, password, tenantId);\n    }\n\n    @Override\n    public String toString() {\n        return \"LoginRequest{\" +\n                \"username='\" + username + '\\'' +\n                \", tenantId='\" + tenantId + '\\'' +\n                '}';\n    }\n}\n","path":null,"size_bytes":2083,"size_tokens":null},"src/main/java/com/educationerp/user_management/dto/CreateUserRequest.java":{"content":"package com.educationerp.user_management.dto;\n\nimport com.educationerp.security.enums.Role;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Objects;\n\n/**\n * DTO for creating a new user\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class CreateUserRequest {\n\n    @NotBlank(message = \"Username is required\")\n    @Size(min = 3, max = 50, message = \"Username must be between 3 and 50 characters\")\n    private String username;\n\n    @NotBlank(message = \"Email is required\")\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    private String email;\n\n    @NotBlank(message = \"Password is required\")\n    @Size(min = 8, message = \"Password must be at least 8 characters\")\n    private String password;\n\n    @NotBlank(message = \"First name is required\")\n    @Size(max = 50, message = \"First name must not exceed 50 characters\")\n    private String firstName;\n\n    @NotBlank(message = \"Last name is required\")\n    @Size(max = 50, message = \"Last name must not exceed 50 characters\")\n    private String lastName;\n\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    private String phoneNumber;\n\n    @NotNull(message = \"Role is required\")\n    private Role role;\n\n    private Long institutionId;\n    private Long branchId;\n    private Boolean mustChangePassword = false;\n\n    // Constructors\n    public CreateUserRequest() {\n    }\n\n    public CreateUserRequest(String username, String email, String password, String firstName, \n                           String lastName, String phoneNumber, Role role, Long institutionId, \n                           Long branchId, Boolean mustChangePassword) {\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.phoneNumber = phoneNumber;\n        this.role = role;\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.mustChangePassword = mustChangePassword;\n    }\n\n    // Getters and Setters\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public Role getRole() {\n        return role;\n    }\n\n    public void setRole(Role role) {\n        this.role = role;\n    }\n\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public Boolean getMustChangePassword() {\n        return mustChangePassword;\n    }\n\n    public void setMustChangePassword(Boolean mustChangePassword) {\n        this.mustChangePassword = mustChangePassword;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        CreateUserRequest that = (CreateUserRequest) o;\n        return Objects.equals(username, that.username) &&\n                Objects.equals(email, that.email) &&\n                Objects.equals(firstName, that.firstName) &&\n                Objects.equals(lastName, that.lastName) &&\n                Objects.equals(phoneNumber, that.phoneNumber) &&\n                role == that.role &&\n                Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(branchId, that.branchId) &&\n                Objects.equals(mustChangePassword, that.mustChangePassword);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(username, email, firstName, lastName, phoneNumber, role, institutionId, branchId, mustChangePassword);\n    }\n\n    @Override\n    public String toString() {\n        return \"CreateUserRequest{\" +\n                \"username='\" + username + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", phoneNumber='\" + phoneNumber + '\\'' +\n                \", role=\" + role +\n                \", institutionId=\" + institutionId +\n                \", branchId=\" + branchId +\n                \", mustChangePassword=\" + mustChangePassword +\n                '}';\n    }\n}\n","path":null,"size_bytes":5382,"size_tokens":null},"src/main/java/com/educationerp/user_management/service/UserService.java":{"content":"package com.educationerp.user_management.service;\n\nimport com.educationerp.core.exception.BusinessException;\nimport com.educationerp.core.exception.ResourceNotFoundException;\nimport com.educationerp.security.enums.Role;\nimport com.educationerp.user_management.dto.CreateUserRequest;\nimport com.educationerp.user_management.dto.UpdateUserRequest;\nimport com.educationerp.user_management.dto.UserResponse;\nimport com.educationerp.user_management.entity.User;\nimport com.educationerp.user_management.repository.UserRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n/**\n * Service class for User management operations\n * Handles business logic for user CRUD operations and authentication\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Service\n@Transactional\npublic class UserService {\n\n    private static final Logger logger = LoggerFactory.getLogger(UserService.class);\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n\n    /**\n     * Create a new user\n     */\n    public UserResponse createUser(CreateUserRequest request) {\n        logger.info(\"Creating new user with username: {}\", request.getUsername());\n\n        // Validate unique constraints\n        if (userRepository.existsByUsername(request.getUsername())) {\n            throw new BusinessException(\"Username already exists: \" + request.getUsername());\n        }\n\n        if (userRepository.existsByEmail(request.getEmail())) {\n            throw new BusinessException(\"Email already exists: \" + request.getEmail());\n        }\n\n        // Create user entity\n        User user = new User();\n        user.setUsername(request.getUsername());\n        user.setEmail(request.getEmail());\n        user.setPassword(passwordEncoder.encode(request.getPassword()));\n        user.setFirstName(request.getFirstName());\n        user.setLastName(request.getLastName());\n        user.setPhoneNumber(request.getPhoneNumber());\n        user.setRole(request.getRole());\n        user.setInstitutionId(request.getInstitutionId());\n        user.setBranchId(request.getBranchId());\n        user.setMustChangePassword(request.getMustChangePassword());\n\n        User savedUser = userRepository.save(user);\n        logger.info(\"User created successfully with ID: {}\", savedUser.getId());\n\n        return mapToUserResponse(savedUser);\n    }\n\n    /**\n     * Get user by ID\n     */\n    @Transactional(readOnly = true)\n    public UserResponse getUserById(Long id) {\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with ID: \" + id));\n\n        return mapToUserResponse(user);\n    }\n\n    /**\n     * Get user by username\n     */\n    @Transactional(readOnly = true)\n    public UserResponse getUserByUsername(String username) {\n        User user = userRepository.findByUsernameAndIsActiveTrue(username)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with username: \" + username));\n\n        return mapToUserResponse(user);\n    }\n\n    /**\n     * Get all users with pagination\n     */\n    @Transactional(readOnly = true)\n    public Page<UserResponse> getAllUsers(Pageable pageable) {\n        Page<User> users = userRepository.findAll(pageable);\n        return users.map(this::mapToUserResponse);\n    }\n\n    /**\n     * Get users by role\n     */\n    @Transactional(readOnly = true)\n    public List<UserResponse> getUsersByRole(Role role) {\n        List<User> users = userRepository.findByRoleAndIsActiveTrue(role);\n        return users.stream()\n                .map(this::mapToUserResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Get users by institution\n     */\n    @Transactional(readOnly = true)\n    public List<UserResponse> getUsersByInstitution(Long institutionId) {\n        List<User> users = userRepository.findByInstitutionIdAndIsActiveTrue(institutionId);\n        return users.stream()\n                .map(this::mapToUserResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Get users by branch\n     */\n    @Transactional(readOnly = true)\n    public List<UserResponse> getUsersByBranch(Long branchId) {\n        List<User> users = userRepository.findByBranchIdAndIsActiveTrue(branchId);\n        return users.stream()\n                .map(this::mapToUserResponse)\n                .collect(Collectors.toList());\n    }\n\n    /**\n     * Update user\n     */\n    public UserResponse updateUser(Long id, UpdateUserRequest request) {\n        logger.info(\"Updating user with ID: {}\", id);\n\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with ID: \" + id));\n\n        // Validate unique constraints for updated values\n        if (!user.getUsername().equals(request.getUsername()) && \n            userRepository.existsByUsernameAndIdNot(request.getUsername(), id)) {\n            throw new BusinessException(\"Username already exists: \" + request.getUsername());\n        }\n\n        if (!user.getEmail().equals(request.getEmail()) && \n            userRepository.existsByEmailAndIdNot(request.getEmail(), id)) {\n            throw new BusinessException(\"Email already exists: \" + request.getEmail());\n        }\n\n        // Update user fields\n        user.setUsername(request.getUsername());\n        user.setEmail(request.getEmail());\n        user.setFirstName(request.getFirstName());\n        user.setLastName(request.getLastName());\n        user.setPhoneNumber(request.getPhoneNumber());\n        user.setRole(request.getRole());\n        user.setInstitutionId(request.getInstitutionId());\n        user.setBranchId(request.getBranchId());\n\n        User updatedUser = userRepository.save(user);\n        logger.info(\"User updated successfully with ID: {}\", updatedUser.getId());\n\n        return mapToUserResponse(updatedUser);\n    }\n\n    /**\n     * Change user password\n     */\n    public void changePassword(Long id, String newPassword) {\n        logger.info(\"Changing password for user with ID: {}\", id);\n\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with ID: \" + id));\n\n        user.setPassword(passwordEncoder.encode(newPassword));\n        user.updatePasswordChangeDate();\n        userRepository.save(user);\n\n        logger.info(\"Password changed successfully for user with ID: {}\", id);\n    }\n\n    /**\n     * Lock user account\n     */\n    public void lockUser(Long id) {\n        logger.info(\"Locking user account with ID: {}\", id);\n\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with ID: \" + id));\n\n        user.lockAccount();\n        userRepository.save(user);\n\n        logger.info(\"User account locked successfully with ID: {}\", id);\n    }\n\n    /**\n     * Unlock user account\n     */\n    public void unlockUser(Long id) {\n        logger.info(\"Unlocking user account with ID: {}\", id);\n\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with ID: \" + id));\n\n        user.unlockAccount();\n        userRepository.save(user);\n\n        logger.info(\"User account unlocked successfully with ID: {}\", id);\n    }\n\n    /**\n     * Soft delete user\n     */\n    public void deleteUser(Long id) {\n        logger.info(\"Deleting user with ID: {}\", id);\n\n        User user = userRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"User not found with ID: \" + id));\n\n        user.softDelete();\n        userRepository.save(user);\n\n        logger.info(\"User deleted successfully with ID: {}\", id);\n    }\n\n    /**\n     * Handle failed login attempt\n     */\n    public void handleFailedLogin(String username) {\n        User user = userRepository.findByUsername(username).orElse(null);\n        if (user != null && user.getIsActive()) {\n            user.incrementFailedLoginAttempts();\n            \n            // Lock account after 5 failed attempts\n            if (user.getFailedLoginAttempts() >= 5) {\n                user.lockAccount();\n                logger.warn(\"User account locked due to failed login attempts: {}\", username);\n            }\n            \n            userRepository.save(user);\n        }\n    }\n\n    /**\n     * Handle successful login\n     */\n    public void handleSuccessfulLogin(String username) {\n        User user = userRepository.findByUsername(username).orElse(null);\n        if (user != null && user.getIsActive()) {\n            user.resetFailedLoginAttempts();\n            user.updateLastLogin();\n            userRepository.save(user);\n        }\n    }\n\n    /**\n     * Map User entity to UserResponse DTO\n     */\n    private UserResponse mapToUserResponse(User user) {\n        return UserResponse.builder()\n                .id(user.getId())\n                .username(user.getUsername())\n                .email(user.getEmail())\n                .firstName(user.getFirstName())\n                .lastName(user.getLastName())\n                .fullName(user.getFullName())\n                .phoneNumber(user.getPhoneNumber())\n                .role(user.getRole())\n                .isLocked(user.getIsLocked())\n                .isActive(user.getIsActive())\n                .lastLoginDate(user.getLastLoginDate())\n                .passwordChangedDate(user.getPasswordChangedDate())\n                .mustChangePassword(user.getMustChangePassword())\n                .profilePictureUrl(user.getProfilePictureUrl())\n                .institutionId(user.getInstitutionId())\n                .branchId(user.getBranchId())\n                .createdDate(user.getCreatedDate())\n                .createdBy(user.getCreatedBy())\n                .updatedDate(user.getUpdatedDate())\n                .updatedBy(user.getUpdatedBy())\n                .build();\n    }\n}\n","path":null,"size_bytes":10288,"size_tokens":null},"src/main/java/com/educationerp/core/config/TayfunAksayNamingStrategy.java":{"content":"package com.educationerp.core.config;\n\nimport org.hibernate.boot.model.naming.Identifier;\nimport org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl;\nimport org.hibernate.engine.jdbc.env.spi.JdbcEnvironment;\n\n/**\n * Custom naming strategy for database tables and columns\n * Implements snake_case naming convention as specified\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class TayfunAksayNamingStrategy extends PhysicalNamingStrategyStandardImpl {\n\n    @Override\n    public Identifier toPhysicalTableName(Identifier name, JdbcEnvironment context) {\n        return Identifier.toIdentifier(convertToSnakeCase(name.getText()));\n    }\n\n    @Override\n    public Identifier toPhysicalColumnName(Identifier name, JdbcEnvironment context) {\n        return Identifier.toIdentifier(convertToSnakeCase(name.getText()));\n    }\n\n    /**\n     * Convert camelCase or PascalCase to snake_case\n     */\n    private String convertToSnakeCase(String name) {\n        if (name == null || name.isEmpty()) {\n            return name;\n        }\n\n        StringBuilder result = new StringBuilder();\n        char firstChar = name.charAt(0);\n        result.append(Character.toLowerCase(firstChar));\n\n        for (int i = 1; i < name.length(); i++) {\n            char currentChar = name.charAt(i);\n            if (Character.isUpperCase(currentChar)) {\n                result.append('_');\n                result.append(Character.toLowerCase(currentChar));\n            } else {\n                result.append(currentChar);\n            }\n        }\n\n        return result.toString();\n    }\n}\n","path":null,"size_bytes":1591,"size_tokens":null},"README.md":{"content":"# Education ERP System\n\nA comprehensive multi-tenant education ERP system built with Spring Boot 3.2.x, designed to manage educational institutions, students, courses, payments, and more.\n\n##  Features\n\n### Core Modules\n- **User Management**: Role-based access control with 9 different roles\n- **Institution Management**: Multi-tenant support with branch management\n- **Student Management**: Complete student lifecycle management\n- **Course Management**: Course and curriculum management\n- **Payment Management**: Payment processing with installment tracking\n- **Inventory Management**: Educational resource and book management\n- **Notification System**: SMS, Email, and Push notifications\n- **Reporting System**: Comprehensive reporting and analytics\n\n### Technical Features\n- **Multi-tenant Architecture**: Support for SHARED_SCHEMA, DEDICATED_DB, and ON-PREMISE deployments\n- **JWT Authentication**: Secure token-based authentication with Redis blacklist\n- **Database Migration**: Flyway-based database versioning\n- **Comprehensive Testing**: Unit, integration, and performance tests\n- **Docker Support**: Containerized deployment\n- **API Documentation**: OpenAPI 3 + Swagger UI\n- **Monitoring**: Spring Boot Actuator with health checks\n\n##  Technology Stack\n\n- **Java**: 17 LTS\n- **Spring Boot**: 3.2.x\n- **Database**: PostgreSQL with HikariCP\n- **Migration**: Flyway\n- **Security**: JWT with JJWT\n- **Caching**: Caffeine\n- **Testing**: JUnit 5, Mockito, TestContainers\n- **Documentation**: OpenAPI 3 + Swagger UI\n- **Build Tool**: Maven\n- **Containerization**: Docker\n\n##  Prerequisites\n\n- Java 17 or higher\n- Maven 3.8+\n- PostgreSQL 13+\n- Docker (optional)\n- Redis (for JWT blacklist)\n\n##  Quick Start\n\n### 1. Clone the Repository\n```bash\ngit clone <repository-url>\ncd education-erp\n```\n\n### 2. Database Setup\n```bash\n# Create PostgreSQL database\ncreatedb education_erp\n\n# Update application.yml with your database credentials\n```\n\n### 3. Build and Run\n```bash\n# Build the project\nmvn clean install\n\n# Run the application\nmvn spring-boot:run\n```\n\n### 4. Access the Application\n- **Application**: http://localhost:8080\n- **Swagger UI**: http://localhost:8080/swagger-ui.html\n- **Actuator Health**: http://localhost:8080/actuator/health\n\n##  Docker Deployment\n\n### Build Docker Image\n```bash\ndocker build -t education-erp:latest .\n```\n\n### Run with Docker Compose\n```bash\ndocker-compose up -d\n```\n\n##  Database Schema\n\nThe system uses Flyway for database migrations. Key tables include:\n\n- `institutions` - Educational institutions\n- `branches` - Institution branches\n- `users` - System users with roles\n- `students` - Student records\n- `courses` - Course information\n- `educational_products` - Books and resources\n- `payments` - Payment transactions\n- `notifications` - Notification records\n- `reports` - Generated reports\n\n##  Security\n\n### Authentication\n- JWT-based authentication\n- Token refresh mechanism\n- Redis-based token blacklist\n- Password policies and validation\n\n### Authorization\n- Role-based access control (RBAC)\n- 9 predefined roles with fine-grained permissions\n- Multi-tenant data isolation\n\n### Roles\n1. **SUPER_ADMIN** - System-wide administration\n2. **INSTITUTION_ADMIN** - Institution management\n3. **BRANCH_MANAGER** - Branch management\n4. **COURSE_MANAGER** - Course management\n5. **ACCOUNTANT** - Financial operations\n6. **REPORT_VIEWER** - Report access\n7. **TEACHER** - Teaching operations\n8. **STUDENT** - Student access\n9. **PARENT** - Parent access\n\n##  Testing\n\n### Run Tests\n```bash\n# Run all tests\nmvn test\n\n# Run specific test profile\nmvn test -Dspring.profiles.active=test-unit\n\n# Run integration tests\nmvn test -Dspring.profiles.active=test-integration\n\n# Run performance tests\nmvn test -Dspring.profiles.active=test-performance\n```\n\n### Test Coverage\n- **Unit Tests**: 80%+ coverage\n- **Integration Tests**: Full API testing\n- **Performance Tests**: Load and stress testing\n\n##  Monitoring\n\n### Health Checks\n- Database connectivity\n- Redis connectivity\n- External service status\n- Tenant-specific health monitoring\n\n### Metrics\n- Application performance metrics\n- Business metrics (student count, revenue, etc.)\n- System resource usage\n\n##  Configuration\n\n### Application Properties\nKey configuration options in `application.yml`:\n\n```yaml\nspring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/education_erp\n    username: your_username\n    password: your_password\n  \n  security:\n    jwt:\n      secret: your-jwt-secret\n      expiration: 86400000  # 24 hours\n```\n\n### Multi-tenant Configuration\n```yaml\neducation-erp:\n  multi-tenant:\n    default-tenant-type: SHARED_SCHEMA\n    tenant-resolution-strategy: HEADER\n```\n\n##  API Documentation\n\n### Swagger UI\nAccess the interactive API documentation at:\nhttp://localhost:8080/swagger-ui.html\n\n### Key Endpoints\n- `POST /api/auth/login` - User authentication\n- `GET /api/students` - List students\n- `POST /api/students` - Create student\n- `GET /api/courses` - List courses\n- `POST /api/payments` - Process payment\n- `GET /api/reports` - Generate reports\n\n##  Deployment\n\n### Production Deployment\n1. **Database Setup**: Configure PostgreSQL with proper security\n2. **Redis Setup**: Configure Redis for JWT blacklist\n3. **Environment Variables**: Set production configuration\n4. **SSL/TLS**: Configure HTTPS\n5. **Load Balancer**: Set up load balancing for high availability\n\n### Environment Variables\n```bash\nexport SPRING_PROFILES_ACTIVE=production\nexport DATABASE_URL=jdbc:postgresql://your-db-host:5432/education_erp\nexport REDIS_URL=redis://your-redis-host:6379\nexport JWT_SECRET=your-production-jwt-secret\n```\n\n##  Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Make your changes\n4. Add tests for new functionality\n5. Ensure all tests pass\n6. Submit a pull request\n\n##  License\n\nThis project is licensed under the MIT License - see the LICENSE file for details.\n\n##  Support\n\nFor support and questions:\n- Create an issue in the repository\n- Check the documentation\n- Review the API documentation\n\n##  Future Enhancements\n\n- **e-Fatura Integration**: Turkish e-invoice system\n- **e-Ariv Integration**: Turkish e-archive system\n- **e-Defter Integration**: Turkish e-ledger system\n- **Mobile App**: React Native mobile application\n- **Advanced Analytics**: Machine learning insights\n- **Multi-language Support**: Internationalization\n- **Advanced Reporting**: Custom report builder\n\n---\n\n**Education ERP System** - Empowering educational institutions with modern technology.","path":null,"size_bytes":6561,"size_tokens":null},"src/main/java/com/educationerp/student_management/entity/Student.java":{"content":"package com.educationerp.student_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * Student entity for the Education ERP System\n * Represents students enrolled in educational institutions\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"students\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"student_number\"}),\n           @UniqueConstraint(columnNames = \"email\")\n       })\npublic class Student extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotBlank(message = \"Student number is required\")\n    @Size(max = 50, message = \"Student number must not exceed 50 characters\")\n    @Column(name = \"student_number\", nullable = false, length = 50)\n    private String studentNumber;\n\n    @NotBlank(message = \"First name is required\")\n    @Size(max = 50, message = \"First name must not exceed 50 characters\")\n    @Column(name = \"first_name\", nullable = false, length = 50)\n    private String firstName;\n\n    @NotBlank(message = \"Last name is required\")\n    @Size(max = 50, message = \"Last name must not exceed 50 characters\")\n    @Column(name = \"last_name\", nullable = false, length = 50)\n    private String lastName;\n\n    @Size(max = 50, message = \"Middle name must not exceed 50 characters\")\n    @Column(name = \"middle_name\", length = 50)\n    private String middleName;\n\n    @NotNull(message = \"Date of birth is required\")\n    @Column(name = \"date_of_birth\", nullable = false)\n    private LocalDate dateOfBirth;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"gender\", length = 10)\n    private Gender gender;\n\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    @Column(name = \"phone_number\", length = 20)\n    private String phoneNumber;\n\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    @Column(name = \"email\", unique = true, length = 100)\n    private String email;\n\n    @NotBlank(message = \"Address is required\")\n    @Size(max = 500, message = \"Address must not exceed 500 characters\")\n    @Column(name = \"address\", nullable = false, length = 500)\n    private String address;\n\n    @Size(max = 100, message = \"City must not exceed 100 characters\")\n    @Column(name = \"city\", length = 100)\n    private String city;\n\n    @Size(max = 100, message = \"State must not exceed 100 characters\")\n    @Column(name = \"state\", length = 100)\n    private String state;\n\n    @Size(max = 20, message = \"Postal code must not exceed 20 characters\")\n    @Column(name = \"postal_code\", length = 20)\n    private String postalCode;\n\n    @Size(max = 100, message = \"Country must not exceed 100 characters\")\n    @Column(name = \"country\", length = 100)\n    private String country;\n\n    @NotNull(message = \"Enrollment date is required\")\n    @Column(name = \"enrollment_date\", nullable = false)\n    private LocalDate enrollmentDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"enrollment_status\", nullable = false)\n    private EnrollmentStatus enrollmentStatus = EnrollmentStatus.ACTIVE;\n\n    @Size(max = 50, message = \"Grade level must not exceed 50 characters\")\n    @Column(name = \"grade_level\", length = 50)\n    private String gradeLevel;\n\n    @Size(max = 100, message = \"Program must not exceed 100 characters\")\n    @Column(name = \"program\", length = 100)\n    private String program;\n\n    @Size(max = 100, message = \"Major must not exceed 100 characters\")\n    @Column(name = \"major\", length = 100)\n    private String major;\n\n    @Column(name = \"gpa\")\n    private Double gpa;\n\n    @Size(max = 500, message = \"Profile picture URL must not exceed 500 characters\")\n    @Column(name = \"profile_picture_url\", length = 500)\n    private String profilePictureUrl;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    @Size(max = 100, message = \"Emergency contact name must not exceed 100 characters\")\n    @Column(name = \"emergency_contact_name\", length = 100)\n    private String emergencyContactName;\n\n    @Size(max = 20, message = \"Emergency contact phone must not exceed 20 characters\")\n    @Column(name = \"emergency_contact_phone\", length = 20)\n    private String emergencyContactPhone;\n\n    @Size(max = 200, message = \"Emergency contact relationship must not exceed 200 characters\")\n    @Column(name = \"emergency_contact_relationship\", length = 200)\n    private String emergencyContactRelationship;\n\n    // Constructors\n    public Student() {\n    }\n\n    public Student(Long institutionId, Long branchId, String studentNumber, String firstName, \n                   String lastName, String middleName, LocalDate dateOfBirth, Gender gender, \n                   String phoneNumber, String email, String address, String city, String state, \n                   String postalCode, String country, LocalDate enrollmentDate, \n                   EnrollmentStatus enrollmentStatus, String gradeLevel, String program, String major) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.studentNumber = studentNumber;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.middleName = middleName;\n        this.dateOfBirth = dateOfBirth;\n        this.gender = gender;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.enrollmentDate = enrollmentDate;\n        this.enrollmentStatus = enrollmentStatus;\n        this.gradeLevel = gradeLevel;\n        this.program = program;\n        this.major = major;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getStudentNumber() {\n        return studentNumber;\n    }\n\n    public void setStudentNumber(String studentNumber) {\n        this.studentNumber = studentNumber;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getMiddleName() {\n        return middleName;\n    }\n\n    public void setMiddleName(String middleName) {\n        this.middleName = middleName;\n    }\n\n    public LocalDate getDateOfBirth() {\n        return dateOfBirth;\n    }\n\n    public void setDateOfBirth(LocalDate dateOfBirth) {\n        this.dateOfBirth = dateOfBirth;\n    }\n\n    public Gender getGender() {\n        return gender;\n    }\n\n    public void setGender(Gender gender) {\n        this.gender = gender;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public LocalDate getEnrollmentDate() {\n        return enrollmentDate;\n    }\n\n    public void setEnrollmentDate(LocalDate enrollmentDate) {\n        this.enrollmentDate = enrollmentDate;\n    }\n\n    public EnrollmentStatus getEnrollmentStatus() {\n        return enrollmentStatus;\n    }\n\n    public void setEnrollmentStatus(EnrollmentStatus enrollmentStatus) {\n        this.enrollmentStatus = enrollmentStatus;\n    }\n\n    public String getGradeLevel() {\n        return gradeLevel;\n    }\n\n    public void setGradeLevel(String gradeLevel) {\n        this.gradeLevel = gradeLevel;\n    }\n\n    public String getProgram() {\n        return program;\n    }\n\n    public void setProgram(String program) {\n        this.program = program;\n    }\n\n    public String getMajor() {\n        return major;\n    }\n\n    public void setMajor(String major) {\n        this.major = major;\n    }\n\n    public Double getGpa() {\n        return gpa;\n    }\n\n    public void setGpa(Double gpa) {\n        this.gpa = gpa;\n    }\n\n    public String getProfilePictureUrl() {\n        return profilePictureUrl;\n    }\n\n    public void setProfilePictureUrl(String profilePictureUrl) {\n        this.profilePictureUrl = profilePictureUrl;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    public String getEmergencyContactName() {\n        return emergencyContactName;\n    }\n\n    public void setEmergencyContactName(String emergencyContactName) {\n        this.emergencyContactName = emergencyContactName;\n    }\n\n    public String getEmergencyContactPhone() {\n        return emergencyContactPhone;\n    }\n\n    public void setEmergencyContactPhone(String emergencyContactPhone) {\n        this.emergencyContactPhone = emergencyContactPhone;\n    }\n\n    public String getEmergencyContactRelationship() {\n        return emergencyContactRelationship;\n    }\n\n    public void setEmergencyContactRelationship(String emergencyContactRelationship) {\n        this.emergencyContactRelationship = emergencyContactRelationship;\n    }\n\n    // Business methods\n    public String getFullName() {\n        StringBuilder fullName = new StringBuilder(firstName);\n        if (middleName != null && !middleName.trim().isEmpty()) {\n            fullName.append(\" \").append(middleName);\n        }\n        fullName.append(\" \").append(lastName);\n        return fullName.toString();\n    }\n\n    public String getFullAddress() {\n        StringBuilder address = new StringBuilder();\n        if (this.address != null) address.append(this.address);\n        if (this.city != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.city);\n        }\n        if (this.state != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.state);\n        }\n        if (this.postalCode != null) {\n            if (address.length() > 0) address.append(\" \");\n            address.append(this.postalCode);\n        }\n        if (this.country != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.country);\n        }\n        return address.toString();\n    }\n\n    public int getAge() {\n        return LocalDate.now().getYear() - dateOfBirth.getYear();\n    }\n\n    public boolean isActive() {\n        return enrollmentStatus == EnrollmentStatus.ACTIVE && getIsActive();\n    }\n\n    // Enums\n    public enum Gender {\n        MALE, FEMALE, OTHER\n    }\n\n    public enum EnrollmentStatus {\n        ACTIVE, INACTIVE, SUSPENDED, GRADUATED, TRANSFERRED, DROPPED\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Student student = (Student) o;\n        return Objects.equals(institutionId, student.institutionId) &&\n                Objects.equals(studentNumber, student.studentNumber) &&\n                Objects.equals(email, student.email);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, studentNumber, email);\n    }\n\n    @Override\n    public String toString() {\n        return \"Student{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", studentNumber='\" + studentNumber + '\\'' +\n                \", firstName='\" + firstName + '\\'' +\n                \", lastName='\" + lastName + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", enrollmentStatus=\" + enrollmentStatus +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":13256,"size_tokens":null},"src/main/java/com/educationerp/institution_management/repository/InstitutionRepository.java":{"content":"package com.educationerp.institution_management.repository;\n\nimport com.educationerp.institution_management.entity.Institution;\nimport com.educationerp.security.enums.TenantType;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * Repository interface for Institution entity\n * Provides data access methods for institution management\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Repository\npublic interface InstitutionRepository extends JpaRepository<Institution, Long> {\n\n    /**\n     * Find institution by code and active status\n     */\n    Optional<Institution> findByCodeAndIsActiveTrue(String code);\n\n    /**\n     * Find institution by email and active status\n     */\n    Optional<Institution> findByEmailAndIsActiveTrue(String email);\n\n    /**\n     * Find institution by code (including inactive)\n     */\n    Optional<Institution> findByCode(String code);\n\n    /**\n     * Find institution by email (including inactive)\n     */\n    Optional<Institution> findByEmail(String email);\n\n    /**\n     * Find institutions by tenant type\n     */\n    List<Institution> findByTenantTypeAndIsActiveTrue(TenantType tenantType);\n\n    /**\n     * Find institutions by tenant type with pagination\n     */\n    Page<Institution> findByTenantTypeAndIsActiveTrue(TenantType tenantType, Pageable pageable);\n\n    /**\n     * Find institutions by city\n     */\n    @Query(\"SELECT i FROM Institution i WHERE LOWER(i.city) = LOWER(:city) AND i.isActive = true\")\n    List<Institution> findByCityIgnoreCase(@Param(\"city\") String city);\n\n    /**\n     * Find institutions by state\n     */\n    @Query(\"SELECT i FROM Institution i WHERE LOWER(i.state) = LOWER(:state) AND i.isActive = true\")\n    List<Institution> findByStateIgnoreCase(@Param(\"state\") String state);\n\n    /**\n     * Find institutions by country\n     */\n    @Query(\"SELECT i FROM Institution i WHERE LOWER(i.country) = LOWER(:country) AND i.isActive = true\")\n    List<Institution> findByCountryIgnoreCase(@Param(\"country\") String country);\n\n    /**\n     * Find institutions by name pattern\n     */\n    @Query(\"SELECT i FROM Institution i WHERE LOWER(i.name) LIKE LOWER(CONCAT('%', :name, '%')) AND i.isActive = true\")\n    List<Institution> findByNameContainingIgnoreCase(@Param(\"name\") String name);\n\n    /**\n     * Find institutions by name pattern with pagination\n     */\n    @Query(\"SELECT i FROM Institution i WHERE LOWER(i.name) LIKE LOWER(CONCAT('%', :name, '%')) AND i.isActive = true\")\n    Page<Institution> findByNameContainingIgnoreCase(@Param(\"name\") String name, Pageable pageable);\n\n    /**\n     * Check if code exists\n     */\n    boolean existsByCode(String code);\n\n    /**\n     * Check if email exists\n     */\n    boolean existsByEmail(String email);\n\n    /**\n     * Check if code exists excluding specific institution ID\n     */\n    @Query(\"SELECT COUNT(i) > 0 FROM Institution i WHERE i.code = :code AND i.id != :institutionId\")\n    boolean existsByCodeAndIdNot(@Param(\"code\") String code, @Param(\"institutionId\") Long institutionId);\n\n    /**\n     * Check if email exists excluding specific institution ID\n     */\n    @Query(\"SELECT COUNT(i) > 0 FROM Institution i WHERE i.email = :email AND i.id != :institutionId\")\n    boolean existsByEmailAndIdNot(@Param(\"email\") String email, @Param(\"institutionId\") Long institutionId);\n\n    /**\n     * Count institutions by tenant type\n     */\n    long countByTenantTypeAndIsActiveTrue(TenantType tenantType);\n\n    /**\n     * Count institutions by city\n     */\n    @Query(\"SELECT COUNT(i) FROM Institution i WHERE LOWER(i.city) = LOWER(:city) AND i.isActive = true\")\n    long countByCityIgnoreCase(@Param(\"city\") String city);\n\n    /**\n     * Count institutions by state\n     */\n    @Query(\"SELECT COUNT(i) FROM Institution i WHERE LOWER(i.state) = LOWER(:state) AND i.isActive = true\")\n    long countByStateIgnoreCase(@Param(\"state\") String state);\n\n    /**\n     * Count institutions by country\n     */\n    @Query(\"SELECT COUNT(i) FROM Institution i WHERE LOWER(i.country) = LOWER(:country) AND i.isActive = true\")\n    long countByCountryIgnoreCase(@Param(\"country\") String country);\n}\n","path":null,"size_bytes":4418,"size_tokens":null},"src/main/java/com/educationerp/institution_management/dto/InstitutionResponse.java":{"content":"package com.educationerp.institution_management.dto;\n\nimport com.educationerp.security.enums.TenantType;\nimport com.fasterxml.jackson.annotation.JsonFormat;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * DTO for institution response data\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\npublic class InstitutionResponse {\n\n    private Long id;\n    private String name;\n    private String code;\n    private String description;\n    private String address;\n    private String city;\n    private String state;\n    private String postalCode;\n    private String country;\n    private String fullAddress;\n    private String phoneNumber;\n    private String email;\n    private String websiteUrl;\n    private TenantType tenantType;\n    private String databaseName;\n    private String schemaName;\n    private String connectionString;\n    private Boolean isActive;\n    private String logoUrl;\n    private String settingsJson;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime createdDate;\n    \n    private String createdBy;\n    \n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime updatedDate;\n    \n    private String updatedBy;\n\n    // Constructors\n    public InstitutionResponse() {\n    }\n\n    public InstitutionResponse(Long id, String name, String code, String description, String address, \n                              String city, String state, String postalCode, String country, \n                              String fullAddress, String phoneNumber, String email, String websiteUrl, \n                              TenantType tenantType, String databaseName, String schemaName, \n                              String connectionString, Boolean isActive, String logoUrl, \n                              String settingsJson, LocalDateTime createdDate, String createdBy, \n                              LocalDateTime updatedDate, String updatedBy) {\n        this.id = id;\n        this.name = name;\n        this.code = code;\n        this.description = description;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.fullAddress = fullAddress;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.websiteUrl = websiteUrl;\n        this.tenantType = tenantType;\n        this.databaseName = databaseName;\n        this.schemaName = schemaName;\n        this.connectionString = connectionString;\n        this.isActive = isActive;\n        this.logoUrl = logoUrl;\n        this.settingsJson = settingsJson;\n        this.createdDate = createdDate;\n        this.createdBy = createdBy;\n        this.updatedDate = updatedDate;\n        this.updatedBy = updatedBy;\n    }\n\n    // Builder pattern\n    public static Builder builder() {\n        return new Builder();\n    }\n\n    public static class Builder {\n        private Long id;\n        private String name;\n        private String code;\n        private String description;\n        private String address;\n        private String city;\n        private String state;\n        private String postalCode;\n        private String country;\n        private String fullAddress;\n        private String phoneNumber;\n        private String email;\n        private String websiteUrl;\n        private TenantType tenantType;\n        private String databaseName;\n        private String schemaName;\n        private String connectionString;\n        private Boolean isActive;\n        private String logoUrl;\n        private String settingsJson;\n        private LocalDateTime createdDate;\n        private String createdBy;\n        private LocalDateTime updatedDate;\n        private String updatedBy;\n\n        public Builder id(Long id) {\n            this.id = id;\n            return this;\n        }\n\n        public Builder name(String name) {\n            this.name = name;\n            return this;\n        }\n\n        public Builder code(String code) {\n            this.code = code;\n            return this;\n        }\n\n        public Builder description(String description) {\n            this.description = description;\n            return this;\n        }\n\n        public Builder address(String address) {\n            this.address = address;\n            return this;\n        }\n\n        public Builder city(String city) {\n            this.city = city;\n            return this;\n        }\n\n        public Builder state(String state) {\n            this.state = state;\n            return this;\n        }\n\n        public Builder postalCode(String postalCode) {\n            this.postalCode = postalCode;\n            return this;\n        }\n\n        public Builder country(String country) {\n            this.country = country;\n            return this;\n        }\n\n        public Builder fullAddress(String fullAddress) {\n            this.fullAddress = fullAddress;\n            return this;\n        }\n\n        public Builder phoneNumber(String phoneNumber) {\n            this.phoneNumber = phoneNumber;\n            return this;\n        }\n\n        public Builder email(String email) {\n            this.email = email;\n            return this;\n        }\n\n        public Builder websiteUrl(String websiteUrl) {\n            this.websiteUrl = websiteUrl;\n            return this;\n        }\n\n        public Builder tenantType(TenantType tenantType) {\n            this.tenantType = tenantType;\n            return this;\n        }\n\n        public Builder databaseName(String databaseName) {\n            this.databaseName = databaseName;\n            return this;\n        }\n\n        public Builder schemaName(String schemaName) {\n            this.schemaName = schemaName;\n            return this;\n        }\n\n        public Builder connectionString(String connectionString) {\n            this.connectionString = connectionString;\n            return this;\n        }\n\n        public Builder isActive(Boolean isActive) {\n            this.isActive = isActive;\n            return this;\n        }\n\n        public Builder logoUrl(String logoUrl) {\n            this.logoUrl = logoUrl;\n            return this;\n        }\n\n        public Builder settingsJson(String settingsJson) {\n            this.settingsJson = settingsJson;\n            return this;\n        }\n\n        public Builder createdDate(LocalDateTime createdDate) {\n            this.createdDate = createdDate;\n            return this;\n        }\n\n        public Builder createdBy(String createdBy) {\n            this.createdBy = createdBy;\n            return this;\n        }\n\n        public Builder updatedDate(LocalDateTime updatedDate) {\n            this.updatedDate = updatedDate;\n            return this;\n        }\n\n        public Builder updatedBy(String updatedBy) {\n            this.updatedBy = updatedBy;\n            return this;\n        }\n\n        public InstitutionResponse build() {\n            return new InstitutionResponse(id, name, code, description, address, city, state, \n                                         postalCode, country, fullAddress, phoneNumber, email, \n                                         websiteUrl, tenantType, databaseName, schemaName, \n                                         connectionString, isActive, logoUrl, settingsJson, \n                                         createdDate, createdBy, updatedDate, updatedBy);\n        }\n    }\n\n    // Getters and Setters\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getFullAddress() {\n        return fullAddress;\n    }\n\n    public void setFullAddress(String fullAddress) {\n        this.fullAddress = fullAddress;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getWebsiteUrl() {\n        return websiteUrl;\n    }\n\n    public void setWebsiteUrl(String websiteUrl) {\n        this.websiteUrl = websiteUrl;\n    }\n\n    public TenantType getTenantType() {\n        return tenantType;\n    }\n\n    public void setTenantType(TenantType tenantType) {\n        this.tenantType = tenantType;\n    }\n\n    public String getDatabaseName() {\n        return databaseName;\n    }\n\n    public void setDatabaseName(String databaseName) {\n        this.databaseName = databaseName;\n    }\n\n    public String getSchemaName() {\n        return schemaName;\n    }\n\n    public void setSchemaName(String schemaName) {\n        this.schemaName = schemaName;\n    }\n\n    public String getConnectionString() {\n        return connectionString;\n    }\n\n    public void setConnectionString(String connectionString) {\n        this.connectionString = connectionString;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean isActive) {\n        this.isActive = isActive;\n    }\n\n    public String getLogoUrl() {\n        return logoUrl;\n    }\n\n    public void setLogoUrl(String logoUrl) {\n        this.logoUrl = logoUrl;\n    }\n\n    public String getSettingsJson() {\n        return settingsJson;\n    }\n\n    public void setSettingsJson(String settingsJson) {\n        this.settingsJson = settingsJson;\n    }\n\n    public LocalDateTime getCreatedDate() {\n        return createdDate;\n    }\n\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = createdDate;\n    }\n\n    public String getCreatedBy() {\n        return createdBy;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    public LocalDateTime getUpdatedDate() {\n        return updatedDate;\n    }\n\n    public void setUpdatedDate(LocalDateTime updatedDate) {\n        this.updatedDate = updatedDate;\n    }\n\n    public String getUpdatedBy() {\n        return updatedBy;\n    }\n\n    public void setUpdatedBy(String updatedBy) {\n        this.updatedBy = updatedBy;\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        InstitutionResponse that = (InstitutionResponse) o;\n        return Objects.equals(id, that.id) &&\n                Objects.equals(code, that.code) &&\n                Objects.equals(email, that.email);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, code, email);\n    }\n\n    @Override\n    public String toString() {\n        return \"InstitutionResponse{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", code='\" + code + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", tenantType=\" + tenantType +\n                \", isActive=\" + isActive +\n                '}';\n    }\n}\n","path":null,"size_bytes":12036,"size_tokens":null},"src/main/java/com/educationerp/course_management/entity/Curriculum.java":{"content":"package com.educationerp.course_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.time.LocalDate;\nimport java.util.Objects;\n\n/**\n * Curriculum entity for the Education ERP System\n * Represents curriculum/program structures\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"curricula\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = {\"institution_id\", \"curriculum_code\"})\n       })\npublic class Curriculum extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotBlank(message = \"Curriculum code is required\")\n    @Size(max = 20, message = \"Curriculum code must not exceed 20 characters\")\n    @Column(name = \"curriculum_code\", nullable = false, length = 20)\n    private String curriculumCode;\n\n    @NotBlank(message = \"Curriculum name is required\")\n    @Size(max = 200, message = \"Curriculum name must not exceed 200 characters\")\n    @Column(name = \"curriculum_name\", nullable = false, length = 200)\n    private String curriculumName;\n\n    @Size(max = 1000, message = \"Description must not exceed 1000 characters\")\n    @Column(name = \"description\", length = 1000)\n    private String description;\n\n    @Size(max = 100, message = \"Department must not exceed 100 characters\")\n    @Column(name = \"department\", length = 100)\n    private String department;\n\n    @Size(max = 50, message = \"Degree level must not exceed 50 characters\")\n    @Column(name = \"degree_level\", length = 50)\n    private String degreeLevel;\n\n    @Column(name = \"total_credits\")\n    private Integer totalCredits;\n\n    @Column(name = \"duration_years\")\n    private Integer durationYears;\n\n    @Column(name = \"duration_semesters\")\n    private Integer durationSemesters;\n\n    @NotNull(message = \"Start date is required\")\n    @Column(name = \"start_date\", nullable = false)\n    private LocalDate startDate;\n\n    @Column(name = \"end_date\")\n    private LocalDate endDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private CurriculumStatus status = CurriculumStatus.ACTIVE;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"type\", nullable = false)\n    private CurriculumType type = CurriculumType.UNDERGRADUATE;\n\n    @Size(max = 100, message = \"Coordinator name must not exceed 100 characters\")\n    @Column(name = \"coordinator_name\", length = 100)\n    private String coordinatorName;\n\n    @Column(name = \"coordinator_id\")\n    private Long coordinatorId;\n\n    @Size(max = 1000, message = \"Learning outcomes must not exceed 1000 characters\")\n    @Column(name = \"learning_outcomes\", length = 1000)\n    private String learningOutcomes;\n\n    @Size(max = 1000, message = \"Career prospects must not exceed 1000 characters\")\n    @Column(name = \"career_prospects\", length = 1000)\n    private String careerProspects;\n\n    @Size(max = 1000, message = \"Admission requirements must not exceed 1000 characters\")\n    @Column(name = \"admission_requirements\", length = 1000)\n    private String admissionRequirements;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public Curriculum() {\n    }\n\n    public Curriculum(Long institutionId, Long branchId, String curriculumCode, String curriculumName, \n                     String description, String department, String degreeLevel, Integer totalCredits, \n                     Integer durationYears, Integer durationSemesters, LocalDate startDate, LocalDate endDate, \n                     CurriculumStatus status, CurriculumType type, String coordinatorName, Long coordinatorId) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.curriculumCode = curriculumCode;\n        this.curriculumName = curriculumName;\n        this.description = description;\n        this.department = department;\n        this.degreeLevel = degreeLevel;\n        this.totalCredits = totalCredits;\n        this.durationYears = durationYears;\n        this.durationSemesters = durationSemesters;\n        this.startDate = startDate;\n        this.endDate = endDate;\n        this.status = status;\n        this.type = type;\n        this.coordinatorName = coordinatorName;\n        this.coordinatorId = coordinatorId;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public String getCurriculumCode() {\n        return curriculumCode;\n    }\n\n    public void setCurriculumCode(String curriculumCode) {\n        this.curriculumCode = curriculumCode;\n    }\n\n    public String getCurriculumName() {\n        return curriculumName;\n    }\n\n    public void setCurriculumName(String curriculumName) {\n        this.curriculumName = curriculumName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getDepartment() {\n        return department;\n    }\n\n    public void setDepartment(String department) {\n        this.department = department;\n    }\n\n    public String getDegreeLevel() {\n        return degreeLevel;\n    }\n\n    public void setDegreeLevel(String degreeLevel) {\n        this.degreeLevel = degreeLevel;\n    }\n\n    public Integer getTotalCredits() {\n        return totalCredits;\n    }\n\n    public void setTotalCredits(Integer totalCredits) {\n        this.totalCredits = totalCredits;\n    }\n\n    public Integer getDurationYears() {\n        return durationYears;\n    }\n\n    public void setDurationYears(Integer durationYears) {\n        this.durationYears = durationYears;\n    }\n\n    public Integer getDurationSemesters() {\n        return durationSemesters;\n    }\n\n    public void setDurationSemesters(Integer durationSemesters) {\n        this.durationSemesters = durationSemesters;\n    }\n\n    public LocalDate getStartDate() {\n        return startDate;\n    }\n\n    public void setStartDate(LocalDate startDate) {\n        this.startDate = startDate;\n    }\n\n    public LocalDate getEndDate() {\n        return endDate;\n    }\n\n    public void setEndDate(LocalDate endDate) {\n        this.endDate = endDate;\n    }\n\n    public CurriculumStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(CurriculumStatus status) {\n        this.status = status;\n    }\n\n    public CurriculumType getType() {\n        return type;\n    }\n\n    public void setType(CurriculumType type) {\n        this.type = type;\n    }\n\n    public String getCoordinatorName() {\n        return coordinatorName;\n    }\n\n    public void setCoordinatorName(String coordinatorName) {\n        this.coordinatorName = coordinatorName;\n    }\n\n    public Long getCoordinatorId() {\n        return coordinatorId;\n    }\n\n    public void setCoordinatorId(Long coordinatorId) {\n        this.coordinatorId = coordinatorId;\n    }\n\n    public String getLearningOutcomes() {\n        return learningOutcomes;\n    }\n\n    public void setLearningOutcomes(String learningOutcomes) {\n        this.learningOutcomes = learningOutcomes;\n    }\n\n    public String getCareerProspects() {\n        return careerProspects;\n    }\n\n    public void setCareerProspects(String careerProspects) {\n        this.careerProspects = careerProspects;\n    }\n\n    public String getAdmissionRequirements() {\n        return admissionRequirements;\n    }\n\n    public void setAdmissionRequirements(String admissionRequirements) {\n        this.admissionRequirements = admissionRequirements;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isActive() {\n        return status == CurriculumStatus.ACTIVE && getIsActive();\n    }\n\n    public boolean isOngoing() {\n        LocalDate today = LocalDate.now();\n        return startDate != null && startDate.isBefore(today) && \n               (endDate == null || endDate.isAfter(today));\n    }\n\n    public boolean isUpcoming() {\n        return startDate != null && startDate.isAfter(LocalDate.now());\n    }\n\n    public boolean isCompleted() {\n        return endDate != null && endDate.isBefore(LocalDate.now());\n    }\n\n    public void activate() {\n        this.status = CurriculumStatus.ACTIVE;\n    }\n\n    public void suspend() {\n        this.status = CurriculumStatus.SUSPENDED;\n    }\n\n    public void complete() {\n        this.status = CurriculumStatus.COMPLETED;\n    }\n\n    public void archive() {\n        this.status = CurriculumStatus.ARCHIVED;\n    }\n\n    // Enums\n    public enum CurriculumStatus {\n        ACTIVE, SUSPENDED, COMPLETED, ARCHIVED, DRAFT\n    }\n\n    public enum CurriculumType {\n        UNDERGRADUATE, GRADUATE, POSTGRADUATE, CERTIFICATE, DIPLOMA, ASSOCIATE, BACHELOR, MASTER, DOCTORATE\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Curriculum that = (Curriculum) o;\n        return Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(curriculumCode, that.curriculumCode);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, curriculumCode);\n    }\n\n    @Override\n    public String toString() {\n        return \"Curriculum{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", curriculumCode='\" + curriculumCode + '\\'' +\n                \", curriculumName='\" + curriculumName + '\\'' +\n                \", status=\" + status +\n                \", type=\" + type +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":10352,"size_tokens":null},"src/main/java/com/educationerp/notification/entity/Notification.java":{"content":"package com.educationerp.notification.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.time.LocalDateTime;\nimport java.util.Objects;\n\n/**\n * Notification entity for the Education ERP System\n * Represents notifications sent to users\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"notifications\")\npublic class Notification extends BaseEntity {\n\n    @NotNull(message = \"Institution ID is required\")\n    @Column(name = \"institution_id\", nullable = false)\n    private Long institutionId;\n\n    @Column(name = \"branch_id\")\n    private Long branchId;\n\n    @NotNull(message = \"Recipient ID is required\")\n    @Column(name = \"recipient_id\", nullable = false)\n    private Long recipientId;\n\n    @Size(max = 50, message = \"Recipient type must not exceed 50 characters\")\n    @Column(name = \"recipient_type\", length = 50)\n    private String recipientType;\n\n    @NotBlank(message = \"Title is required\")\n    @Size(max = 200, message = \"Title must not exceed 200 characters\")\n    @Column(name = \"title\", nullable = false, length = 200)\n    private String title;\n\n    @NotBlank(message = \"Message is required\")\n    @Size(max = 2000, message = \"Message must not exceed 2000 characters\")\n    @Column(name = \"message\", nullable = false, length = 2000)\n    private String message;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"notification_type\", nullable = false)\n    private NotificationType notificationType = NotificationType.INFO;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"channel\", nullable = false)\n    private NotificationChannel channel = NotificationChannel.EMAIL;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    private NotificationStatus status = NotificationStatus.PENDING;\n\n    @Column(name = \"scheduled_time\")\n    private LocalDateTime scheduledTime;\n\n    @Column(name = \"sent_time\")\n    private LocalDateTime sentTime;\n\n    @Column(name = \"read_time\")\n    private LocalDateTime readTime;\n\n    @Column(name = \"is_read\", nullable = false)\n    private Boolean isRead = false;\n\n    @Size(max = 100, message = \"Sender name must not exceed 100 characters\")\n    @Column(name = \"sender_name\", length = 100)\n    private String senderName;\n\n    @Column(name = \"sender_id\")\n    private Long senderId;\n\n    @Size(max = 200, message = \"Email address must not exceed 200 characters\")\n    @Column(name = \"email_address\", length = 200)\n    private String emailAddress;\n\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    @Column(name = \"phone_number\", length = 20)\n    private String phoneNumber;\n\n    @Size(max = 100, message = \"Template name must not exceed 100 characters\")\n    @Column(name = \"template_name\", length = 100)\n    private String templateName;\n\n    @Size(max = 1000, message = \"Template variables must not exceed 1000 characters\")\n    @Column(name = \"template_variables\", length = 1000)\n    private String templateVariables;\n\n    @Size(max = 100, message = \"Priority must not exceed 100 characters\")\n    @Column(name = \"priority\", length = 100)\n    private String priority = \"NORMAL\";\n\n    @Size(max = 1000, message = \"Error message must not exceed 1000 characters\")\n    @Column(name = \"error_message\", length = 1000)\n    private String errorMessage;\n\n    @Column(name = \"retry_count\", nullable = false)\n    private Integer retryCount = 0;\n\n    @Column(name = \"max_retries\", nullable = false)\n    private Integer maxRetries = 3;\n\n    @Size(max = 1000, message = \"Notes must not exceed 1000 characters\")\n    @Column(name = \"notes\", length = 1000)\n    private String notes;\n\n    // Constructors\n    public Notification() {\n    }\n\n    public Notification(Long institutionId, Long branchId, Long recipientId, String recipientType, \n                       String title, String message, NotificationType notificationType, \n                       NotificationChannel channel, NotificationStatus status, String senderName, \n                       Long senderId, String emailAddress, String phoneNumber) {\n        this.institutionId = institutionId;\n        this.branchId = branchId;\n        this.recipientId = recipientId;\n        this.recipientType = recipientType;\n        this.title = title;\n        this.message = message;\n        this.notificationType = notificationType;\n        this.channel = channel;\n        this.status = status;\n        this.senderName = senderName;\n        this.senderId = senderId;\n        this.emailAddress = emailAddress;\n        this.phoneNumber = phoneNumber;\n    }\n\n    // Getters and Setters\n    public Long getInstitutionId() {\n        return institutionId;\n    }\n\n    public void setInstitutionId(Long institutionId) {\n        this.institutionId = institutionId;\n    }\n\n    public Long getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(Long branchId) {\n        this.branchId = branchId;\n    }\n\n    public Long getRecipientId() {\n        return recipientId;\n    }\n\n    public void setRecipientId(Long recipientId) {\n        this.recipientId = recipientId;\n    }\n\n    public String getRecipientType() {\n        return recipientType;\n    }\n\n    public void setRecipientType(String recipientType) {\n        this.recipientType = recipientType;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public NotificationType getNotificationType() {\n        return notificationType;\n    }\n\n    public void setNotificationType(NotificationType notificationType) {\n        this.notificationType = notificationType;\n    }\n\n    public NotificationChannel getChannel() {\n        return channel;\n    }\n\n    public void setChannel(NotificationChannel channel) {\n        this.channel = channel;\n    }\n\n    public NotificationStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(NotificationStatus status) {\n        this.status = status;\n    }\n\n    public LocalDateTime getScheduledTime() {\n        return scheduledTime;\n    }\n\n    public void setScheduledTime(LocalDateTime scheduledTime) {\n        this.scheduledTime = scheduledTime;\n    }\n\n    public LocalDateTime getSentTime() {\n        return sentTime;\n    }\n\n    public void setSentTime(LocalDateTime sentTime) {\n        this.sentTime = sentTime;\n    }\n\n    public LocalDateTime getReadTime() {\n        return readTime;\n    }\n\n    public void setReadTime(LocalDateTime readTime) {\n        this.readTime = readTime;\n    }\n\n    public Boolean getIsRead() {\n        return isRead;\n    }\n\n    public void setIsRead(Boolean isRead) {\n        this.isRead = isRead;\n    }\n\n    public String getSenderName() {\n        return senderName;\n    }\n\n    public void setSenderName(String senderName) {\n        this.senderName = senderName;\n    }\n\n    public Long getSenderId() {\n        return senderId;\n    }\n\n    public void setSenderId(Long senderId) {\n        this.senderId = senderId;\n    }\n\n    public String getEmailAddress() {\n        return emailAddress;\n    }\n\n    public void setEmailAddress(String emailAddress) {\n        this.emailAddress = emailAddress;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getTemplateName() {\n        return templateName;\n    }\n\n    public void setTemplateName(String templateName) {\n        this.templateName = templateName;\n    }\n\n    public String getTemplateVariables() {\n        return templateVariables;\n    }\n\n    public void setTemplateVariables(String templateVariables) {\n        this.templateVariables = templateVariables;\n    }\n\n    public String getPriority() {\n        return priority;\n    }\n\n    public void setPriority(String priority) {\n        this.priority = priority;\n    }\n\n    public String getErrorMessage() {\n        return errorMessage;\n    }\n\n    public void setErrorMessage(String errorMessage) {\n        this.errorMessage = errorMessage;\n    }\n\n    public Integer getRetryCount() {\n        return retryCount;\n    }\n\n    public void setRetryCount(Integer retryCount) {\n        this.retryCount = retryCount;\n    }\n\n    public Integer getMaxRetries() {\n        return maxRetries;\n    }\n\n    public void setMaxRetries(Integer maxRetries) {\n        this.maxRetries = maxRetries;\n    }\n\n    public String getNotes() {\n        return notes;\n    }\n\n    public void setNotes(String notes) {\n        this.notes = notes;\n    }\n\n    // Business methods\n    public boolean isPending() {\n        return status == NotificationStatus.PENDING;\n    }\n\n    public boolean isSent() {\n        return status == NotificationStatus.SENT;\n    }\n\n    public boolean isFailed() {\n        return status == NotificationStatus.FAILED;\n    }\n\n    public boolean isDelivered() {\n        return status == NotificationStatus.DELIVERED;\n    }\n\n    public boolean isRead() {\n        return isRead != null && isRead;\n    }\n\n    public boolean isScheduled() {\n        return scheduledTime != null && scheduledTime.isAfter(LocalDateTime.now());\n    }\n\n    public boolean canRetry() {\n        return retryCount != null && maxRetries != null && retryCount < maxRetries;\n    }\n\n    public void markAsSent() {\n        this.status = NotificationStatus.SENT;\n        this.sentTime = LocalDateTime.now();\n    }\n\n    public void markAsDelivered() {\n        this.status = NotificationStatus.DELIVERED;\n    }\n\n    public void markAsFailed(String errorMessage) {\n        this.status = NotificationStatus.FAILED;\n        this.errorMessage = errorMessage;\n    }\n\n    public void markAsRead() {\n        this.isRead = true;\n        this.readTime = LocalDateTime.now();\n    }\n\n    public void incrementRetryCount() {\n        if (retryCount == null) {\n            retryCount = 0;\n        }\n        retryCount++;\n    }\n\n    public void resetRetryCount() {\n        this.retryCount = 0;\n    }\n\n    // Enums\n    public enum NotificationType {\n        INFO, WARNING, ERROR, SUCCESS, REMINDER, ALERT, ANNOUNCEMENT, PAYMENT_REMINDER, \n        EXAM_NOTIFICATION, COURSE_UPDATE, SYSTEM_MAINTENANCE, SECURITY_ALERT\n    }\n\n    public enum NotificationChannel {\n        EMAIL, SMS, PUSH, IN_APP, WEBHOOK\n    }\n\n    public enum NotificationStatus {\n        PENDING, SENT, DELIVERED, FAILED, CANCELLED, SCHEDULED\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Notification that = (Notification) o;\n        return Objects.equals(institutionId, that.institutionId) &&\n                Objects.equals(recipientId, that.recipientId) &&\n                Objects.equals(title, that.title);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), institutionId, recipientId, title);\n    }\n\n    @Override\n    public String toString() {\n        return \"Notification{\" +\n                \"id=\" + getId() +\n                \", institutionId=\" + institutionId +\n                \", recipientId=\" + recipientId +\n                \", title='\" + title + '\\'' +\n                \", notificationType=\" + notificationType +\n                \", channel=\" + channel +\n                \", status=\" + status +\n                \", isRead=\" + isRead +\n                '}';\n    }\n}\n","path":null,"size_bytes":11686,"size_tokens":null},"src/main/java/com/educationerp/user_management/repository/UserRepository.java":{"content":"package com.educationerp.user_management.repository;\n\nimport com.educationerp.security.enums.Role;\nimport com.educationerp.user_management.entity.User;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\nimport java.util.Optional;\n\n/**\n * Repository interface for User entity\n * Provides data access methods for user management\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Repository\npublic interface UserRepository extends JpaRepository<User, Long> {\n\n    /**\n     * Find user by username and active status\n     */\n    Optional<User> findByUsernameAndIsActiveTrue(String username);\n\n    /**\n     * Find user by email and active status\n     */\n    Optional<User> findByEmailAndIsActiveTrue(String email);\n\n    /**\n     * Find user by username (including inactive)\n     */\n    Optional<User> findByUsername(String username);\n\n    /**\n     * Find user by email (including inactive)\n     */\n    Optional<User> findByEmail(String email);\n\n    /**\n     * Find users by role and active status\n     */\n    List<User> findByRoleAndIsActiveTrue(Role role);\n\n    /**\n     * Find users by role with pagination\n     */\n    Page<User> findByRoleAndIsActiveTrue(Role role, Pageable pageable);\n\n    /**\n     * Find users by institution ID and active status\n     */\n    @Query(\"SELECT u FROM User u WHERE u.institutionId = :institutionId AND u.isActive = true\")\n    List<User> findByInstitutionIdAndIsActiveTrue(@Param(\"institutionId\") Long institutionId);\n\n    /**\n     * Find users by institution ID with pagination\n     */\n    @Query(\"SELECT u FROM User u WHERE u.institutionId = :institutionId AND u.isActive = true\")\n    Page<User> findByInstitutionIdAndIsActiveTrue(@Param(\"institutionId\") Long institutionId, Pageable pageable);\n\n    /**\n     * Find users by branch ID and active status\n     */\n    @Query(\"SELECT u FROM User u WHERE u.branchId = :branchId AND u.isActive = true\")\n    List<User> findByBranchIdAndIsActiveTrue(@Param(\"branchId\") Long branchId);\n\n    /**\n     * Find users by branch ID with pagination\n     */\n    @Query(\"SELECT u FROM User u WHERE u.branchId = :branchId AND u.isActive = true\")\n    Page<User> findByBranchIdAndIsActiveTrue(@Param(\"branchId\") Long branchId, Pageable pageable);\n\n    /**\n     * Find locked users\n     */\n    List<User> findByIsLockedTrueAndIsActiveTrue();\n\n    /**\n     * Find users with failed login attempts\n     */\n    @Query(\"SELECT u FROM User u WHERE u.failedLoginAttempts > 0 AND u.isActive = true\")\n    List<User> findUsersWithFailedLoginAttempts();\n\n    /**\n     * Find users who must change password\n     */\n    List<User> findByMustChangePasswordTrueAndIsActiveTrue();\n\n    /**\n     * Find users by last login date range\n     */\n    @Query(\"SELECT u FROM User u WHERE u.lastLoginDate BETWEEN :startDate AND :endDate AND u.isActive = true\")\n    List<User> findByLastLoginDateBetween(@Param(\"startDate\") LocalDateTime startDate, \n                                         @Param(\"endDate\") LocalDateTime endDate);\n\n    /**\n     * Find users by name pattern (first name or last name)\n     */\n    @Query(\"SELECT u FROM User u WHERE (LOWER(u.firstName) LIKE LOWER(CONCAT('%', :name, '%')) \" +\n           \"OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :name, '%'))) AND u.isActive = true\")\n    List<User> findByNameContainingIgnoreCase(@Param(\"name\") String name);\n\n    /**\n     * Find users by name pattern with pagination\n     */\n    @Query(\"SELECT u FROM User u WHERE (LOWER(u.firstName) LIKE LOWER(CONCAT('%', :name, '%')) \" +\n           \"OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :name, '%'))) AND u.isActive = true\")\n    Page<User> findByNameContainingIgnoreCase(@Param(\"name\") String name, Pageable pageable);\n\n    /**\n     * Check if username exists\n     */\n    boolean existsByUsername(String username);\n\n    /**\n     * Check if email exists\n     */\n    boolean existsByEmail(String email);\n\n    /**\n     * Check if username exists excluding specific user ID\n     */\n    @Query(\"SELECT COUNT(u) > 0 FROM User u WHERE u.username = :username AND u.id != :userId\")\n    boolean existsByUsernameAndIdNot(@Param(\"username\") String username, @Param(\"userId\") Long userId);\n\n    /**\n     * Check if email exists excluding specific user ID\n     */\n    @Query(\"SELECT COUNT(u) > 0 FROM User u WHERE u.email = :email AND u.id != :userId\")\n    boolean existsByEmailAndIdNot(@Param(\"email\") String email, @Param(\"userId\") Long userId);\n\n    /**\n     * Count users by role\n     */\n    long countByRoleAndIsActiveTrue(Role role);\n\n    /**\n     * Count users by institution\n     */\n    @Query(\"SELECT COUNT(u) FROM User u WHERE u.institutionId = :institutionId AND u.isActive = true\")\n    long countByInstitutionIdAndIsActiveTrue(@Param(\"institutionId\") Long institutionId);\n\n    /**\n     * Count users by branch\n     */\n    @Query(\"SELECT COUNT(u) FROM User u WHERE u.branchId = :branchId AND u.isActive = true\")\n    long countByBranchIdAndIsActiveTrue(@Param(\"branchId\") Long branchId);\n}\n","path":null,"size_bytes":5259,"size_tokens":null},"src/main/java/com/educationerp/notification/service/NotificationService.java":{"content":"package com.educationerp.notification.service;\n\nimport com.educationerp.notification.entity.Notification;\nimport com.educationerp.notification.repository.NotificationRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.mail.SimpleMailMessage;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.scheduling.annotation.Async;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * Service class for Notification operations\n * Handles sending notifications via different channels\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Service\n@Transactional\npublic class NotificationService {\n\n    private static final Logger logger = LoggerFactory.getLogger(NotificationService.class);\n\n    @Autowired\n    private NotificationRepository notificationRepository;\n\n    @Autowired\n    private JavaMailSender mailSender;\n\n    /**\n     * Send email notification\n     */\n    @Async\n    public CompletableFuture<Void> sendEmailNotification(Notification notification) {\n        try {\n            logger.info(\"Sending email notification to: {}\", notification.getEmailAddress());\n\n            SimpleMailMessage message = new SimpleMailMessage();\n            message.setTo(notification.getEmailAddress());\n            message.setSubject(notification.getTitle());\n            message.setText(notification.getMessage());\n            message.setFrom(\"noreply@educationerp.com\");\n\n            mailSender.send(message);\n\n            notification.markAsSent();\n            notificationRepository.save(notification);\n\n            logger.info(\"Email notification sent successfully to: {}\", notification.getEmailAddress());\n\n        } catch (Exception e) {\n            logger.error(\"Failed to send email notification to: {}\", notification.getEmailAddress(), e);\n            notification.markAsFailed(e.getMessage());\n            notificationRepository.save(notification);\n        }\n\n        return CompletableFuture.completedFuture(null);\n    }\n\n    /**\n     * Send SMS notification (placeholder implementation)\n     */\n    @Async\n    public CompletableFuture<Void> sendSmsNotification(Notification notification) {\n        try {\n            logger.info(\"Sending SMS notification to: {}\", notification.getPhoneNumber());\n\n            // TODO: Implement actual SMS service integration\n            // For now, just simulate SMS sending\n            Thread.sleep(1000);\n\n            notification.markAsSent();\n            notificationRepository.save(notification);\n\n            logger.info(\"SMS notification sent successfully to: {}\", notification.getPhoneNumber());\n\n        } catch (Exception e) {\n            logger.error(\"Failed to send SMS notification to: {}\", notification.getPhoneNumber(), e);\n            notification.markAsFailed(e.getMessage());\n            notificationRepository.save(notification);\n        }\n\n        return CompletableFuture.completedFuture(null);\n    }\n\n    /**\n     * Send push notification (placeholder implementation)\n     */\n    @Async\n    public CompletableFuture<Void> sendPushNotification(Notification notification) {\n        try {\n            logger.info(\"Sending push notification to user: {}\", notification.getRecipientId());\n\n            // TODO: Implement actual push notification service integration\n            // For now, just simulate push notification sending\n            Thread.sleep(500);\n\n            notification.markAsSent();\n            notificationRepository.save(notification);\n\n            logger.info(\"Push notification sent successfully to user: {}\", notification.getRecipientId());\n\n        } catch (Exception e) {\n            logger.error(\"Failed to send push notification to user: {}\", notification.getRecipientId(), e);\n            notification.markAsFailed(e.getMessage());\n            notificationRepository.save(notification);\n        }\n\n        return CompletableFuture.completedFuture(null);\n    }\n\n    /**\n     * Send notification based on channel\n     */\n    @Async\n    public CompletableFuture<Void> sendNotification(Notification notification) {\n        try {\n            switch (notification.getChannel()) {\n                case EMAIL:\n                    return sendEmailNotification(notification);\n                case SMS:\n                    return sendSmsNotification(notification);\n                case PUSH:\n                    return sendPushNotification(notification);\n                default:\n                    logger.warn(\"Unsupported notification channel: {}\", notification.getChannel());\n                    notification.markAsFailed(\"Unsupported notification channel\");\n                    notificationRepository.save(notification);\n                    return CompletableFuture.completedFuture(null);\n            }\n        } catch (Exception e) {\n            logger.error(\"Failed to send notification\", e);\n            notification.markAsFailed(e.getMessage());\n            notificationRepository.save(notification);\n            return CompletableFuture.completedFuture(null);\n        }\n    }\n\n    /**\n     * Create and send notification\n     */\n    public Notification createAndSendNotification(Long institutionId, Long branchId, Long recipientId, \n                                                 String recipientType, String title, String message, \n                                                 Notification.NotificationType notificationType, \n                                                 Notification.NotificationChannel channel, \n                                                 String senderName, Long senderId, \n                                                 String emailAddress, String phoneNumber) {\n        \n        Notification notification = new Notification();\n        notification.setInstitutionId(institutionId);\n        notification.setBranchId(branchId);\n        notification.setRecipientId(recipientId);\n        notification.setRecipientType(recipientType);\n        notification.setTitle(title);\n        notification.setMessage(message);\n        notification.setNotificationType(notificationType);\n        notification.setChannel(channel);\n        notification.setSenderName(senderName);\n        notification.setSenderId(senderId);\n        notification.setEmailAddress(emailAddress);\n        notification.setPhoneNumber(phoneNumber);\n\n        Notification savedNotification = notificationRepository.save(notification);\n\n        // Send notification asynchronously\n        sendNotification(savedNotification);\n\n        return savedNotification;\n    }\n\n    /**\n     * Send payment reminder notification\n     */\n    public void sendPaymentReminder(Long studentId, String studentName, String studentEmail, \n                                   String studentPhone, BigDecimal amount, LocalDateTime dueDate) {\n        \n        String title = \"Payment Reminder\";\n        String message = String.format(\"Dear %s, this is a reminder that your payment of $%.2f is due on %s. \" +\n                                     \"Please make the payment to avoid any late fees.\", \n                                     studentName, amount, dueDate.toLocalDate());\n\n        createAndSendNotification(null, null, studentId, \"STUDENT\", title, message, \n                                Notification.NotificationType.PAYMENT_REMINDER, \n                                Notification.NotificationChannel.EMAIL, \n                                \"System\", null, studentEmail, studentPhone);\n    }\n\n    /**\n     * Send exam notification\n     */\n    public void sendExamNotification(Long studentId, String studentName, String studentEmail, \n                                    String studentPhone, String examName, LocalDateTime examDate) {\n        \n        String title = \"Exam Notification\";\n        String message = String.format(\"Dear %s, you have an exam '%s' scheduled on %s. \" +\n                                     \"Please arrive 15 minutes early and bring your student ID.\", \n                                     studentName, examName, examDate.toLocalDate());\n\n        createAndSendNotification(null, null, studentId, \"STUDENT\", title, message, \n                                Notification.NotificationType.EXAM_NOTIFICATION, \n                                Notification.NotificationChannel.EMAIL, \n                                \"System\", null, studentEmail, studentPhone);\n    }\n\n    /**\n     * Send course update notification\n     */\n    public void sendCourseUpdateNotification(Long studentId, String studentName, String studentEmail, \n                                           String studentPhone, String courseName, String updateMessage) {\n        \n        String title = \"Course Update\";\n        String message = String.format(\"Dear %s, there is an update for your course '%s': %s\", \n                                     studentName, courseName, updateMessage);\n\n        createAndSendNotification(null, null, studentId, \"STUDENT\", title, message, \n                                Notification.NotificationType.COURSE_UPDATE, \n                                Notification.NotificationChannel.EMAIL, \n                                \"System\", null, studentEmail, studentPhone);\n    }\n\n    /**\n     * Send system maintenance notification\n     */\n    public void sendSystemMaintenanceNotification(Long institutionId, String maintenanceMessage, \n                                                 LocalDateTime maintenanceStart, LocalDateTime maintenanceEnd) {\n        \n        String message = String.format(\"System maintenance is scheduled from %s to %s. \" +\n                                     \"During this time, the system may be unavailable. %s\", \n                                     maintenanceStart.toLocalDate(), maintenanceEnd.toLocalDate(), maintenanceMessage);\n\n        // Send to all users in the institution\n        // TODO: Implement bulk notification sending\n        logger.info(\"System maintenance notification: {}\", message);\n    }\n\n    /**\n     * Get notifications for user\n     */\n    @Transactional(readOnly = true)\n    public List<Notification> getNotificationsForUser(Long userId) {\n        return notificationRepository.findByRecipientIdAndIsActiveTrueOrderByCreatedDateDesc(userId);\n    }\n\n    /**\n     * Mark notification as read\n     */\n    public void markNotificationAsRead(Long notificationId) {\n        Notification notification = notificationRepository.findById(notificationId)\n                .orElseThrow(() -> new RuntimeException(\"Notification not found\"));\n        \n        notification.markAsRead();\n        notificationRepository.save(notification);\n    }\n\n    /**\n     * Get unread notification count for user\n     */\n    @Transactional(readOnly = true)\n    public long getUnreadNotificationCount(Long userId) {\n        return notificationRepository.countByRecipientIdAndIsReadFalseAndIsActiveTrue(userId);\n    }\n}\n","path":null,"size_bytes":11058,"size_tokens":null},"src/main/java/com/educationerp/institution_management/entity/Institution.java":{"content":"package com.educationerp.institution_management.entity;\n\nimport com.educationerp.core.entity.BaseEntity;\nimport com.educationerp.security.enums.TenantType;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Objects;\n\n/**\n * Institution entity for the Education ERP System\n * Represents educational institutions in the multi-tenant system\n * \n * @author Education ERP Team\n * @version 1.0.0\n */\n@Entity\n@Table(name = \"institutions\", \n       uniqueConstraints = {\n           @UniqueConstraint(columnNames = \"code\"),\n           @UniqueConstraint(columnNames = \"email\")\n       })\npublic class Institution extends BaseEntity {\n\n    @NotBlank(message = \"Institution name is required\")\n    @Size(max = 200, message = \"Institution name must not exceed 200 characters\")\n    @Column(name = \"name\", nullable = false, length = 200)\n    private String name;\n\n    @NotBlank(message = \"Institution code is required\")\n    @Size(max = 20, message = \"Institution code must not exceed 20 characters\")\n    @Column(name = \"code\", nullable = false, unique = true, length = 20)\n    private String code;\n\n    @Size(max = 500, message = \"Description must not exceed 500 characters\")\n    @Column(name = \"description\", length = 500)\n    private String description;\n\n    @NotBlank(message = \"Address is required\")\n    @Size(max = 500, message = \"Address must not exceed 500 characters\")\n    @Column(name = \"address\", nullable = false, length = 500)\n    private String address;\n\n    @Size(max = 100, message = \"City must not exceed 100 characters\")\n    @Column(name = \"city\", length = 100)\n    private String city;\n\n    @Size(max = 100, message = \"State must not exceed 100 characters\")\n    @Column(name = \"state\", length = 100)\n    private String state;\n\n    @Size(max = 20, message = \"Postal code must not exceed 20 characters\")\n    @Column(name = \"postal_code\", length = 20)\n    private String postalCode;\n\n    @Size(max = 100, message = \"Country must not exceed 100 characters\")\n    @Column(name = \"country\", length = 100)\n    private String country;\n\n    @NotBlank(message = \"Phone number is required\")\n    @Size(max = 20, message = \"Phone number must not exceed 20 characters\")\n    @Column(name = \"phone_number\", nullable = false, length = 20)\n    private String phoneNumber;\n\n    @Email(message = \"Email should be valid\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    @Column(name = \"email\", unique = true, length = 100)\n    private String email;\n\n    @Size(max = 200, message = \"Website URL must not exceed 200 characters\")\n    @Column(name = \"website_url\", length = 200)\n    private String websiteUrl;\n\n    @NotNull(message = \"Tenant type is required\")\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"tenant_type\", nullable = false)\n    private TenantType tenantType;\n\n    @Size(max = 100, message = \"Database name must not exceed 100 characters\")\n    @Column(name = \"database_name\", length = 100)\n    private String databaseName;\n\n    @Size(max = 100, message = \"Schema name must not exceed 100 characters\")\n    @Column(name = \"schema_name\", length = 100)\n    private String schemaName;\n\n    @Size(max = 500, message = \"Connection string must not exceed 500 characters\")\n    @Column(name = \"connection_string\", length = 500)\n    private String connectionString;\n\n    @Column(name = \"is_active\", nullable = false)\n    private Boolean isActive = true;\n\n    @Size(max = 500, message = \"Logo URL must not exceed 500 characters\")\n    @Column(name = \"logo_url\", length = 500)\n    private String logoUrl;\n\n    @Size(max = 1000, message = \"Settings JSON must not exceed 1000 characters\")\n    @Column(name = \"settings_json\", length = 1000)\n    private String settingsJson;\n\n    // Constructors\n    public Institution() {\n    }\n\n    public Institution(String name, String code, String description, String address, \n                      String city, String state, String postalCode, String country, \n                      String phoneNumber, String email, String websiteUrl, TenantType tenantType) {\n        this.name = name;\n        this.code = code;\n        this.description = description;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.postalCode = postalCode;\n        this.country = country;\n        this.phoneNumber = phoneNumber;\n        this.email = email;\n        this.websiteUrl = websiteUrl;\n        this.tenantType = tenantType;\n    }\n\n    // Getters and Setters\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getPostalCode() {\n        return postalCode;\n    }\n\n    public void setPostalCode(String postalCode) {\n        this.postalCode = postalCode;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getPhoneNumber() {\n        return phoneNumber;\n    }\n\n    public void setPhoneNumber(String phoneNumber) {\n        this.phoneNumber = phoneNumber;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getWebsiteUrl() {\n        return websiteUrl;\n    }\n\n    public void setWebsiteUrl(String websiteUrl) {\n        this.websiteUrl = websiteUrl;\n    }\n\n    public TenantType getTenantType() {\n        return tenantType;\n    }\n\n    public void setTenantType(TenantType tenantType) {\n        this.tenantType = tenantType;\n    }\n\n    public String getDatabaseName() {\n        return databaseName;\n    }\n\n    public void setDatabaseName(String databaseName) {\n        this.databaseName = databaseName;\n    }\n\n    public String getSchemaName() {\n        return schemaName;\n    }\n\n    public void setSchemaName(String schemaName) {\n        this.schemaName = schemaName;\n    }\n\n    public String getConnectionString() {\n        return connectionString;\n    }\n\n    public void setConnectionString(String connectionString) {\n        this.connectionString = connectionString;\n    }\n\n    public Boolean getIsActive() {\n        return isActive;\n    }\n\n    public void setIsActive(Boolean isActive) {\n        this.isActive = isActive;\n    }\n\n    public String getLogoUrl() {\n        return logoUrl;\n    }\n\n    public void setLogoUrl(String logoUrl) {\n        this.logoUrl = logoUrl;\n    }\n\n    public String getSettingsJson() {\n        return settingsJson;\n    }\n\n    public void setSettingsJson(String settingsJson) {\n        this.settingsJson = settingsJson;\n    }\n\n    // Business methods\n    public String getFullAddress() {\n        StringBuilder address = new StringBuilder();\n        if (this.address != null) address.append(this.address);\n        if (this.city != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.city);\n        }\n        if (this.state != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.state);\n        }\n        if (this.postalCode != null) {\n            if (address.length() > 0) address.append(\" \");\n            address.append(this.postalCode);\n        }\n        if (this.country != null) {\n            if (address.length() > 0) address.append(\", \");\n            address.append(this.country);\n        }\n        return address.toString();\n    }\n\n    // equals, hashCode, and toString\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        if (!super.equals(o)) return false;\n        Institution that = (Institution) o;\n        return Objects.equals(code, that.code) &&\n                Objects.equals(email, that.email);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), code, email);\n    }\n\n    @Override\n    public String toString() {\n        return \"Institution{\" +\n                \"id=\" + getId() +\n                \", name='\" + name + '\\'' +\n                \", code='\" + code + '\\'' +\n                \", email='\" + email + '\\'' +\n                \", tenantType=\" + tenantType +\n                \", isActive=\" + getIsActive() +\n                '}';\n    }\n}\n","path":null,"size_bytes":9119,"size_tokens":null}},"version":2}